(function(ct,kt){typeof exports=="object"&&typeof module<"u"?kt(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],kt):(ct=typeof globalThis<"u"?globalThis:ct||self,kt(ct.ReactVnc={},ct.ReactJSXRuntime,ct.React))})(this,function(ct,kt,ft){"use strict";function En(P){return P&&P.__esModule&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P}var Lt={},St={},vr;function yr(){if(vr)return St;vr=1,Object.defineProperty(St,"__esModule",{value:!0}),St.toSigned32bit=h,St.toUnsigned32bit=P;function P(Y){return Y>>>0}function h(Y){return Y|0}return St}var $e={},xr;function ht(){if(xr)return $e;xr=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.Warn=$e.Info=$e.Error=$e.Debug=void 0,$e.getLogging=Y,$e.initLogging=h;var P="warn";$e.Debug=function(){},$e.Info=function(){},$e.Warn=function(){},$e.Error=function(){};function h(A){if(typeof A>"u"?A=P:P=A,$e.Debug=$e.Info=$e.Warn=$e.Error=function(){},typeof window.console<"u")switch(A){case"debug":$e.Debug=console.debug.bind(window.console);case"info":$e.Info=console.info.bind(window.console);case"warn":$e.Warn=console.warn.bind(window.console);case"error":$e.Error=console.error.bind(window.console);case"none":break;default:throw new window.Error("invalid logging type '"+A+"'")}}function Y(){return P}return h(),$e}var Kt={},gr;function br(){if(gr)return Kt;gr=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.decodeUTF8=P,Kt.encodeUTF8=h;function P(Y){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;try{return decodeURIComponent(escape(Y))}catch(K){if(K instanceof URIError&&A)return Y;throw K}}function h(Y){return unescape(encodeURIComponent(Y))}return Kt}var We={},mr;function Ft(){if(mr)return We;mr=1;function P(S){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},P(S)}Object.defineProperty(We,"__esModule",{value:!0}),We.hasScrollbarGutter=We.dragThreshold=void 0,We.isAndroid=r,We.isBlink=g,We.isChrome=i,We.isChromeOS=n,We.isChromium=c,We.isEdge=v,We.isFirefox=a,We.isGecko=b,We.isIOS=f,We.isMac=s,We.isOpera=x,We.isSafari=l,We.isTouchDevice=void 0,We.isWebKit=y,We.isWindows=p,We.supportsCursorURIs=void 0;var h=A(ht());function Y(S){if(typeof WeakMap!="function")return null;var X=new WeakMap,F=new WeakMap;return(Y=function(B){return B?F:X})(S)}function A(S,X){if(S&&S.__esModule)return S;if(S===null||P(S)!="object"&&typeof S!="function")return{default:S};var F=Y(X);if(F&&F.has(S))return F.get(S);var T={__proto__:null},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in S)if(D!=="default"&&{}.hasOwnProperty.call(S,D)){var N=B?Object.getOwnPropertyDescriptor(S,D):null;N&&(N.get||N.set)?Object.defineProperty(T,D,N):T[D]=S[D]}return T.default=S,F&&F.set(S,T),T}We.isTouchDevice="ontouchstart"in document.documentElement||document.ontouchstart!==void 0||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,window.addEventListener("touchstart",function S(){We.isTouchDevice=!0,window.removeEventListener("touchstart",S,!1)},!1),We.dragThreshold=10*(window.devicePixelRatio||1);var K=!1;try{var Q=document.createElement("canvas");Q.style.cursor='url("data:image/x-icon;base64,AAACAAEACAgAAAIAAgA4AQAAFgAAACgAAAAIAAAAEAAAAAEAIAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAA==") 2 2, default',Q.style.cursor.indexOf("url")===0?(h.Info("Data URI scheme cursor supported"),K=!0):h.Warn("Data URI scheme cursor not supported")}catch(S){h.Error("Data URI scheme cursor test exception: "+S)}We.supportsCursorURIs=K;var L=!0;try{var C=document.createElement("div");C.style.visibility="hidden",C.style.overflow="scroll",document.body.appendChild(C);var u=document.createElement("div");C.appendChild(u);var _=C.offsetWidth-u.offsetWidth;C.parentNode.removeChild(C),L=_!=0}catch(S){h.Error("Scrollbar test exception: "+S)}We.hasScrollbarGutter=L;function s(){return!!/mac/i.exec(navigator.platform)}function p(){return!!/win/i.exec(navigator.platform)}function f(){return!!/ipad/i.exec(navigator.platform)||!!/iphone/i.exec(navigator.platform)||!!/ipod/i.exec(navigator.platform)}function r(){return!!navigator.userAgent.match("Android ")}function n(){return!!navigator.userAgent.match(" CrOS ")}function l(){return!!navigator.userAgent.match("Safari/...")&&!navigator.userAgent.match("Chrome/...")&&!navigator.userAgent.match("Chromium/...")&&!navigator.userAgent.match("Epiphany/...")}function a(){return!!navigator.userAgent.match("Firefox/...")&&!navigator.userAgent.match("Seamonkey/...")}function i(){return!!navigator.userAgent.match("Chrome/...")&&!navigator.userAgent.match("Chromium/...")&&!navigator.userAgent.match("Edg/...")&&!navigator.userAgent.match("OPR/...")}function c(){return!!navigator.userAgent.match("Chromium/...")}function x(){return!!navigator.userAgent.match("OPR/...")}function v(){return!!navigator.userAgent.match("Edg/...")}function b(){return!!navigator.userAgent.match("Gecko/...")}function y(){return!!navigator.userAgent.match("AppleWebKit/...")&&!navigator.userAgent.match("Chrome/...")}function g(){return!!navigator.userAgent.match("Chrome/...")}return We}var Ct={},wr;function Xn(){if(wr)return Ct;wr=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.clientToElement=P;function P(h,Y,A){var K=A.getBoundingClientRect(),Q={x:0,y:0};return h<K.left?Q.x=0:h>=K.right?Q.x=K.width-1:Q.x=h-K.left,Y<K.top?Q.y=0:Y>=K.bottom?Q.y=K.height-1:Q.y=Y-K.top,Q}return Ct}var pt={},kr;function Sr(){if(kr)return pt;kr=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.getPointerEvent=P,pt.releaseCapture=u,pt.setCapture=C,pt.stopEvent=h;function P(_){return _.changedTouches?_.changedTouches[0]:_.touches?_.touches[0]:_}function h(_){_.stopPropagation(),_.preventDefault()}var Y=!1,A=null;document.captureElement=null;function K(_){if(!Y){var s=new _.constructor(_.type,_);Y=!0,document.captureElement?document.captureElement.dispatchEvent(s):A.dispatchEvent(s),Y=!1,_.stopPropagation(),s.defaultPrevented&&_.preventDefault(),_.type==="mouseup"&&u()}}function Q(){var _=document.getElementById("noVNC_mouse_capture_elem");_.style.cursor=window.getComputedStyle(document.captureElement).cursor}var L=new MutationObserver(Q);function C(_){if(_.setCapture)_.setCapture(),document.captureElement=_;else{u();var s=document.getElementById("noVNC_mouse_capture_elem");s===null&&(s=document.createElement("div"),s.id="noVNC_mouse_capture_elem",s.style.position="fixed",s.style.top="0px",s.style.left="0px",s.style.width="100%",s.style.height="100%",s.style.zIndex=1e4,s.style.display="none",document.body.appendChild(s),s.addEventListener("contextmenu",K),s.addEventListener("mousemove",K),s.addEventListener("mouseup",K)),document.captureElement=_,L.observe(_,{attributes:!0}),Q(),s.style.display="",window.addEventListener("mousemove",K),window.addEventListener("mouseup",K)}}function u(){if(document.releaseCapture)document.releaseCapture(),document.captureElement=null;else{if(!document.captureElement)return;A=document.captureElement,document.captureElement=null,L.disconnect();var _=document.getElementById("noVNC_mouse_capture_elem");_.style.display="none",window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",K)}}return pt}var Mt={},Kr;function Er(){return Kr||(Kr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;function h(C){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},h(C)}function Y(C,u){if(!(C instanceof u))throw new TypeError("Cannot call a class as a function")}function A(C,u){for(var _=0;_<u.length;_++){var s=u[_];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(C,Q(s.key),s)}}function K(C,u,_){return u&&A(C.prototype,u),Object.defineProperty(C,"prototype",{writable:!1}),C}function Q(C){var u=L(C,"string");return h(u)=="symbol"?u:u+""}function L(C,u){if(h(C)!="object"||!C)return C;var _=C[Symbol.toPrimitive];if(_!==void 0){var s=_.call(C,u);if(h(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(C)}P.default=function(){function C(){Y(this,C),this._listeners=new Map}return K(C,[{key:"addEventListener",value:function(_,s){this._listeners.has(_)||this._listeners.set(_,new Set),this._listeners.get(_).add(s)}},{key:"removeEventListener",value:function(_,s){this._listeners.has(_)&&this._listeners.get(_).delete(s)}},{key:"dispatchEvent",value:function(_){var s=this;return this._listeners.has(_.type)?(this._listeners.get(_.type).forEach(function(p){return p.call(s,_)}),!_.defaultPrevented):!0}}])}()}(Mt)),Mt}var Dt={},Ot={},Xr;function Fr(){return Xr||(Xr=1,function(P){function h(Q){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},h(Q)}Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var Y=K(ht());function A(Q){if(typeof WeakMap!="function")return null;var L=new WeakMap,C=new WeakMap;return(A=function(_){return _?C:L})(Q)}function K(Q,L){if(Q&&Q.__esModule)return Q;if(Q===null||h(Q)!="object"&&typeof Q!="function")return{default:Q};var C=A(L);if(C&&C.has(Q))return C.get(Q);var u={__proto__:null},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in Q)if(s!=="default"&&{}.hasOwnProperty.call(Q,s)){var p=_?Object.getOwnPropertyDescriptor(Q,s):null;p&&(p.get||p.set)?Object.defineProperty(u,s,p):u[s]=Q[s]}return u.default=Q,C&&C.set(Q,u),u}P.default={toBase64Table:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),base64Pad:"=",encode:function(L){for(var C="",u=L.length,_=u%3,s=0;s<u-2;s+=3)C+=this.toBase64Table[L[s]>>2],C+=this.toBase64Table[((L[s]&3)<<4)+(L[s+1]>>4)],C+=this.toBase64Table[((L[s+1]&15)<<2)+(L[s+2]>>6)],C+=this.toBase64Table[L[s+2]&63];var p=u-_;return _===2?(C+=this.toBase64Table[L[p]>>2],C+=this.toBase64Table[((L[p]&3)<<4)+(L[p+1]>>4)],C+=this.toBase64Table[(L[p+1]&15)<<2],C+=this.toBase64Table[64]):_===1&&(C+=this.toBase64Table[L[p]>>2],C+=this.toBase64Table[(L[p]&3)<<4],C+=this.toBase64Table[64],C+=this.toBase64Table[64]),C},toBinaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode:function(L){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=L.indexOf("=")-C;u<0&&(u=L.length-C);for(var _=(u>>2)*3+Math.floor(u%4/1.5),s=new Array(_),p=0,f=0,r=0,n=C;n<L.length;n++){var l=this.toBinaryTable[L.charCodeAt(n)&127],a=L.charAt(n)===this.base64Pad;if(l===-1){Y.Error("Illegal character code "+L.charCodeAt(n)+" at position "+n);continue}f=f<<6|l,p+=6,p>=8&&(p-=8,a||(s[r++]=f>>p&255),f&=(1<<p)-1)}if(p){var i=new Error("Corrupted base64 string");throw i.name="Base64-Error",i}return s}}}(Ot)),Ot}var Cr;function Fn(){return Cr||(Cr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=L(ht()),Y=K(Fr()),A=yr();function K(r){return r&&r.__esModule?r:{default:r}}function Q(r){if(typeof WeakMap!="function")return null;var n=new WeakMap,l=new WeakMap;return(Q=function(i){return i?l:n})(r)}function L(r,n){if(r&&r.__esModule)return r;if(r===null||C(r)!="object"&&typeof r!="function")return{default:r};var l=Q(n);if(l&&l.has(r))return l.get(r);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in r)if(c!=="default"&&{}.hasOwnProperty.call(r,c)){var x=i?Object.getOwnPropertyDescriptor(r,c):null;x&&(x.get||x.set)?Object.defineProperty(a,c,x):a[c]=r[c]}return a.default=r,l&&l.set(r,a),a}function C(r){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},C(r)}function u(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function _(r,n){for(var l=0;l<n.length;l++){var a=n[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,p(a.key),a)}}function s(r,n,l){return n&&_(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function p(r){var n=f(r,"string");return C(n)=="symbol"?n:n+""}function f(r,n){if(C(r)!="object"||!r)return r;var l=r[Symbol.toPrimitive];if(l!==void 0){var a=l.call(r,n);if(C(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}P.default=function(){function r(n){if(u(this,r),this._drawCtx=null,this._renderQ=[],this._flushPromise=null,this._fbWidth=0,this._fbHeight=0,this._prevDrawStyle="",h.Debug(">> Display.constructor"),this._target=n,!this._target)throw new Error("Target must be set");if(typeof this._target=="string")throw new Error("target must be a DOM element");if(!this._target.getContext)throw new Error("no getContext method");this._targetCtx=this._target.getContext("2d"),this._viewportLoc={x:0,y:0,w:this._target.width,h:this._target.height},this._backbuffer=document.createElement("canvas"),this._drawCtx=this._backbuffer.getContext("2d"),this._damageBounds={left:0,top:0,right:this._backbuffer.width,bottom:this._backbuffer.height},h.Debug("User Agent: "+navigator.userAgent),h.Debug("<< Display.constructor"),this._scale=1,this._clipViewport=!1}return s(r,[{key:"scale",get:function(){return this._scale},set:function(l){this._rescale(l)}},{key:"clipViewport",get:function(){return this._clipViewport},set:function(l){this._clipViewport=l;var a=this._viewportLoc;this.viewportChangeSize(a.w,a.h),this.viewportChangePos(0,0)}},{key:"width",get:function(){return this._fbWidth}},{key:"height",get:function(){return this._fbHeight}},{key:"viewportChangePos",value:function(l,a){var i=this._viewportLoc;l=Math.floor(l),a=Math.floor(a),this._clipViewport||(l=-i.w,a=-i.h);var c=i.x+i.w-1,x=i.y+i.h-1;l<0&&i.x+l<0&&(l=-i.x),c+l>=this._fbWidth&&(l-=c+l-this._fbWidth+1),i.y+a<0&&(a=-i.y),x+a>=this._fbHeight&&(a-=x+a-this._fbHeight+1),!(l===0&&a===0)&&(h.Debug("viewportChange deltaX: "+l+", deltaY: "+a),i.x+=l,i.y+=a,this._damage(i.x,i.y,i.w,i.h),this.flip())}},{key:"viewportChangeSize",value:function(l,a){(!this._clipViewport||typeof l>"u"||typeof a>"u")&&(h.Debug("Setting viewport to full display region"),l=this._fbWidth,a=this._fbHeight),l=Math.floor(l),a=Math.floor(a),l>this._fbWidth&&(l=this._fbWidth),a>this._fbHeight&&(a=this._fbHeight);var i=this._viewportLoc;if(i.w!==l||i.h!==a){i.w=l,i.h=a;var c=this._target;c.width=l,c.height=a,this.viewportChangePos(0,0),this._damage(i.x,i.y,i.w,i.h),this.flip(),this._rescale(this._scale)}}},{key:"absX",value:function(l){return this._scale===0?0:(0,A.toSigned32bit)(l/this._scale+this._viewportLoc.x)}},{key:"absY",value:function(l){return this._scale===0?0:(0,A.toSigned32bit)(l/this._scale+this._viewportLoc.y)}},{key:"resize",value:function(l,a){this._prevDrawStyle="",this._fbWidth=l,this._fbHeight=a;var i=this._backbuffer;if(i.width!==l||i.height!==a){var c=null;i.width>0&&i.height>0&&(c=this._drawCtx.getImageData(0,0,i.width,i.height)),i.width!==l&&(i.width=l),i.height!==a&&(i.height=a),c&&this._drawCtx.putImageData(c,0,0)}var x=this._viewportLoc;this.viewportChangeSize(x.w,x.h),this.viewportChangePos(0,0)}},{key:"getImageData",value:function(){return this._drawCtx.getImageData(0,0,this.width,this.height)}},{key:"toDataURL",value:function(l,a){return this._backbuffer.toDataURL(l,a)}},{key:"toBlob",value:function(l,a,i){return this._backbuffer.toBlob(l,a,i)}},{key:"_damage",value:function(l,a,i,c){l<this._damageBounds.left&&(this._damageBounds.left=l),a<this._damageBounds.top&&(this._damageBounds.top=a),l+i>this._damageBounds.right&&(this._damageBounds.right=l+i),a+c>this._damageBounds.bottom&&(this._damageBounds.bottom=a+c)}},{key:"flip",value:function(l){if(this._renderQ.length!==0&&!l)this._renderQPush({type:"flip"});else{var a=this._damageBounds.left,i=this._damageBounds.top,c=this._damageBounds.right-a,x=this._damageBounds.bottom-i,v=a-this._viewportLoc.x,b=i-this._viewportLoc.y;v<0&&(c+=v,a-=v,v=0),b<0&&(x+=b,i-=b,b=0),v+c>this._viewportLoc.w&&(c=this._viewportLoc.w-v),b+x>this._viewportLoc.h&&(x=this._viewportLoc.h-b),c>0&&x>0&&this._targetCtx.drawImage(this._backbuffer,a,i,c,x,v,b,c,x),this._damageBounds.left=this._damageBounds.top=65535,this._damageBounds.right=this._damageBounds.bottom=0}}},{key:"pending",value:function(){return this._renderQ.length>0}},{key:"flush",value:function(){var l=this;return this._renderQ.length===0?Promise.resolve():(this._flushPromise===null&&(this._flushPromise=new Promise(function(a){l._flushResolve=a})),this._flushPromise)}},{key:"fillRect",value:function(l,a,i,c,x,v){this._renderQ.length!==0&&!v?this._renderQPush({type:"fill",x:l,y:a,width:i,height:c,color:x}):(this._setFillColor(x),this._drawCtx.fillRect(l,a,i,c),this._damage(l,a,i,c))}},{key:"copyImage",value:function(l,a,i,c,x,v,b){this._renderQ.length!==0&&!b?this._renderQPush({type:"copy",oldX:l,oldY:a,x:i,y:c,width:x,height:v}):(this._drawCtx.mozImageSmoothingEnabled=!1,this._drawCtx.webkitImageSmoothingEnabled=!1,this._drawCtx.msImageSmoothingEnabled=!1,this._drawCtx.imageSmoothingEnabled=!1,this._drawCtx.drawImage(this._backbuffer,l,a,x,v,i,c,x,v),this._damage(i,c,x,v))}},{key:"imageRect",value:function(l,a,i,c,x,v){if(!(i===0||c===0)){var b=new Image;b.src="data: "+x+";base64,"+Y.default.encode(v),this._renderQPush({type:"img",img:b,x:l,y:a,width:i,height:c})}}},{key:"blitImage",value:function(l,a,i,c,x,v,b){if(this._renderQ.length!==0&&!b){var y=new Uint8Array(i*c*4);y.set(new Uint8Array(x.buffer,0,y.length)),this._renderQPush({type:"blit",data:y,x:l,y:a,width:i,height:c})}else{var g=new Uint8ClampedArray(x.buffer,x.byteOffset+v,i*c*4),S=new ImageData(g,i,c);this._drawCtx.putImageData(S,l,a),this._damage(l,a,i,c)}}},{key:"drawImage",value:function(l,a,i){this._drawCtx.drawImage(l,a,i),this._damage(a,i,l.width,l.height)}},{key:"autoscale",value:function(l,a){var i;if(l===0||a===0)i=0;else{var c=this._viewportLoc,x=l/a,v=c.w/c.h;v>=x?i=l/c.w:i=a/c.h}this._rescale(i)}},{key:"_rescale",value:function(l){this._scale=l;var a=this._viewportLoc,i=l*a.w+"px",c=l*a.h+"px";(this._target.style.width!==i||this._target.style.height!==c)&&(this._target.style.width=i,this._target.style.height=c)}},{key:"_setFillColor",value:function(l){var a="rgb("+l[0]+","+l[1]+","+l[2]+")";a!==this._prevDrawStyle&&(this._drawCtx.fillStyle=a,this._prevDrawStyle=a)}},{key:"_renderQPush",value:function(l){this._renderQ.push(l),this._renderQ.length===1&&this._scanRenderQ()}},{key:"_resumeRenderQ",value:function(){this.removeEventListener("load",this._noVNCDisplay._resumeRenderQ),this._noVNCDisplay._scanRenderQ()}},{key:"_scanRenderQ",value:function(){for(var l=!0;l&&this._renderQ.length>0;){var a=this._renderQ[0];switch(a.type){case"flip":this.flip(!0);break;case"copy":this.copyImage(a.oldX,a.oldY,a.x,a.y,a.width,a.height,!0);break;case"fill":this.fillRect(a.x,a.y,a.width,a.height,a.color,!0);break;case"blit":this.blitImage(a.x,a.y,a.width,a.height,a.data,0,!0);break;case"img":if(a.img.complete){if(a.img.width!==a.width||a.img.height!==a.height){h.Error("Decoded image has incorrect dimensions. Got "+a.img.width+"x"+a.img.height+". Expected "+a.width+"x"+a.height+".");return}this.drawImage(a.img,a.x,a.y)}else a.img._noVNCDisplay=this,a.img.addEventListener("load",this._resumeRenderQ),l=!1;break}l&&this._renderQ.shift()}this._renderQ.length===0&&this._flushPromise!==null&&(this._flushResolve(),this._flushPromise=null,this._flushResolve=null)}}])}()}(Dt)),Dt}var Bt={},He={},ut={},Ar;function At(){if(Ar)return ut;Ar=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.Buf8=ut.Buf32=ut.Buf16=void 0,ut.arraySet=h,ut.flattenChunks=Y,ut.shrinkBuf=P;function P(A,K){return A.length===K?A:A.subarray?A.subarray(0,K):(A.length=K,A)}function h(A,K,Q,L,C){if(K.subarray&&A.subarray){A.set(K.subarray(Q,Q+L),C);return}for(var u=0;u<L;u++)A[C+u]=K[Q+u]}function Y(A){var K,Q,L,C,u,_;for(L=0,K=0,Q=A.length;K<Q;K++)L+=A[K].length;for(_=new Uint8Array(L),C=0,K=0,Q=A.length;K<Q;K++)u=A[K],_.set(u,C),C+=u.length;return _}return ut.Buf8=Uint8Array,ut.Buf16=Uint16Array,ut.Buf32=Int32Array,ut}var Qt={},Rr;function Tr(){return Rr||(Rr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=h;function h(Y,A,K,Q){for(var L=Y&65535|0,C=Y>>>16&65535|0,u=0;K!==0;){u=K>2e3?2e3:K,K-=u;do L=L+A[Q++]|0,C=C+L|0;while(--u);L%=65521,C%=65521}return L|C<<16|0}}(Qt)),Qt}var It={},Pr;function Lr(){return Pr||(Pr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=h;function h(){for(var Y,A=[],K=0;K<256;K++){Y=K;for(var Q=0;Q<8;Q++)Y=Y&1?3988292384^Y>>>1:Y>>>1;A[K]=Y}return A}h()}(It)),It}var Ut={},Mr;function Cn(){return Mr||(Mr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=A;var h=30,Y=12;function A(K,Q){var L,C,u,_,s,p,f,r,n,l,a,i,c,x,v,b,y,g,S,X,F,T,B,D,N;L=K.state,C=K.next_in,D=K.input,u=C+(K.avail_in-5),_=K.next_out,N=K.output,s=_-(Q-K.avail_out),p=_+(K.avail_out-257),f=L.dmax,r=L.wsize,n=L.whave,l=L.wnext,a=L.window,i=L.hold,c=L.bits,x=L.lencode,v=L.distcode,b=(1<<L.lenbits)-1,y=(1<<L.distbits)-1;e:do{c<15&&(i+=D[C++]<<c,c+=8,i+=D[C++]<<c,c+=8),g=x[i&b];t:for(;;){if(S=g>>>24,i>>>=S,c-=S,S=g>>>16&255,S===0)N[_++]=g&65535;else if(S&16){X=g&65535,S&=15,S&&(c<S&&(i+=D[C++]<<c,c+=8),X+=i&(1<<S)-1,i>>>=S,c-=S),c<15&&(i+=D[C++]<<c,c+=8,i+=D[C++]<<c,c+=8),g=v[i&y];r:for(;;){if(S=g>>>24,i>>>=S,c-=S,S=g>>>16&255,S&16){if(F=g&65535,S&=15,c<S&&(i+=D[C++]<<c,c+=8,c<S&&(i+=D[C++]<<c,c+=8)),F+=i&(1<<S)-1,F>f){K.msg="invalid distance too far back",L.mode=h;break e}if(i>>>=S,c-=S,S=_-s,F>S){if(S=F-S,S>n&&L.sane){K.msg="invalid distance too far back",L.mode=h;break e}if(T=0,B=a,l===0){if(T+=r-S,S<X){X-=S;do N[_++]=a[T++];while(--S);T=_-F,B=N}}else if(l<S){if(T+=r+l-S,S-=l,S<X){X-=S;do N[_++]=a[T++];while(--S);if(T=0,l<X){S=l,X-=S;do N[_++]=a[T++];while(--S);T=_-F,B=N}}}else if(T+=l-S,S<X){X-=S;do N[_++]=a[T++];while(--S);T=_-F,B=N}for(;X>2;)N[_++]=B[T++],N[_++]=B[T++],N[_++]=B[T++],X-=3;X&&(N[_++]=B[T++],X>1&&(N[_++]=B[T++]))}else{T=_-F;do N[_++]=N[T++],N[_++]=N[T++],N[_++]=N[T++],X-=3;while(X>2);X&&(N[_++]=N[T++],X>1&&(N[_++]=N[T++]))}}else if((S&64)===0){g=v[(g&65535)+(i&(1<<S)-1)];continue r}else{K.msg="invalid distance code",L.mode=h;break e}break}}else if((S&64)===0){g=x[(g&65535)+(i&(1<<S)-1)];continue t}else if(S&32){L.mode=Y;break e}else{K.msg="invalid literal/length code",L.mode=h;break e}break}}while(C<u&&_<p);X=c>>3,C-=X,c-=X<<3,i&=(1<<c)-1,K.next_in=C,K.next_out=_,K.avail_in=C<u?5+(u-C):5-(C-u),K.avail_out=_<p?257+(p-_):257-(_-p),L.hold=i,L.bits=c}}(Ut)),Ut}var Nt={},Dr;function An(){return Dr||(Dr=1,function(P){function h(a){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},h(a)}Object.defineProperty(P,"__esModule",{value:!0}),P.default=l;var Y=K(At());function A(a){if(typeof WeakMap!="function")return null;var i=new WeakMap,c=new WeakMap;return(A=function(v){return v?c:i})(a)}function K(a,i){if(a&&a.__esModule)return a;if(a===null||h(a)!="object"&&typeof a!="function")return{default:a};var c=A(i);if(c&&c.has(a))return c.get(a);var x={__proto__:null},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in a)if(b!=="default"&&{}.hasOwnProperty.call(a,b)){var y=v?Object.getOwnPropertyDescriptor(a,b):null;y&&(y.get||y.set)?Object.defineProperty(x,b,y):x[b]=a[b]}return x.default=a,c&&c.set(a,x),x}var Q=15,L=852,C=592,u=0,_=1,s=2,p=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],r=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function l(a,i,c,x,v,b,y,g){var S=g.bits,X=0,F=0,T=0,B=0,D=0,N=0,te=0,_e=0,ge=0,ve=0,Fe,Ae,le,ke,Re,De=null,J=0,$,re=new Y.Buf16(Q+1),G=new Y.Buf16(Q+1),O=null,I=0,se,ue,j;for(X=0;X<=Q;X++)re[X]=0;for(F=0;F<x;F++)re[i[c+F]]++;for(D=S,B=Q;B>=1&&re[B]===0;B--);if(D>B&&(D=B),B===0)return v[b++]=1<<24|64<<16|0,v[b++]=1<<24|64<<16|0,g.bits=1,0;for(T=1;T<B&&re[T]===0;T++);for(D<T&&(D=T),_e=1,X=1;X<=Q;X++)if(_e<<=1,_e-=re[X],_e<0)return-1;if(_e>0&&(a===u||B!==1))return-1;for(G[1]=0,X=1;X<Q;X++)G[X+1]=G[X]+re[X];for(F=0;F<x;F++)i[c+F]!==0&&(y[G[i[c+F]]++]=F);if(a===u?(De=O=y,$=19):a===_?(De=p,J-=257,O=f,I-=257,$=256):(De=r,O=n,$=-1),ve=0,F=0,X=T,Re=b,N=D,te=0,le=-1,ge=1<<D,ke=ge-1,a===_&&ge>L||a===s&&ge>C)return 1;for(;;){se=X-te,y[F]<$?(ue=0,j=y[F]):y[F]>$?(ue=O[I+y[F]],j=De[J+y[F]]):(ue=96,j=0),Fe=1<<X-te,Ae=1<<N,T=Ae;do Ae-=Fe,v[Re+(ve>>te)+Ae]=se<<24|ue<<16|j|0;while(Ae!==0);for(Fe=1<<X-1;ve&Fe;)Fe>>=1;if(Fe!==0?(ve&=Fe-1,ve+=Fe):ve=0,F++,--re[X]===0){if(X===B)break;X=i[c+y[F]]}if(X>D&&(ve&ke)!==le){for(te===0&&(te=D),Re+=T,N=X-te,_e=1<<N;N+te<B&&(_e-=re[N+te],!(_e<=0));)N++,_e<<=1;if(ge+=1<<N,a===_&&ge>L||a===s&&ge>C)return 1;le=ve&ke,v[le]=D<<24|N<<16|Re-b|0}}return ve!==0&&(v[Re+ve]=X-te<<24|64<<16|0),g.bits=D,0}}(Nt)),Nt}var Or;function Rn(){if(Or)return He;Or=1;function P(R){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},P(R)}Object.defineProperty(He,"__esModule",{value:!0}),He.Z_TREES=He.Z_STREAM_ERROR=He.Z_STREAM_END=He.Z_OK=He.Z_NEED_DICT=He.Z_MEM_ERROR=He.Z_FINISH=He.Z_DEFLATED=He.Z_DATA_ERROR=He.Z_BUF_ERROR=He.Z_BLOCK=void 0,He.inflate=oe,He.inflateEnd=fe,He.inflateGetHeader=ye,He.inflateInfo=void 0,He.inflateInit=Ze,He.inflateInit2=Ve,He.inflateReset=ze,He.inflateReset2=xe,He.inflateResetKeep=je,He.inflateSetDictionary=Ce;var h=u(At()),Y=L(Tr()),A=L(Lr()),K=L(Cn()),Q=L(An());function L(R){return R&&R.__esModule?R:{default:R}}function C(R){if(typeof WeakMap!="function")return null;var Z=new WeakMap,w=new WeakMap;return(C=function(Ee){return Ee?w:Z})(R)}function u(R,Z){if(R&&R.__esModule)return R;if(R===null||P(R)!="object"&&typeof R!="function")return{default:R};var w=C(Z);if(w&&w.has(R))return w.get(R);var de={__proto__:null},Ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in R)if(e!=="default"&&{}.hasOwnProperty.call(R,e)){var k=Ee?Object.getOwnPropertyDescriptor(R,e):null;k&&(k.get||k.set)?Object.defineProperty(de,e,k):de[e]=R[e]}return de.default=R,w&&w.set(R,de),de}var _=0,s=1,p=2,f=He.Z_FINISH=4,r=He.Z_BLOCK=5,n=He.Z_TREES=6,l=He.Z_OK=0,a=He.Z_STREAM_END=1,i=He.Z_NEED_DICT=2,c=He.Z_STREAM_ERROR=-2,x=He.Z_DATA_ERROR=-3,v=He.Z_MEM_ERROR=-4,b=He.Z_BUF_ERROR=-5,y=He.Z_DEFLATED=8,g=1,S=2,X=3,F=4,T=5,B=6,D=7,N=8,te=9,_e=10,ge=11,ve=12,Fe=13,Ae=14,le=15,ke=16,Re=17,De=18,J=19,$=20,re=21,G=22,O=23,I=24,se=25,ue=26,j=27,W=28,ee=29,ne=30,be=31,V=32,q=852,ie=592,ce=15,he=ce;function H(R){return(R>>>24&255)+(R>>>8&65280)+((R&65280)<<8)+((R&255)<<24)}function we(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function je(R){var Z;return!R||!R.state?c:(Z=R.state,R.total_in=R.total_out=Z.total=0,R.msg="",Z.wrap&&(R.adler=Z.wrap&1),Z.mode=g,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new h.Buf32(q),Z.distcode=Z.distdyn=new h.Buf32(ie),Z.sane=1,Z.back=-1,l)}function ze(R){var Z;return!R||!R.state?c:(Z=R.state,Z.wsize=0,Z.whave=0,Z.wnext=0,je(R))}function xe(R,Z){var w,de;return!R||!R.state||(de=R.state,Z<0?(w=0,Z=-Z):(w=(Z>>4)+1,Z<48&&(Z&=15)),Z&&(Z<8||Z>15))?c:(de.window!==null&&de.wbits!==Z&&(de.window=null),de.wrap=w,de.wbits=Z,ze(R))}function Ve(R,Z){var w,de;return R?(de=new we,R.state=de,de.window=null,w=xe(R,Z),w!==l&&(R.state=null),w):c}function Ze(R){return Ve(R,he)}var at=!0,lt,tt;function ot(R){if(at){var Z;for(lt=new h.Buf32(512),tt=new h.Buf32(32),Z=0;Z<144;)R.lens[Z++]=8;for(;Z<256;)R.lens[Z++]=9;for(;Z<280;)R.lens[Z++]=7;for(;Z<288;)R.lens[Z++]=8;for((0,Q.default)(s,R.lens,0,288,lt,0,R.work,{bits:9}),Z=0;Z<32;)R.lens[Z++]=5;(0,Q.default)(p,R.lens,0,32,tt,0,R.work,{bits:5}),at=!1}R.lencode=lt,R.lenbits=9,R.distcode=tt,R.distbits=5}function E(R,Z,w,de){var Ee,e=R.state;return e.window===null&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new h.Buf8(e.wsize)),de>=e.wsize?(h.arraySet(e.window,Z,w-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(Ee=e.wsize-e.wnext,Ee>de&&(Ee=de),h.arraySet(e.window,Z,w-de,Ee,e.wnext),de-=Ee,de?(h.arraySet(e.window,Z,w-de,de,0),e.wnext=de,e.whave=e.wsize):(e.wnext+=Ee,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=Ee))),0}function oe(R,Z){var w,de,Ee,e,k,m,t,d,o,M,U,z,ae,Me,Pe=0,Xe,Te,Be,Ke,Ie,Ye,qe,Ne,Ge=new h.Buf8(4),et,rt,st=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return c;w=R.state,w.mode===ve&&(w.mode=Fe),k=R.next_out,Ee=R.output,t=R.avail_out,e=R.next_in,de=R.input,m=R.avail_in,d=w.hold,o=w.bits,M=m,U=t,Ne=l;e:for(;;)switch(w.mode){case g:if(w.wrap===0){w.mode=Fe;break}for(;o<16;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if(w.wrap&2&&d===35615){w.check=0,Ge[0]=d&255,Ge[1]=d>>>8&255,w.check=(0,A.default)(w.check,Ge,2,0),d=0,o=0,w.mode=S;break}if(w.flags=0,w.head&&(w.head.done=!1),!(w.wrap&1)||(((d&255)<<8)+(d>>8))%31){R.msg="incorrect header check",w.mode=ne;break}if((d&15)!==y){R.msg="unknown compression method",w.mode=ne;break}if(d>>>=4,o-=4,qe=(d&15)+8,w.wbits===0)w.wbits=qe;else if(qe>w.wbits){R.msg="invalid window size",w.mode=ne;break}w.dmax=1<<qe,R.adler=w.check=1,w.mode=d&512?_e:ve,d=0,o=0;break;case S:for(;o<16;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if(w.flags=d,(w.flags&255)!==y){R.msg="unknown compression method",w.mode=ne;break}if(w.flags&57344){R.msg="unknown header flags set",w.mode=ne;break}w.head&&(w.head.text=d>>8&1),w.flags&512&&(Ge[0]=d&255,Ge[1]=d>>>8&255,w.check=(0,A.default)(w.check,Ge,2,0)),d=0,o=0,w.mode=X;case X:for(;o<32;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}w.head&&(w.head.time=d),w.flags&512&&(Ge[0]=d&255,Ge[1]=d>>>8&255,Ge[2]=d>>>16&255,Ge[3]=d>>>24&255,w.check=(0,A.default)(w.check,Ge,4,0)),d=0,o=0,w.mode=F;case F:for(;o<16;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}w.head&&(w.head.xflags=d&255,w.head.os=d>>8),w.flags&512&&(Ge[0]=d&255,Ge[1]=d>>>8&255,w.check=(0,A.default)(w.check,Ge,2,0)),d=0,o=0,w.mode=T;case T:if(w.flags&1024){for(;o<16;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}w.length=d,w.head&&(w.head.extra_len=d),w.flags&512&&(Ge[0]=d&255,Ge[1]=d>>>8&255,w.check=(0,A.default)(w.check,Ge,2,0)),d=0,o=0}else w.head&&(w.head.extra=null);w.mode=B;case B:if(w.flags&1024&&(z=w.length,z>m&&(z=m),z&&(w.head&&(qe=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),h.arraySet(w.head.extra,de,e,z,qe)),w.flags&512&&(w.check=(0,A.default)(w.check,de,z,e)),m-=z,e+=z,w.length-=z),w.length))break e;w.length=0,w.mode=D;case D:if(w.flags&2048){if(m===0)break e;z=0;do qe=de[e+z++],w.head&&qe&&w.length<65536&&(w.head.name+=String.fromCharCode(qe));while(qe&&z<m);if(w.flags&512&&(w.check=(0,A.default)(w.check,de,z,e)),m-=z,e+=z,qe)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=N;case N:if(w.flags&4096){if(m===0)break e;z=0;do qe=de[e+z++],w.head&&qe&&w.length<65536&&(w.head.comment+=String.fromCharCode(qe));while(qe&&z<m);if(w.flags&512&&(w.check=(0,A.default)(w.check,de,z,e)),m-=z,e+=z,qe)break e}else w.head&&(w.head.comment=null);w.mode=te;case te:if(w.flags&512){for(;o<16;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if(d!==(w.check&65535)){R.msg="header crc mismatch",w.mode=ne;break}d=0,o=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),R.adler=w.check=0,w.mode=ve;break;case _e:for(;o<32;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}R.adler=w.check=H(d),d=0,o=0,w.mode=ge;case ge:if(w.havedict===0)return R.next_out=k,R.avail_out=t,R.next_in=e,R.avail_in=m,w.hold=d,w.bits=o,i;R.adler=w.check=1,w.mode=ve;case ve:if(Z===r||Z===n)break e;case Fe:if(w.last){d>>>=o&7,o-=o&7,w.mode=j;break}for(;o<3;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}switch(w.last=d&1,d>>>=1,o-=1,d&3){case 0:w.mode=Ae;break;case 1:if(ot(w),w.mode=$,Z===n){d>>>=2,o-=2;break e}break;case 2:w.mode=Re;break;case 3:R.msg="invalid block type",w.mode=ne}d>>>=2,o-=2;break;case Ae:for(d>>>=o&7,o-=o&7;o<32;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if((d&65535)!==(d>>>16^65535)){R.msg="invalid stored block lengths",w.mode=ne;break}if(w.length=d&65535,d=0,o=0,w.mode=le,Z===n)break e;case le:w.mode=ke;case ke:if(z=w.length,z){if(z>m&&(z=m),z>t&&(z=t),z===0)break e;h.arraySet(Ee,de,e,z,k),m-=z,e+=z,t-=z,k+=z,w.length-=z;break}w.mode=ve;break;case Re:for(;o<14;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if(w.nlen=(d&31)+257,d>>>=5,o-=5,w.ndist=(d&31)+1,d>>>=5,o-=5,w.ncode=(d&15)+4,d>>>=4,o-=4,w.nlen>286||w.ndist>30){R.msg="too many length or distance symbols",w.mode=ne;break}w.have=0,w.mode=De;case De:for(;w.have<w.ncode;){for(;o<3;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}w.lens[st[w.have++]]=d&7,d>>>=3,o-=3}for(;w.have<19;)w.lens[st[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,et={bits:w.lenbits},Ne=(0,Q.default)(_,w.lens,0,19,w.lencode,0,w.work,et),w.lenbits=et.bits,Ne){R.msg="invalid code lengths set",w.mode=ne;break}w.have=0,w.mode=J;case J:for(;w.have<w.nlen+w.ndist;){for(;Pe=w.lencode[d&(1<<w.lenbits)-1],Xe=Pe>>>24,Te=Pe>>>16&255,Be=Pe&65535,!(Xe<=o);){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if(Be<16)d>>>=Xe,o-=Xe,w.lens[w.have++]=Be;else{if(Be===16){for(rt=Xe+2;o<rt;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if(d>>>=Xe,o-=Xe,w.have===0){R.msg="invalid bit length repeat",w.mode=ne;break}qe=w.lens[w.have-1],z=3+(d&3),d>>>=2,o-=2}else if(Be===17){for(rt=Xe+3;o<rt;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}d>>>=Xe,o-=Xe,qe=0,z=3+(d&7),d>>>=3,o-=3}else{for(rt=Xe+7;o<rt;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}d>>>=Xe,o-=Xe,qe=0,z=11+(d&127),d>>>=7,o-=7}if(w.have+z>w.nlen+w.ndist){R.msg="invalid bit length repeat",w.mode=ne;break}for(;z--;)w.lens[w.have++]=qe}}if(w.mode===ne)break;if(w.lens[256]===0){R.msg="invalid code -- missing end-of-block",w.mode=ne;break}if(w.lenbits=9,et={bits:w.lenbits},Ne=(0,Q.default)(s,w.lens,0,w.nlen,w.lencode,0,w.work,et),w.lenbits=et.bits,Ne){R.msg="invalid literal/lengths set",w.mode=ne;break}if(w.distbits=6,w.distcode=w.distdyn,et={bits:w.distbits},Ne=(0,Q.default)(p,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,et),w.distbits=et.bits,Ne){R.msg="invalid distances set",w.mode=ne;break}if(w.mode=$,Z===n)break e;case $:w.mode=re;case re:if(m>=6&&t>=258){R.next_out=k,R.avail_out=t,R.next_in=e,R.avail_in=m,w.hold=d,w.bits=o,(0,K.default)(R,U),k=R.next_out,Ee=R.output,t=R.avail_out,e=R.next_in,de=R.input,m=R.avail_in,d=w.hold,o=w.bits,w.mode===ve&&(w.back=-1);break}for(w.back=0;Pe=w.lencode[d&(1<<w.lenbits)-1],Xe=Pe>>>24,Te=Pe>>>16&255,Be=Pe&65535,!(Xe<=o);){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if(Te&&(Te&240)===0){for(Ke=Xe,Ie=Te,Ye=Be;Pe=w.lencode[Ye+((d&(1<<Ke+Ie)-1)>>Ke)],Xe=Pe>>>24,Te=Pe>>>16&255,Be=Pe&65535,!(Ke+Xe<=o);){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}d>>>=Ke,o-=Ke,w.back+=Ke}if(d>>>=Xe,o-=Xe,w.back+=Xe,w.length=Be,Te===0){w.mode=ue;break}if(Te&32){w.back=-1,w.mode=ve;break}if(Te&64){R.msg="invalid literal/length code",w.mode=ne;break}w.extra=Te&15,w.mode=G;case G:if(w.extra){for(rt=w.extra;o<rt;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}w.length+=d&(1<<w.extra)-1,d>>>=w.extra,o-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=O;case O:for(;Pe=w.distcode[d&(1<<w.distbits)-1],Xe=Pe>>>24,Te=Pe>>>16&255,Be=Pe&65535,!(Xe<=o);){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if((Te&240)===0){for(Ke=Xe,Ie=Te,Ye=Be;Pe=w.distcode[Ye+((d&(1<<Ke+Ie)-1)>>Ke)],Xe=Pe>>>24,Te=Pe>>>16&255,Be=Pe&65535,!(Ke+Xe<=o);){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}d>>>=Ke,o-=Ke,w.back+=Ke}if(d>>>=Xe,o-=Xe,w.back+=Xe,Te&64){R.msg="invalid distance code",w.mode=ne;break}w.offset=Be,w.extra=Te&15,w.mode=I;case I:if(w.extra){for(rt=w.extra;o<rt;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}w.offset+=d&(1<<w.extra)-1,d>>>=w.extra,o-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){R.msg="invalid distance too far back",w.mode=ne;break}w.mode=se;case se:if(t===0)break e;if(z=U-t,w.offset>z){if(z=w.offset-z,z>w.whave&&w.sane){R.msg="invalid distance too far back",w.mode=ne;break}z>w.wnext?(z-=w.wnext,ae=w.wsize-z):ae=w.wnext-z,z>w.length&&(z=w.length),Me=w.window}else Me=Ee,ae=k-w.offset,z=w.length;z>t&&(z=t),t-=z,w.length-=z;do Ee[k++]=Me[ae++];while(--z);w.length===0&&(w.mode=re);break;case ue:if(t===0)break e;Ee[k++]=w.length,t--,w.mode=re;break;case j:if(w.wrap){for(;o<32;){if(m===0)break e;m--,d|=de[e++]<<o,o+=8}if(U-=t,R.total_out+=U,w.total+=U,U&&(R.adler=w.check=w.flags?(0,A.default)(w.check,Ee,U,k-U):(0,Y.default)(w.check,Ee,U,k-U)),U=t,(w.flags?d:H(d))!==w.check){R.msg="incorrect data check",w.mode=ne;break}d=0,o=0}w.mode=W;case W:if(w.wrap&&w.flags){for(;o<32;){if(m===0)break e;m--,d+=de[e++]<<o,o+=8}if(d!==(w.total&4294967295)){R.msg="incorrect length check",w.mode=ne;break}d=0,o=0}w.mode=ee;case ee:Ne=a;break e;case ne:Ne=x;break e;case be:return v;case V:default:return c}return R.next_out=k,R.avail_out=t,R.next_in=e,R.avail_in=m,w.hold=d,w.bits=o,(w.wsize||U!==R.avail_out&&w.mode<ne&&(w.mode<j||Z!==f))&&E(R,R.output,R.next_out,U-R.avail_out),M-=R.avail_in,U-=R.avail_out,R.total_in+=M,R.total_out+=U,w.total+=U,w.wrap&&U&&(R.adler=w.check=w.flags?(0,A.default)(w.check,Ee,U,R.next_out-U):(0,Y.default)(w.check,Ee,U,R.next_out-U)),R.data_type=w.bits+(w.last?64:0)+(w.mode===ve?128:0)+(w.mode===$||w.mode===le?256:0),(M===0&&U===0||Z===f)&&Ne===l&&(Ne=b),Ne}function fe(R){if(!R||!R.state)return c;var Z=R.state;return Z.window&&(Z.window=null),R.state=null,l}function ye(R,Z){var w;return!R||!R.state||(w=R.state,(w.wrap&2)===0)?c:(w.head=Z,Z.done=!1,l)}function Ce(R,Z){var w=Z.length,de,Ee,e;return!R||!R.state||(de=R.state,de.wrap!==0&&de.mode!==ge)?c:de.mode===ge&&(Ee=1,Ee=(0,Y.default)(Ee,Z,w,0),Ee!==de.check)?x:(e=E(R,Z,w,w),e?(de.mode=be,v):(de.havedict=1,l))}return He.inflateInfo="pako inflate (from Nodeca project)",He}var jt={},Br;function Qr(){return Br||(Br=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=h;function h(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}}(jt)),jt}var Ir;function Ht(){return Ir||(Ir=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=Rn(),Y=A(Qr());function A(s){return s&&s.__esModule?s:{default:s}}function K(s){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},K(s)}function Q(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}function L(s,p){for(var f=0;f<p.length;f++){var r=p[f];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,u(r.key),r)}}function C(s,p,f){return p&&L(s.prototype,p),Object.defineProperty(s,"prototype",{writable:!1}),s}function u(s){var p=_(s,"string");return K(p)=="symbol"?p:p+""}function _(s,p){if(K(s)!="object"||!s)return s;var f=s[Symbol.toPrimitive];if(f!==void 0){var r=f.call(s,p);if(K(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}P.default=function(){function s(){Q(this,s),this.strm=new Y.default,this.chunkSize=1024*10*10,this.strm.output=new Uint8Array(this.chunkSize),(0,h.inflateInit)(this.strm)}return C(s,[{key:"setInput",value:function(f){f?(this.strm.input=f,this.strm.avail_in=this.strm.input.length,this.strm.next_in=0):(this.strm.input=null,this.strm.avail_in=0,this.strm.next_in=0)}},{key:"inflate",value:function(f){f>this.chunkSize&&(this.chunkSize=f,this.strm.output=new Uint8Array(this.chunkSize)),this.strm.next_out=0,this.strm.avail_out=f;var r=(0,h.inflate)(this.strm,0);if(r<0)throw new Error("zlib inflate failed");if(this.strm.next_out!=f)throw new Error("Incomplete zlib block");return new Uint8Array(this.strm.output.buffer,0,this.strm.next_out)}},{key:"reset",value:function(){(0,h.inflateReset)(this.strm)}}])}()}(Bt)),Bt}var zt={},Le={},dt={},Ur;function Tn(){if(Ur)return dt;Ur=1;function P(E){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},P(E)}Object.defineProperty(dt,"__esModule",{value:!0}),dt._tr_align=lt,dt._tr_flush_block=tt,dt._tr_init=Ze,dt._tr_stored_block=at,dt._tr_tally=ot;var h=A(At());function Y(E){if(typeof WeakMap!="function")return null;var oe=new WeakMap,fe=new WeakMap;return(Y=function(Ce){return Ce?fe:oe})(E)}function A(E,oe){if(E&&E.__esModule)return E;if(E===null||P(E)!="object"&&typeof E!="function")return{default:E};var fe=Y(oe);if(fe&&fe.has(E))return fe.get(E);var ye={__proto__:null},Ce=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in E)if(R!=="default"&&{}.hasOwnProperty.call(E,R)){var Z=Ce?Object.getOwnPropertyDescriptor(E,R):null;Z&&(Z.get||Z.set)?Object.defineProperty(ye,R,Z):ye[R]=E[R]}return ye.default=E,fe&&fe.set(E,ye),ye}var K=4,Q=0,L=1,C=2;function u(E){for(var oe=E.length;--oe>=0;)E[oe]=0}var _=0,s=1,p=2,f=3,r=258,n=29,l=256,a=l+1+n,i=30,c=19,x=2*a+1,v=15,b=16,y=7,g=256,S=16,X=17,F=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=512,_e=new Array((a+2)*2);u(_e);var ge=new Array(i*2);u(ge);var ve=new Array(te);u(ve);var Fe=new Array(r-f+1);u(Fe);var Ae=new Array(n);u(Ae);var le=new Array(i);u(le);function ke(E,oe,fe,ye,Ce){this.static_tree=E,this.extra_bits=oe,this.extra_base=fe,this.elems=ye,this.max_length=Ce,this.has_stree=E&&E.length}var Re,De,J;function $(E,oe){this.dyn_tree=E,this.max_code=0,this.stat_desc=oe}function re(E){return E<256?ve[E]:ve[256+(E>>>7)]}function G(E,oe){E.pending_buf[E.pending++]=oe&255,E.pending_buf[E.pending++]=oe>>>8&255}function O(E,oe,fe){E.bi_valid>b-fe?(E.bi_buf|=oe<<E.bi_valid&65535,G(E,E.bi_buf),E.bi_buf=oe>>b-E.bi_valid,E.bi_valid+=fe-b):(E.bi_buf|=oe<<E.bi_valid&65535,E.bi_valid+=fe)}function I(E,oe,fe){O(E,fe[oe*2],fe[oe*2+1])}function se(E,oe){var fe=0;do fe|=E&1,E>>>=1,fe<<=1;while(--oe>0);return fe>>>1}function ue(E){E.bi_valid===16?(G(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):E.bi_valid>=8&&(E.pending_buf[E.pending++]=E.bi_buf&255,E.bi_buf>>=8,E.bi_valid-=8)}function j(E,oe){var fe=oe.dyn_tree,ye=oe.max_code,Ce=oe.stat_desc.static_tree,R=oe.stat_desc.has_stree,Z=oe.stat_desc.extra_bits,w=oe.stat_desc.extra_base,de=oe.stat_desc.max_length,Ee,e,k,m,t,d,o=0;for(m=0;m<=v;m++)E.bl_count[m]=0;for(fe[E.heap[E.heap_max]*2+1]=0,Ee=E.heap_max+1;Ee<x;Ee++)e=E.heap[Ee],m=fe[fe[e*2+1]*2+1]+1,m>de&&(m=de,o++),fe[e*2+1]=m,!(e>ye)&&(E.bl_count[m]++,t=0,e>=w&&(t=Z[e-w]),d=fe[e*2],E.opt_len+=d*(m+t),R&&(E.static_len+=d*(Ce[e*2+1]+t)));if(o!==0){do{for(m=de-1;E.bl_count[m]===0;)m--;E.bl_count[m]--,E.bl_count[m+1]+=2,E.bl_count[de]--,o-=2}while(o>0);for(m=de;m!==0;m--)for(e=E.bl_count[m];e!==0;)k=E.heap[--Ee],!(k>ye)&&(fe[k*2+1]!==m&&(E.opt_len+=(m-fe[k*2+1])*fe[k*2],fe[k*2+1]=m),e--)}}function W(E,oe,fe){var ye=new Array(v+1),Ce=0,R,Z;for(R=1;R<=v;R++)ye[R]=Ce=Ce+fe[R-1]<<1;for(Z=0;Z<=oe;Z++){var w=E[Z*2+1];w!==0&&(E[Z*2]=se(ye[w]++,w))}}function ee(){var E,oe,fe,ye,Ce,R=new Array(v+1);for(fe=0,ye=0;ye<n-1;ye++)for(Ae[ye]=fe,E=0;E<1<<T[ye];E++)Fe[fe++]=ye;for(Fe[fe-1]=ye,Ce=0,ye=0;ye<16;ye++)for(le[ye]=Ce,E=0;E<1<<B[ye];E++)ve[Ce++]=ye;for(Ce>>=7;ye<i;ye++)for(le[ye]=Ce<<7,E=0;E<1<<B[ye]-7;E++)ve[256+Ce++]=ye;for(oe=0;oe<=v;oe++)R[oe]=0;for(E=0;E<=143;)_e[E*2+1]=8,E++,R[8]++;for(;E<=255;)_e[E*2+1]=9,E++,R[9]++;for(;E<=279;)_e[E*2+1]=7,E++,R[7]++;for(;E<=287;)_e[E*2+1]=8,E++,R[8]++;for(W(_e,a+1,R),E=0;E<i;E++)ge[E*2+1]=5,ge[E*2]=se(E,5);Re=new ke(_e,T,l+1,a,v),De=new ke(ge,B,0,i,v),J=new ke(new Array(0),D,0,c,y)}function ne(E){var oe;for(oe=0;oe<a;oe++)E.dyn_ltree[oe*2]=0;for(oe=0;oe<i;oe++)E.dyn_dtree[oe*2]=0;for(oe=0;oe<c;oe++)E.bl_tree[oe*2]=0;E.dyn_ltree[g*2]=1,E.opt_len=E.static_len=0,E.last_lit=E.matches=0}function be(E){E.bi_valid>8?G(E,E.bi_buf):E.bi_valid>0&&(E.pending_buf[E.pending++]=E.bi_buf),E.bi_buf=0,E.bi_valid=0}function V(E,oe,fe,ye){be(E),G(E,fe),G(E,~fe),h.arraySet(E.pending_buf,E.window,oe,fe,E.pending),E.pending+=fe}function q(E,oe,fe,ye){var Ce=oe*2,R=fe*2;return E[Ce]<E[R]||E[Ce]===E[R]&&ye[oe]<=ye[fe]}function ie(E,oe,fe){for(var ye=E.heap[fe],Ce=fe<<1;Ce<=E.heap_len&&(Ce<E.heap_len&&q(oe,E.heap[Ce+1],E.heap[Ce],E.depth)&&Ce++,!q(oe,ye,E.heap[Ce],E.depth));)E.heap[fe]=E.heap[Ce],fe=Ce,Ce<<=1;E.heap[fe]=ye}function ce(E,oe,fe){var ye,Ce,R=0,Z,w;if(E.last_lit!==0)do ye=E.pending_buf[E.d_buf+R*2]<<8|E.pending_buf[E.d_buf+R*2+1],Ce=E.pending_buf[E.l_buf+R],R++,ye===0?I(E,Ce,oe):(Z=Fe[Ce],I(E,Z+l+1,oe),w=T[Z],w!==0&&(Ce-=Ae[Z],O(E,Ce,w)),ye--,Z=re(ye),I(E,Z,fe),w=B[Z],w!==0&&(ye-=le[Z],O(E,ye,w)));while(R<E.last_lit);I(E,g,oe)}function he(E,oe){var fe=oe.dyn_tree,ye=oe.stat_desc.static_tree,Ce=oe.stat_desc.has_stree,R=oe.stat_desc.elems,Z,w,de=-1,Ee;for(E.heap_len=0,E.heap_max=x,Z=0;Z<R;Z++)fe[Z*2]!==0?(E.heap[++E.heap_len]=de=Z,E.depth[Z]=0):fe[Z*2+1]=0;for(;E.heap_len<2;)Ee=E.heap[++E.heap_len]=de<2?++de:0,fe[Ee*2]=1,E.depth[Ee]=0,E.opt_len--,Ce&&(E.static_len-=ye[Ee*2+1]);for(oe.max_code=de,Z=E.heap_len>>1;Z>=1;Z--)ie(E,fe,Z);Ee=R;do Z=E.heap[1],E.heap[1]=E.heap[E.heap_len--],ie(E,fe,1),w=E.heap[1],E.heap[--E.heap_max]=Z,E.heap[--E.heap_max]=w,fe[Ee*2]=fe[Z*2]+fe[w*2],E.depth[Ee]=(E.depth[Z]>=E.depth[w]?E.depth[Z]:E.depth[w])+1,fe[Z*2+1]=fe[w*2+1]=Ee,E.heap[1]=Ee++,ie(E,fe,1);while(E.heap_len>=2);E.heap[--E.heap_max]=E.heap[1],j(E,oe),W(fe,de,E.bl_count)}function H(E,oe,fe){var ye,Ce=-1,R,Z=oe[0*2+1],w=0,de=7,Ee=4;for(Z===0&&(de=138,Ee=3),oe[(fe+1)*2+1]=65535,ye=0;ye<=fe;ye++)R=Z,Z=oe[(ye+1)*2+1],!(++w<de&&R===Z)&&(w<Ee?E.bl_tree[R*2]+=w:R!==0?(R!==Ce&&E.bl_tree[R*2]++,E.bl_tree[S*2]++):w<=10?E.bl_tree[X*2]++:E.bl_tree[F*2]++,w=0,Ce=R,Z===0?(de=138,Ee=3):R===Z?(de=6,Ee=3):(de=7,Ee=4))}function we(E,oe,fe){var ye,Ce=-1,R,Z=oe[0*2+1],w=0,de=7,Ee=4;for(Z===0&&(de=138,Ee=3),ye=0;ye<=fe;ye++)if(R=Z,Z=oe[(ye+1)*2+1],!(++w<de&&R===Z)){if(w<Ee)do I(E,R,E.bl_tree);while(--w!==0);else R!==0?(R!==Ce&&(I(E,R,E.bl_tree),w--),I(E,S,E.bl_tree),O(E,w-3,2)):w<=10?(I(E,X,E.bl_tree),O(E,w-3,3)):(I(E,F,E.bl_tree),O(E,w-11,7));w=0,Ce=R,Z===0?(de=138,Ee=3):R===Z?(de=6,Ee=3):(de=7,Ee=4)}}function je(E){var oe;for(H(E,E.dyn_ltree,E.l_desc.max_code),H(E,E.dyn_dtree,E.d_desc.max_code),he(E,E.bl_desc),oe=c-1;oe>=3&&E.bl_tree[N[oe]*2+1]===0;oe--);return E.opt_len+=3*(oe+1)+5+5+4,oe}function ze(E,oe,fe,ye){var Ce;for(O(E,oe-257,5),O(E,fe-1,5),O(E,ye-4,4),Ce=0;Ce<ye;Ce++)O(E,E.bl_tree[N[Ce]*2+1],3);we(E,E.dyn_ltree,oe-1),we(E,E.dyn_dtree,fe-1)}function xe(E){var oe=4093624447,fe;for(fe=0;fe<=31;fe++,oe>>>=1)if(oe&1&&E.dyn_ltree[fe*2]!==0)return Q;if(E.dyn_ltree[9*2]!==0||E.dyn_ltree[10*2]!==0||E.dyn_ltree[13*2]!==0)return L;for(fe=32;fe<l;fe++)if(E.dyn_ltree[fe*2]!==0)return L;return Q}var Ve=!1;function Ze(E){Ve||(ee(),Ve=!0),E.l_desc=new $(E.dyn_ltree,Re),E.d_desc=new $(E.dyn_dtree,De),E.bl_desc=new $(E.bl_tree,J),E.bi_buf=0,E.bi_valid=0,ne(E)}function at(E,oe,fe,ye){O(E,(_<<1)+(ye?1:0),3),V(E,oe,fe)}function lt(E){O(E,s<<1,3),I(E,g,_e),ue(E)}function tt(E,oe,fe,ye){var Ce,R,Z=0;E.level>0?(E.strm.data_type===C&&(E.strm.data_type=xe(E)),he(E,E.l_desc),he(E,E.d_desc),Z=je(E),Ce=E.opt_len+3+7>>>3,R=E.static_len+3+7>>>3,R<=Ce&&(Ce=R)):Ce=R=fe+5,fe+4<=Ce&&oe!==-1?at(E,oe,fe,ye):E.strategy===K||R===Ce?(O(E,(s<<1)+(ye?1:0),3),ce(E,_e,ge)):(O(E,(p<<1)+(ye?1:0),3),ze(E,E.l_desc.max_code+1,E.d_desc.max_code+1,Z+1),ce(E,E.dyn_ltree,E.dyn_dtree)),ne(E),ye&&be(E)}function ot(E,oe,fe){return E.pending_buf[E.d_buf+E.last_lit*2]=oe>>>8&255,E.pending_buf[E.d_buf+E.last_lit*2+1]=oe&255,E.pending_buf[E.l_buf+E.last_lit]=fe&255,E.last_lit++,oe===0?E.dyn_ltree[fe*2]++:(E.matches++,oe--,E.dyn_ltree[(Fe[fe]+l+1)*2]++,E.dyn_dtree[re(oe)*2]++),E.last_lit===E.lit_bufsize-1}return dt}var Gt={},Nr;function Pn(){return Nr||(Nr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0,P.default={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}(Gt)),Gt}var jr;function Ln(){if(jr)return Le;jr=1;function P(e){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},P(e)}Object.defineProperty(Le,"__esModule",{value:!0}),Le.Z_UNKNOWN=Le.Z_STREAM_ERROR=Le.Z_STREAM_END=Le.Z_RLE=Le.Z_PARTIAL_FLUSH=Le.Z_OK=Le.Z_NO_FLUSH=Le.Z_HUFFMAN_ONLY=Le.Z_FULL_FLUSH=Le.Z_FIXED=Le.Z_FINISH=Le.Z_FILTERED=Le.Z_DEFLATED=Le.Z_DEFAULT_STRATEGY=Le.Z_DEFAULT_COMPRESSION=Le.Z_DATA_ERROR=Le.Z_BUF_ERROR=Le.Z_BLOCK=void 0,Le.deflate=w,Le.deflateEnd=de,Le.deflateInfo=void 0,Le.deflateInit=Z,Le.deflateInit2=R,Le.deflateReset=ye,Le.deflateResetKeep=fe,Le.deflateSetDictionary=Ee,Le.deflateSetHeader=Ce;var h=u(At()),Y=u(Tn()),A=L(Tr()),K=L(Lr()),Q=L(Pn());function L(e){return e&&e.__esModule?e:{default:e}}function C(e){if(typeof WeakMap!="function")return null;var k=new WeakMap,m=new WeakMap;return(C=function(d){return d?m:k})(e)}function u(e,k){if(e&&e.__esModule)return e;if(e===null||P(e)!="object"&&typeof e!="function")return{default:e};var m=C(k);if(m&&m.has(e))return m.get(e);var t={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var M=d?Object.getOwnPropertyDescriptor(e,o):null;M&&(M.get||M.set)?Object.defineProperty(t,o,M):t[o]=e[o]}return t.default=e,m&&m.set(e,t),t}var _=Le.Z_NO_FLUSH=0,s=Le.Z_PARTIAL_FLUSH=1,p=Le.Z_FULL_FLUSH=3,f=Le.Z_FINISH=4,r=Le.Z_BLOCK=5,n=Le.Z_OK=0,l=Le.Z_STREAM_END=1,a=Le.Z_STREAM_ERROR=-2,i=Le.Z_DATA_ERROR=-3,c=Le.Z_BUF_ERROR=-5,x=Le.Z_DEFAULT_COMPRESSION=-1,v=Le.Z_FILTERED=1,b=Le.Z_HUFFMAN_ONLY=2,y=Le.Z_RLE=3,g=Le.Z_FIXED=4,S=Le.Z_DEFAULT_STRATEGY=0,X=Le.Z_UNKNOWN=2,F=Le.Z_DEFLATED=8,T=9,B=15,D=8,N=29,te=256,_e=te+1+N,ge=30,ve=19,Fe=2*_e+1,Ae=15,le=3,ke=258,Re=ke+le+1,De=32,J=42,$=69,re=73,G=91,O=103,I=113,se=666,ue=1,j=2,W=3,ee=4,ne=3;function be(e,k){return e.msg=Q.default[k],k}function V(e){return(e<<1)-(e>4?9:0)}function q(e){for(var k=e.length;--k>=0;)e[k]=0}function ie(e){var k=e.state,m=k.pending;m>e.avail_out&&(m=e.avail_out),m!==0&&(h.arraySet(e.output,k.pending_buf,k.pending_out,m,e.next_out),e.next_out+=m,k.pending_out+=m,e.total_out+=m,e.avail_out-=m,k.pending-=m,k.pending===0&&(k.pending_out=0))}function ce(e,k){Y._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,k),e.block_start=e.strstart,ie(e.strm)}function he(e,k){e.pending_buf[e.pending++]=k}function H(e,k){e.pending_buf[e.pending++]=k>>>8&255,e.pending_buf[e.pending++]=k&255}function we(e,k,m,t){var d=e.avail_in;return d>t&&(d=t),d===0?0:(e.avail_in-=d,h.arraySet(k,e.input,e.next_in,d,m),e.state.wrap===1?e.adler=(0,A.default)(e.adler,k,d,m):e.state.wrap===2&&(e.adler=(0,K.default)(e.adler,k,d,m)),e.next_in+=d,e.total_in+=d,d)}function je(e,k){var m=e.max_chain_length,t=e.strstart,d,o,M=e.prev_length,U=e.nice_match,z=e.strstart>e.w_size-Re?e.strstart-(e.w_size-Re):0,ae=e.window,Me=e.w_mask,Pe=e.prev,Xe=e.strstart+ke,Te=ae[t+M-1],Be=ae[t+M];e.prev_length>=e.good_match&&(m>>=2),U>e.lookahead&&(U=e.lookahead);do if(d=k,!(ae[d+M]!==Be||ae[d+M-1]!==Te||ae[d]!==ae[t]||ae[++d]!==ae[t+1])){t+=2,d++;do;while(ae[++t]===ae[++d]&&ae[++t]===ae[++d]&&ae[++t]===ae[++d]&&ae[++t]===ae[++d]&&ae[++t]===ae[++d]&&ae[++t]===ae[++d]&&ae[++t]===ae[++d]&&ae[++t]===ae[++d]&&t<Xe);if(o=ke-(Xe-t),t=Xe-ke,o>M){if(e.match_start=k,M=o,o>=U)break;Te=ae[t+M-1],Be=ae[t+M]}}while((k=Pe[k&Me])>z&&--m!==0);return M<=e.lookahead?M:e.lookahead}function ze(e){var k=e.w_size,m,t,d,o,M;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=k+(k-Re)){h.arraySet(e.window,e.window,k,k,0),e.match_start-=k,e.strstart-=k,e.block_start-=k,t=e.hash_size,m=t;do d=e.head[--m],e.head[m]=d>=k?d-k:0;while(--t);t=k,m=t;do d=e.prev[--m],e.prev[m]=d>=k?d-k:0;while(--t);o+=k}if(e.strm.avail_in===0)break;if(t=we(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=t,e.lookahead+e.insert>=le)for(M=e.strstart-e.insert,e.ins_h=e.window[M],e.ins_h=(e.ins_h<<e.hash_shift^e.window[M+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[M+le-1])&e.hash_mask,e.prev[M&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=M,M++,e.insert--,!(e.lookahead+e.insert<le)););}while(e.lookahead<Re&&e.strm.avail_in!==0)}function xe(e,k){var m=65535;for(m>e.pending_buf_size-5&&(m=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ze(e),e.lookahead===0&&k===_)return ue;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var t=e.block_start+m;if((e.strstart===0||e.strstart>=t)&&(e.lookahead=e.strstart-t,e.strstart=t,ce(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Re&&(ce(e,!1),e.strm.avail_out===0))return ue}return e.insert=0,k===f?(ce(e,!0),e.strm.avail_out===0?W:ee):(e.strstart>e.block_start&&(ce(e,!1),e.strm.avail_out===0),ue)}function Ve(e,k){for(var m,t;;){if(e.lookahead<Re){if(ze(e),e.lookahead<Re&&k===_)return ue;if(e.lookahead===0)break}if(m=0,e.lookahead>=le&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,m=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),m!==0&&e.strstart-m<=e.w_size-Re&&(e.match_length=je(e,m)),e.match_length>=le)if(t=Y._tr_tally(e,e.strstart-e.match_start,e.match_length-le),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=le){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,m=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else t=Y._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(t&&(ce(e,!1),e.strm.avail_out===0))return ue}return e.insert=e.strstart<le-1?e.strstart:le-1,k===f?(ce(e,!0),e.strm.avail_out===0?W:ee):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?ue:j}function Ze(e,k){for(var m,t,d;;){if(e.lookahead<Re){if(ze(e),e.lookahead<Re&&k===_)return ue;if(e.lookahead===0)break}if(m=0,e.lookahead>=le&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,m=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=le-1,m!==0&&e.prev_length<e.max_lazy_match&&e.strstart-m<=e.w_size-Re&&(e.match_length=je(e,m),e.match_length<=5&&(e.strategy===v||e.match_length===le&&e.strstart-e.match_start>4096)&&(e.match_length=le-1)),e.prev_length>=le&&e.match_length<=e.prev_length){d=e.strstart+e.lookahead-le,t=Y._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-le),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=d&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,m=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=le-1,e.strstart++,t&&(ce(e,!1),e.strm.avail_out===0))return ue}else if(e.match_available){if(t=Y._tr_tally(e,0,e.window[e.strstart-1]),t&&ce(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ue}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(t=Y._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<le-1?e.strstart:le-1,k===f?(ce(e,!0),e.strm.avail_out===0?W:ee):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?ue:j}function at(e,k){for(var m,t,d,o,M=e.window;;){if(e.lookahead<=ke){if(ze(e),e.lookahead<=ke&&k===_)return ue;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=le&&e.strstart>0&&(d=e.strstart-1,t=M[d],t===M[++d]&&t===M[++d]&&t===M[++d])){o=e.strstart+ke;do;while(t===M[++d]&&t===M[++d]&&t===M[++d]&&t===M[++d]&&t===M[++d]&&t===M[++d]&&t===M[++d]&&t===M[++d]&&d<o);e.match_length=ke-(o-d),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=le?(m=Y._tr_tally(e,1,e.match_length-le),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(m=Y._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),m&&(ce(e,!1),e.strm.avail_out===0))return ue}return e.insert=0,k===f?(ce(e,!0),e.strm.avail_out===0?W:ee):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?ue:j}function lt(e,k){for(var m;;){if(e.lookahead===0&&(ze(e),e.lookahead===0)){if(k===_)return ue;break}if(e.match_length=0,m=Y._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,m&&(ce(e,!1),e.strm.avail_out===0))return ue}return e.insert=0,k===f?(ce(e,!0),e.strm.avail_out===0?W:ee):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?ue:j}function tt(e,k,m,t,d){this.good_length=e,this.max_lazy=k,this.nice_length=m,this.max_chain=t,this.func=d}var ot;ot=[new tt(0,0,0,0,xe),new tt(4,4,8,4,Ve),new tt(4,5,16,8,Ve),new tt(4,6,32,32,Ve),new tt(4,4,16,16,Ze),new tt(8,16,32,32,Ze),new tt(8,16,128,128,Ze),new tt(8,32,128,256,Ze),new tt(32,128,258,1024,Ze),new tt(32,258,258,4096,Ze)];function E(e){e.window_size=2*e.w_size,q(e.head),e.max_lazy_match=ot[e.level].max_lazy,e.good_match=ot[e.level].good_length,e.nice_match=ot[e.level].nice_length,e.max_chain_length=ot[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=le-1,e.match_available=0,e.ins_h=0}function oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(Fe*2),this.dyn_dtree=new h.Buf16((2*ge+1)*2),this.bl_tree=new h.Buf16((2*ve+1)*2),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(Ae+1),this.heap=new h.Buf16(2*_e+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*_e+1),q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(e){var k;return!e||!e.state?be(e,a):(e.total_in=e.total_out=0,e.data_type=X,k=e.state,k.pending=0,k.pending_out=0,k.wrap<0&&(k.wrap=-k.wrap),k.status=k.wrap?J:I,e.adler=k.wrap===2?0:1,k.last_flush=_,Y._tr_init(k),n)}function ye(e){var k=fe(e);return k===n&&E(e.state),k}function Ce(e,k){return!e||!e.state||e.state.wrap!==2?a:(e.state.gzhead=k,n)}function R(e,k,m,t,d,o){if(!e)return a;var M=1;if(k===x&&(k=6),t<0?(M=0,t=-t):t>15&&(M=2,t-=16),d<1||d>T||m!==F||t<8||t>15||k<0||k>9||o<0||o>g)return be(e,a);t===8&&(t=9);var U=new oe;return e.state=U,U.strm=e,U.wrap=M,U.gzhead=null,U.w_bits=t,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=d+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+le-1)/le),U.window=new h.Buf8(U.w_size*2),U.head=new h.Buf16(U.hash_size),U.prev=new h.Buf16(U.w_size),U.lit_bufsize=1<<d+6,U.pending_buf_size=U.lit_bufsize*4,U.pending_buf=new h.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=k,U.strategy=o,U.method=m,ye(e)}function Z(e,k){return R(e,k,F,B,D,S)}function w(e,k){var m,t,d,o;if(!e||!e.state||k>r||k<0)return e?be(e,a):a;if(t=e.state,!e.output||!e.input&&e.avail_in!==0||t.status===se&&k!==f)return be(e,e.avail_out===0?c:a);if(t.strm=e,m=t.last_flush,t.last_flush=k,t.status===J)if(t.wrap===2)e.adler=0,he(t,31),he(t,139),he(t,8),t.gzhead?(he(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),he(t,t.gzhead.time&255),he(t,t.gzhead.time>>8&255),he(t,t.gzhead.time>>16&255),he(t,t.gzhead.time>>24&255),he(t,t.level===9?2:t.strategy>=b||t.level<2?4:0),he(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(he(t,t.gzhead.extra.length&255),he(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=(0,K.default)(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=$):(he(t,0),he(t,0),he(t,0),he(t,0),he(t,0),he(t,t.level===9?2:t.strategy>=b||t.level<2?4:0),he(t,ne),t.status=I);else{var M=F+(t.w_bits-8<<4)<<8,U=-1;t.strategy>=b||t.level<2?U=0:t.level<6?U=1:t.level===6?U=2:U=3,M|=U<<6,t.strstart!==0&&(M|=De),M+=31-M%31,t.status=I,H(t,M),t.strstart!==0&&(H(t,e.adler>>>16),H(t,e.adler&65535)),e.adler=1}if(t.status===$)if(t.gzhead.extra){for(d=t.pending;t.gzindex<(t.gzhead.extra.length&65535)&&!(t.pending===t.pending_buf_size&&(t.gzhead.hcrc&&t.pending>d&&(e.adler=(0,K.default)(e.adler,t.pending_buf,t.pending-d,d)),ie(e),d=t.pending,t.pending===t.pending_buf_size));)he(t,t.gzhead.extra[t.gzindex]&255),t.gzindex++;t.gzhead.hcrc&&t.pending>d&&(e.adler=(0,K.default)(e.adler,t.pending_buf,t.pending-d,d)),t.gzindex===t.gzhead.extra.length&&(t.gzindex=0,t.status=re)}else t.status=re;if(t.status===re)if(t.gzhead.name){d=t.pending;do{if(t.pending===t.pending_buf_size&&(t.gzhead.hcrc&&t.pending>d&&(e.adler=(0,K.default)(e.adler,t.pending_buf,t.pending-d,d)),ie(e),d=t.pending,t.pending===t.pending_buf_size)){o=1;break}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,he(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>d&&(e.adler=(0,K.default)(e.adler,t.pending_buf,t.pending-d,d)),o===0&&(t.gzindex=0,t.status=G)}else t.status=G;if(t.status===G)if(t.gzhead.comment){d=t.pending;do{if(t.pending===t.pending_buf_size&&(t.gzhead.hcrc&&t.pending>d&&(e.adler=(0,K.default)(e.adler,t.pending_buf,t.pending-d,d)),ie(e),d=t.pending,t.pending===t.pending_buf_size)){o=1;break}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,he(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>d&&(e.adler=(0,K.default)(e.adler,t.pending_buf,t.pending-d,d)),o===0&&(t.status=O)}else t.status=O;if(t.status===O&&(t.gzhead.hcrc?(t.pending+2>t.pending_buf_size&&ie(e),t.pending+2<=t.pending_buf_size&&(he(t,e.adler&255),he(t,e.adler>>8&255),e.adler=0,t.status=I)):t.status=I),t.pending!==0){if(ie(e),e.avail_out===0)return t.last_flush=-1,n}else if(e.avail_in===0&&V(k)<=V(m)&&k!==f)return be(e,c);if(t.status===se&&e.avail_in!==0)return be(e,c);if(e.avail_in!==0||t.lookahead!==0||k!==_&&t.status!==se){var z=t.strategy===b?lt(t,k):t.strategy===y?at(t,k):ot[t.level].func(t,k);if((z===W||z===ee)&&(t.status=se),z===ue||z===W)return e.avail_out===0&&(t.last_flush=-1),n;if(z===j&&(k===s?Y._tr_align(t):k!==r&&(Y._tr_stored_block(t,0,0,!1),k===p&&(q(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ie(e),e.avail_out===0))return t.last_flush=-1,n}return k!==f?n:t.wrap<=0?l:(t.wrap===2?(he(t,e.adler&255),he(t,e.adler>>8&255),he(t,e.adler>>16&255),he(t,e.adler>>24&255),he(t,e.total_in&255),he(t,e.total_in>>8&255),he(t,e.total_in>>16&255),he(t,e.total_in>>24&255)):(H(t,e.adler>>>16),H(t,e.adler&65535)),ie(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?n:l)}function de(e){var k;return!e||!e.state?a:(k=e.state.status,k!==J&&k!==$&&k!==re&&k!==G&&k!==O&&k!==I&&k!==se?be(e,a):(e.state=null,k===I?be(e,i):n))}function Ee(e,k){var m=k.length,t,d,o,M,U,z,ae,Me;if(!e||!e.state||(t=e.state,M=t.wrap,M===2||M===1&&t.status!==J||t.lookahead))return a;for(M===1&&(e.adler=(0,A.default)(e.adler,k,m,0)),t.wrap=0,m>=t.w_size&&(M===0&&(q(t.head),t.strstart=0,t.block_start=0,t.insert=0),Me=new h.Buf8(t.w_size),h.arraySet(Me,k,m-t.w_size,t.w_size,0),k=Me,m=t.w_size),U=e.avail_in,z=e.next_in,ae=e.input,e.avail_in=m,e.next_in=0,e.input=k,ze(t);t.lookahead>=le;){d=t.strstart,o=t.lookahead-(le-1);do t.ins_h=(t.ins_h<<t.hash_shift^t.window[d+le-1])&t.hash_mask,t.prev[d&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=d,d++;while(--o);t.strstart=d,t.lookahead=le-1,ze(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=le-1,t.match_available=0,e.next_in=z,e.input=ae,e.avail_in=U,t.wrap=M,n}return Le.deflateInfo="pako deflate (from Nodeca project)",Le}var Hr;function Mn(){return Hr||(Hr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=Ln(),Y=A(Qr());function A(s){return s&&s.__esModule?s:{default:s}}function K(s){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},K(s)}function Q(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}function L(s,p){for(var f=0;f<p.length;f++){var r=p[f];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,u(r.key),r)}}function C(s,p,f){return p&&L(s.prototype,p),Object.defineProperty(s,"prototype",{writable:!1}),s}function u(s){var p=_(s,"string");return K(p)=="symbol"?p:p+""}function _(s,p){if(K(s)!="object"||!s)return s;var f=s[Symbol.toPrimitive];if(f!==void 0){var r=f.call(s,p);if(K(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}P.default=function(){function s(){Q(this,s),this.strm=new Y.default,this.chunkSize=1024*10*10,this.outputBuffer=new Uint8Array(this.chunkSize),(0,h.deflateInit)(this.strm,h.Z_DEFAULT_COMPRESSION)}return C(s,[{key:"deflate",value:function(f){this.strm.input=f,this.strm.avail_in=this.strm.input.length,this.strm.next_in=0,this.strm.output=this.outputBuffer,this.strm.avail_out=this.chunkSize,this.strm.next_out=0;var r=(0,h.deflate)(this.strm,h.Z_FULL_FLUSH),n=new Uint8Array(this.strm.output.buffer,0,this.strm.next_out);if(r<0)throw new Error("zlib deflate failed");if(this.strm.avail_in>0){var l=[n],a=n.length;do{if(this.strm.output=new Uint8Array(this.chunkSize),this.strm.next_out=0,this.strm.avail_out=this.chunkSize,r=(0,h.deflate)(this.strm,h.Z_FULL_FLUSH),r<0)throw new Error("zlib deflate failed");var i=new Uint8Array(this.strm.output.buffer,0,this.strm.next_out);a+=i.length,l.push(i)}while(this.strm.avail_in>0);for(var c=new Uint8Array(a),x=0,v=0;v<l.length;v++)c.set(l[v],x),x+=l[v].length;n=c}return this.strm.input=null,this.strm.avail_in=0,this.strm.next_in=0,n}}])}()}(zt)),zt}var qt={},bt={},Wt={},zr;function Rt(){return zr||(zr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0,P.default={XK_VoidSymbol:16777215,XK_BackSpace:65288,XK_Tab:65289,XK_Linefeed:65290,XK_Clear:65291,XK_Return:65293,XK_Pause:65299,XK_Scroll_Lock:65300,XK_Sys_Req:65301,XK_Escape:65307,XK_Delete:65535,XK_Multi_key:65312,XK_Codeinput:65335,XK_SingleCandidate:65340,XK_MultipleCandidate:65341,XK_PreviousCandidate:65342,XK_Kanji:65313,XK_Muhenkan:65314,XK_Henkan_Mode:65315,XK_Henkan:65315,XK_Romaji:65316,XK_Hiragana:65317,XK_Katakana:65318,XK_Hiragana_Katakana:65319,XK_Zenkaku:65320,XK_Hankaku:65321,XK_Zenkaku_Hankaku:65322,XK_Touroku:65323,XK_Massyo:65324,XK_Kana_Lock:65325,XK_Kana_Shift:65326,XK_Eisu_Shift:65327,XK_Eisu_toggle:65328,XK_Kanji_Bangou:65335,XK_Zen_Koho:65341,XK_Mae_Koho:65342,XK_Home:65360,XK_Left:65361,XK_Up:65362,XK_Right:65363,XK_Down:65364,XK_Prior:65365,XK_Page_Up:65365,XK_Next:65366,XK_Page_Down:65366,XK_End:65367,XK_Begin:65368,XK_Select:65376,XK_Print:65377,XK_Execute:65378,XK_Insert:65379,XK_Undo:65381,XK_Redo:65382,XK_Menu:65383,XK_Find:65384,XK_Cancel:65385,XK_Help:65386,XK_Break:65387,XK_Mode_switch:65406,XK_script_switch:65406,XK_Num_Lock:65407,XK_KP_Space:65408,XK_KP_Tab:65417,XK_KP_Enter:65421,XK_KP_F1:65425,XK_KP_F2:65426,XK_KP_F3:65427,XK_KP_F4:65428,XK_KP_Home:65429,XK_KP_Left:65430,XK_KP_Up:65431,XK_KP_Right:65432,XK_KP_Down:65433,XK_KP_Prior:65434,XK_KP_Page_Up:65434,XK_KP_Next:65435,XK_KP_Page_Down:65435,XK_KP_End:65436,XK_KP_Begin:65437,XK_KP_Insert:65438,XK_KP_Delete:65439,XK_KP_Equal:65469,XK_KP_Multiply:65450,XK_KP_Add:65451,XK_KP_Separator:65452,XK_KP_Subtract:65453,XK_KP_Decimal:65454,XK_KP_Divide:65455,XK_KP_0:65456,XK_KP_1:65457,XK_KP_2:65458,XK_KP_3:65459,XK_KP_4:65460,XK_KP_5:65461,XK_KP_6:65462,XK_KP_7:65463,XK_KP_8:65464,XK_KP_9:65465,XK_F1:65470,XK_F2:65471,XK_F3:65472,XK_F4:65473,XK_F5:65474,XK_F6:65475,XK_F7:65476,XK_F8:65477,XK_F9:65478,XK_F10:65479,XK_F11:65480,XK_L1:65480,XK_F12:65481,XK_L2:65481,XK_F13:65482,XK_L3:65482,XK_F14:65483,XK_L4:65483,XK_F15:65484,XK_L5:65484,XK_F16:65485,XK_L6:65485,XK_F17:65486,XK_L7:65486,XK_F18:65487,XK_L8:65487,XK_F19:65488,XK_L9:65488,XK_F20:65489,XK_L10:65489,XK_F21:65490,XK_R1:65490,XK_F22:65491,XK_R2:65491,XK_F23:65492,XK_R3:65492,XK_F24:65493,XK_R4:65493,XK_F25:65494,XK_R5:65494,XK_F26:65495,XK_R6:65495,XK_F27:65496,XK_R7:65496,XK_F28:65497,XK_R8:65497,XK_F29:65498,XK_R9:65498,XK_F30:65499,XK_R10:65499,XK_F31:65500,XK_R11:65500,XK_F32:65501,XK_R12:65501,XK_F33:65502,XK_R13:65502,XK_F34:65503,XK_R14:65503,XK_F35:65504,XK_R15:65504,XK_Shift_L:65505,XK_Shift_R:65506,XK_Control_L:65507,XK_Control_R:65508,XK_Caps_Lock:65509,XK_Shift_Lock:65510,XK_Meta_L:65511,XK_Meta_R:65512,XK_Alt_L:65513,XK_Alt_R:65514,XK_Super_L:65515,XK_Super_R:65516,XK_Hyper_L:65517,XK_Hyper_R:65518,XK_ISO_Level3_Shift:65027,XK_ISO_Next_Group:65032,XK_ISO_Prev_Group:65034,XK_ISO_First_Group:65036,XK_ISO_Last_Group:65038,XK_space:32,XK_exclam:33,XK_quotedbl:34,XK_numbersign:35,XK_dollar:36,XK_percent:37,XK_ampersand:38,XK_apostrophe:39,XK_quoteright:39,XK_parenleft:40,XK_parenright:41,XK_asterisk:42,XK_plus:43,XK_comma:44,XK_minus:45,XK_period:46,XK_slash:47,XK_0:48,XK_1:49,XK_2:50,XK_3:51,XK_4:52,XK_5:53,XK_6:54,XK_7:55,XK_8:56,XK_9:57,XK_colon:58,XK_semicolon:59,XK_less:60,XK_equal:61,XK_greater:62,XK_question:63,XK_at:64,XK_A:65,XK_B:66,XK_C:67,XK_D:68,XK_E:69,XK_F:70,XK_G:71,XK_H:72,XK_I:73,XK_J:74,XK_K:75,XK_L:76,XK_M:77,XK_N:78,XK_O:79,XK_P:80,XK_Q:81,XK_R:82,XK_S:83,XK_T:84,XK_U:85,XK_V:86,XK_W:87,XK_X:88,XK_Y:89,XK_Z:90,XK_bracketleft:91,XK_backslash:92,XK_bracketright:93,XK_asciicircum:94,XK_underscore:95,XK_grave:96,XK_quoteleft:96,XK_a:97,XK_b:98,XK_c:99,XK_d:100,XK_e:101,XK_f:102,XK_g:103,XK_h:104,XK_i:105,XK_j:106,XK_k:107,XK_l:108,XK_m:109,XK_n:110,XK_o:111,XK_p:112,XK_q:113,XK_r:114,XK_s:115,XK_t:116,XK_u:117,XK_v:118,XK_w:119,XK_x:120,XK_y:121,XK_z:122,XK_braceleft:123,XK_bar:124,XK_braceright:125,XK_asciitilde:126,XK_nobreakspace:160,XK_exclamdown:161,XK_cent:162,XK_sterling:163,XK_currency:164,XK_yen:165,XK_brokenbar:166,XK_section:167,XK_diaeresis:168,XK_copyright:169,XK_ordfeminine:170,XK_guillemotleft:171,XK_notsign:172,XK_hyphen:173,XK_registered:174,XK_macron:175,XK_degree:176,XK_plusminus:177,XK_twosuperior:178,XK_threesuperior:179,XK_acute:180,XK_mu:181,XK_paragraph:182,XK_periodcentered:183,XK_cedilla:184,XK_onesuperior:185,XK_masculine:186,XK_guillemotright:187,XK_onequarter:188,XK_onehalf:189,XK_threequarters:190,XK_questiondown:191,XK_Agrave:192,XK_Aacute:193,XK_Acircumflex:194,XK_Atilde:195,XK_Adiaeresis:196,XK_Aring:197,XK_AE:198,XK_Ccedilla:199,XK_Egrave:200,XK_Eacute:201,XK_Ecircumflex:202,XK_Ediaeresis:203,XK_Igrave:204,XK_Iacute:205,XK_Icircumflex:206,XK_Idiaeresis:207,XK_ETH:208,XK_Eth:208,XK_Ntilde:209,XK_Ograve:210,XK_Oacute:211,XK_Ocircumflex:212,XK_Otilde:213,XK_Odiaeresis:214,XK_multiply:215,XK_Oslash:216,XK_Ooblique:216,XK_Ugrave:217,XK_Uacute:218,XK_Ucircumflex:219,XK_Udiaeresis:220,XK_Yacute:221,XK_THORN:222,XK_Thorn:222,XK_ssharp:223,XK_agrave:224,XK_aacute:225,XK_acircumflex:226,XK_atilde:227,XK_adiaeresis:228,XK_aring:229,XK_ae:230,XK_ccedilla:231,XK_egrave:232,XK_eacute:233,XK_ecircumflex:234,XK_ediaeresis:235,XK_igrave:236,XK_iacute:237,XK_icircumflex:238,XK_idiaeresis:239,XK_eth:240,XK_ntilde:241,XK_ograve:242,XK_oacute:243,XK_ocircumflex:244,XK_otilde:245,XK_odiaeresis:246,XK_division:247,XK_oslash:248,XK_ooblique:248,XK_ugrave:249,XK_uacute:250,XK_ucircumflex:251,XK_udiaeresis:252,XK_yacute:253,XK_thorn:254,XK_ydiaeresis:255,XK_Hangul:65329,XK_Hangul_Hanja:65332,XK_Hangul_Jeonja:65336,XF86XK_ModeLock:269025025,XF86XK_MonBrightnessUp:269025026,XF86XK_MonBrightnessDown:269025027,XF86XK_KbdLightOnOff:269025028,XF86XK_KbdBrightnessUp:269025029,XF86XK_KbdBrightnessDown:269025030,XF86XK_Standby:269025040,XF86XK_AudioLowerVolume:269025041,XF86XK_AudioMute:269025042,XF86XK_AudioRaiseVolume:269025043,XF86XK_AudioPlay:269025044,XF86XK_AudioStop:269025045,XF86XK_AudioPrev:269025046,XF86XK_AudioNext:269025047,XF86XK_HomePage:269025048,XF86XK_Mail:269025049,XF86XK_Start:269025050,XF86XK_Search:269025051,XF86XK_AudioRecord:269025052,XF86XK_Calculator:269025053,XF86XK_Memo:269025054,XF86XK_ToDoList:269025055,XF86XK_Calendar:269025056,XF86XK_PowerDown:269025057,XF86XK_ContrastAdjust:269025058,XF86XK_RockerUp:269025059,XF86XK_RockerDown:269025060,XF86XK_RockerEnter:269025061,XF86XK_Back:269025062,XF86XK_Forward:269025063,XF86XK_Stop:269025064,XF86XK_Refresh:269025065,XF86XK_PowerOff:269025066,XF86XK_WakeUp:269025067,XF86XK_Eject:269025068,XF86XK_ScreenSaver:269025069,XF86XK_WWW:269025070,XF86XK_Sleep:269025071,XF86XK_Favorites:269025072,XF86XK_AudioPause:269025073,XF86XK_AudioMedia:269025074,XF86XK_MyComputer:269025075,XF86XK_VendorHome:269025076,XF86XK_LightBulb:269025077,XF86XK_Shop:269025078,XF86XK_History:269025079,XF86XK_OpenURL:269025080,XF86XK_AddFavorite:269025081,XF86XK_HotLinks:269025082,XF86XK_BrightnessAdjust:269025083,XF86XK_Finance:269025084,XF86XK_Community:269025085,XF86XK_AudioRewind:269025086,XF86XK_BackForward:269025087,XF86XK_Launch0:269025088,XF86XK_Launch1:269025089,XF86XK_Launch2:269025090,XF86XK_Launch3:269025091,XF86XK_Launch4:269025092,XF86XK_Launch5:269025093,XF86XK_Launch6:269025094,XF86XK_Launch7:269025095,XF86XK_Launch8:269025096,XF86XK_Launch9:269025097,XF86XK_LaunchA:269025098,XF86XK_LaunchB:269025099,XF86XK_LaunchC:269025100,XF86XK_LaunchD:269025101,XF86XK_LaunchE:269025102,XF86XK_LaunchF:269025103,XF86XK_ApplicationLeft:269025104,XF86XK_ApplicationRight:269025105,XF86XK_Book:269025106,XF86XK_CD:269025107,XF86XK_Calculater:269025108,XF86XK_Clear:269025109,XF86XK_Close:269025110,XF86XK_Copy:269025111,XF86XK_Cut:269025112,XF86XK_Display:269025113,XF86XK_DOS:269025114,XF86XK_Documents:269025115,XF86XK_Excel:269025116,XF86XK_Explorer:269025117,XF86XK_Game:269025118,XF86XK_Go:269025119,XF86XK_iTouch:269025120,XF86XK_LogOff:269025121,XF86XK_Market:269025122,XF86XK_Meeting:269025123,XF86XK_MenuKB:269025125,XF86XK_MenuPB:269025126,XF86XK_MySites:269025127,XF86XK_New:269025128,XF86XK_News:269025129,XF86XK_OfficeHome:269025130,XF86XK_Open:269025131,XF86XK_Option:269025132,XF86XK_Paste:269025133,XF86XK_Phone:269025134,XF86XK_Q:269025136,XF86XK_Reply:269025138,XF86XK_Reload:269025139,XF86XK_RotateWindows:269025140,XF86XK_RotationPB:269025141,XF86XK_RotationKB:269025142,XF86XK_Save:269025143,XF86XK_ScrollUp:269025144,XF86XK_ScrollDown:269025145,XF86XK_ScrollClick:269025146,XF86XK_Send:269025147,XF86XK_Spell:269025148,XF86XK_SplitScreen:269025149,XF86XK_Support:269025150,XF86XK_TaskPane:269025151,XF86XK_Terminal:269025152,XF86XK_Tools:269025153,XF86XK_Travel:269025154,XF86XK_UserPB:269025156,XF86XK_User1KB:269025157,XF86XK_User2KB:269025158,XF86XK_Video:269025159,XF86XK_WheelButton:269025160,XF86XK_Word:269025161,XF86XK_Xfer:269025162,XF86XK_ZoomIn:269025163,XF86XK_ZoomOut:269025164,XF86XK_Away:269025165,XF86XK_Messenger:269025166,XF86XK_WebCam:269025167,XF86XK_MailForward:269025168,XF86XK_Pictures:269025169,XF86XK_Music:269025170,XF86XK_Battery:269025171,XF86XK_Bluetooth:269025172,XF86XK_WLAN:269025173,XF86XK_UWB:269025174,XF86XK_AudioForward:269025175,XF86XK_AudioRepeat:269025176,XF86XK_AudioRandomPlay:269025177,XF86XK_Subtitle:269025178,XF86XK_AudioCycleTrack:269025179,XF86XK_CycleAngle:269025180,XF86XK_FrameBack:269025181,XF86XK_FrameForward:269025182,XF86XK_Time:269025183,XF86XK_Select:269025184,XF86XK_View:269025185,XF86XK_TopMenu:269025186,XF86XK_Red:269025187,XF86XK_Green:269025188,XF86XK_Yellow:269025189,XF86XK_Blue:269025190,XF86XK_Suspend:269025191,XF86XK_Hibernate:269025192,XF86XK_TouchpadToggle:269025193,XF86XK_TouchpadOn:269025200,XF86XK_TouchpadOff:269025201,XF86XK_AudioMicMute:269025202,XF86XK_Switch_VT_1:269024769,XF86XK_Switch_VT_2:269024770,XF86XK_Switch_VT_3:269024771,XF86XK_Switch_VT_4:269024772,XF86XK_Switch_VT_5:269024773,XF86XK_Switch_VT_6:269024774,XF86XK_Switch_VT_7:269024775,XF86XK_Switch_VT_8:269024776,XF86XK_Switch_VT_9:269024777,XF86XK_Switch_VT_10:269024778,XF86XK_Switch_VT_11:269024779,XF86XK_Switch_VT_12:269024780,XF86XK_Ungrab:269024800,XF86XK_ClearGrab:269024801,XF86XK_Next_VMode:269024802,XF86XK_Prev_VMode:269024803,XF86XK_LogWindowTree:269024804,XF86XK_LogGrabInfo:269024805}}(Wt)),Wt}var Vt={},Gr;function Dn(){return Gr||(Gr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h={256:960,257:992,258:451,259:483,260:417,261:433,262:454,263:486,264:710,265:742,266:709,267:741,268:456,269:488,270:463,271:495,272:464,273:496,274:938,275:954,278:972,279:1004,280:458,281:490,282:460,283:492,284:728,285:760,286:683,287:699,288:725,289:757,290:939,291:955,292:678,293:694,294:673,295:689,296:933,297:949,298:975,299:1007,302:967,303:999,304:681,305:697,308:684,309:700,310:979,311:1011,312:930,313:453,314:485,315:934,316:950,317:421,318:437,321:419,322:435,323:465,324:497,325:977,326:1009,327:466,328:498,330:957,331:959,332:978,333:1010,336:469,337:501,338:5052,339:5053,340:448,341:480,342:931,343:947,344:472,345:504,346:422,347:438,348:734,349:766,350:426,351:442,352:425,353:441,354:478,355:510,356:427,357:443,358:940,359:956,360:989,361:1021,362:990,363:1022,364:733,365:765,366:473,367:505,368:475,369:507,370:985,371:1017,376:5054,377:428,378:444,379:431,380:447,381:430,382:446,402:2294,466:16777681,711:439,728:418,729:511,731:434,733:445,901:1966,902:1953,904:1954,905:1955,906:1956,908:1959,910:1960,911:1963,912:1974,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,926:1998,927:1999,928:2e3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,938:1957,939:1961,940:1969,941:1970,942:1971,943:1972,944:1978,945:2017,946:2018,947:2019,948:2020,949:2021,950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,961:2033,962:2035,963:2034,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,970:1973,971:1977,972:1975,973:1976,974:1979,1025:1715,1026:1713,1027:1714,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1040:1761,1041:1762,1042:1783,1043:1767,1044:1764,1045:1765,1046:1782,1047:1786,1048:1769,1049:1770,1050:1771,1051:1772,1052:1773,1053:1774,1054:1775,1055:1776,1056:1778,1057:1779,1058:1780,1059:1781,1060:1766,1061:1768,1062:1763,1063:1790,1064:1787,1065:1789,1066:1791,1067:1785,1068:1784,1069:1788,1070:1760,1071:1777,1072:1729,1073:1730,1074:1751,1075:1735,1076:1732,1077:1733,1078:1750,1079:1754,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1088:1746,1089:1747,1090:1748,1091:1749,1092:1734,1093:1736,1094:1731,1095:1758,1096:1755,1097:1757,1098:1759,1099:1753,1100:1752,1101:1756,1102:1728,1103:1745,1105:1699,1106:1697,1107:1698,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,1168:1725,1169:1709,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,1603:1507,1604:1508,1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,1616:1520,1617:1521,1618:1522,3585:3489,3586:3490,3587:3491,3588:3492,3589:3493,3590:3494,3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,3639:3543,3640:3544,3641:3545,3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,8194:2722,8195:2721,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,8202:2728,8210:2747,8211:2730,8212:2729,8213:1967,8215:3295,8216:2768,8217:2769,8218:2813,8220:2770,8221:2771,8222:2814,8224:2801,8225:2802,8226:2790,8229:2735,8230:2734,8240:2773,8242:2774,8243:2775,8248:2812,8254:1150,8361:3839,8364:8364,8453:2744,8470:1712,8471:2811,8478:2772,8482:2761,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,8538:2743,8539:2755,8540:2756,8541:2757,8542:2758,8592:2299,8593:2300,8594:2301,8595:2302,8658:2254,8660:2253,8706:2287,8711:2245,8728:3018,8730:2262,8733:2241,8734:2242,8743:2270,8744:2271,8745:2268,8746:2269,8747:2239,8756:2240,8764:2248,8771:2249,8773:16785992,8800:2237,8801:2255,8804:2236,8805:2238,8834:2266,8835:2267,8866:3068,8867:3036,8868:3010,8869:3022,8968:3027,8970:3012,8981:2810,8992:2212,8993:2213,9109:3020,9115:2219,9117:2220,9118:2221,9120:2222,9121:2215,9123:2216,9124:2217,9126:2218,9128:2223,9132:2224,9143:2209,9146:2543,9147:2544,9148:2546,9149:2547,9225:2530,9226:2533,9227:2537,9228:2531,9229:2532,9251:2732,9252:2536,9472:2211,9474:2214,9484:2210,9488:2539,9492:2541,9496:2538,9500:2548,9508:2549,9516:2551,9524:2550,9532:2542,9618:2529,9642:2791,9643:2785,9644:2779,9645:2786,9646:2783,9647:2767,9650:2792,9651:2787,9654:2781,9655:2765,9660:2793,9661:2788,9664:2780,9665:2764,9670:2528,9675:2766,9679:2782,9702:2784,9734:2789,9742:2809,9747:2762,9756:2794,9758:2795,9792:2808,9794:2807,9827:2796,9829:2798,9830:2797,9837:2806,9839:2805,10003:2803,10007:2804,10013:2777,10016:2800,10216:2748,10217:2750,12289:1188,12290:1185,12300:1186,12301:1187,12443:1246,12444:1247,12449:1191,12450:1201,12451:1192,12452:1202,12453:1193,12454:1203,12455:1194,12456:1204,12457:1195,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12483:1199,12484:1218,12486:1219,12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,12510:1231,12511:1232,12512:1233,12513:1234,12514:1235,12515:1196,12516:1236,12517:1197,12518:1237,12519:1198,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,12525:1243,12527:1244,12530:1190,12531:1245,12539:1189,12540:1200};P.default={lookup:function(A){if(A>=32&&A<=255)return A;var K=h[A];return K!==void 0?K:16777216|A}}}(Vt)),Vt}var Zt={},qr;function On(){return qr||(qr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0,P.default={8:"Backspace",9:"Tab",10:"NumpadClear",13:"Enter",16:"ShiftLeft",17:"ControlLeft",18:"AltLeft",19:"Pause",20:"CapsLock",21:"Lang1",25:"Lang2",27:"Escape",28:"Convert",29:"NonConvert",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",44:"PrintScreen",45:"Insert",46:"Delete",47:"Help",48:"Digit0",49:"Digit1",50:"Digit2",51:"Digit3",52:"Digit4",53:"Digit5",54:"Digit6",55:"Digit7",56:"Digit8",57:"Digit9",91:"MetaLeft",92:"MetaRight",93:"ContextMenu",95:"Sleep",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",108:"NumpadDecimal",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"NumLock",145:"ScrollLock",166:"BrowserBack",167:"BrowserForward",168:"BrowserRefresh",169:"BrowserStop",170:"BrowserSearch",171:"BrowserFavorites",172:"BrowserHome",173:"AudioVolumeMute",174:"AudioVolumeDown",175:"AudioVolumeUp",176:"MediaTrackNext",177:"MediaTrackPrevious",178:"MediaStop",179:"MediaPlayPause",180:"LaunchMail",181:"MediaSelect",182:"LaunchApp1",183:"LaunchApp2",225:"AltRight"}}(Zt)),Zt}var Yt={},Wr;function Bn(){return Wr||(Wr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0,P.default={Backspace:"Backspace",AltLeft:"Alt",AltRight:"Alt",CapsLock:"CapsLock",ContextMenu:"ContextMenu",ControlLeft:"Control",ControlRight:"Control",Enter:"Enter",MetaLeft:"Meta",MetaRight:"Meta",ShiftLeft:"Shift",ShiftRight:"Shift",Tab:"Tab",Delete:"Delete",End:"End",Help:"Help",Home:"Home",Insert:"Insert",PageDown:"PageDown",PageUp:"PageUp",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",NumLock:"NumLock",NumpadBackspace:"Backspace",NumpadClear:"Clear",Escape:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",F13:"F13",F14:"F14",F15:"F15",F16:"F16",F17:"F17",F18:"F18",F19:"F19",F20:"F20",F21:"F21",F22:"F22",F23:"F23",F24:"F24",F25:"F25",F26:"F26",F27:"F27",F28:"F28",F29:"F29",F30:"F30",F31:"F31",F32:"F32",F33:"F33",F34:"F34",F35:"F35",PrintScreen:"PrintScreen",ScrollLock:"ScrollLock",Pause:"Pause",BrowserBack:"BrowserBack",BrowserFavorites:"BrowserFavorites",BrowserForward:"BrowserForward",BrowserHome:"BrowserHome",BrowserRefresh:"BrowserRefresh",BrowserSearch:"BrowserSearch",BrowserStop:"BrowserStop",Eject:"Eject",LaunchApp1:"LaunchMyComputer",LaunchApp2:"LaunchCalendar",LaunchMail:"LaunchMail",MediaPlayPause:"MediaPlay",MediaStop:"MediaStop",MediaTrackNext:"MediaTrackNext",MediaTrackPrevious:"MediaTrackPrevious",Power:"Power",Sleep:"Sleep",AudioVolumeDown:"AudioVolumeDown",AudioVolumeMute:"AudioVolumeMute",AudioVolumeUp:"AudioVolumeUp",WakeUp:"WakeUp"}}(Yt)),Yt}var $t={},Vr;function Qn(){return Vr||(Vr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=Y(Rt());function Y(C){return C&&C.__esModule?C:{default:C}}var A={};function K(C,u){if(u===void 0)throw new Error('Undefined keysym for key "'+C+'"');if(C in A)throw new Error('Duplicate entry for key "'+C+'"');A[C]=[u,u,u,u]}function Q(C,u,_){if(u===void 0)throw new Error('Undefined keysym for key "'+C+'"');if(_===void 0)throw new Error('Undefined keysym for key "'+C+'"');if(C in A)throw new Error('Duplicate entry for key "'+C+'"');A[C]=[u,u,_,u]}function L(C,u,_){if(u===void 0)throw new Error('Undefined keysym for key "'+C+'"');if(_===void 0)throw new Error('Undefined keysym for key "'+C+'"');if(C in A)throw new Error('Duplicate entry for key "'+C+'"');A[C]=[u,u,u,_]}Q("Alt",h.default.XK_Alt_L,h.default.XK_Alt_R),K("AltGraph",h.default.XK_ISO_Level3_Shift),K("CapsLock",h.default.XK_Caps_Lock),Q("Control",h.default.XK_Control_L,h.default.XK_Control_R),Q("Meta",h.default.XK_Super_L,h.default.XK_Super_R),K("NumLock",h.default.XK_Num_Lock),K("ScrollLock",h.default.XK_Scroll_Lock),Q("Shift",h.default.XK_Shift_L,h.default.XK_Shift_R),L("Enter",h.default.XK_Return,h.default.XK_KP_Enter),K("Tab",h.default.XK_Tab),L(" ",h.default.XK_space,h.default.XK_KP_Space),L("ArrowDown",h.default.XK_Down,h.default.XK_KP_Down),L("ArrowLeft",h.default.XK_Left,h.default.XK_KP_Left),L("ArrowRight",h.default.XK_Right,h.default.XK_KP_Right),L("ArrowUp",h.default.XK_Up,h.default.XK_KP_Up),L("End",h.default.XK_End,h.default.XK_KP_End),L("Home",h.default.XK_Home,h.default.XK_KP_Home),L("PageDown",h.default.XK_Next,h.default.XK_KP_Next),L("PageUp",h.default.XK_Prior,h.default.XK_KP_Prior),K("Backspace",h.default.XK_BackSpace),L("Clear",h.default.XK_Clear,h.default.XK_KP_Begin),K("Copy",h.default.XF86XK_Copy),K("Cut",h.default.XF86XK_Cut),L("Delete",h.default.XK_Delete,h.default.XK_KP_Delete),L("Insert",h.default.XK_Insert,h.default.XK_KP_Insert),K("Paste",h.default.XF86XK_Paste),K("Redo",h.default.XK_Redo),K("Undo",h.default.XK_Undo),K("Cancel",h.default.XK_Cancel),K("ContextMenu",h.default.XK_Menu),K("Escape",h.default.XK_Escape),K("Execute",h.default.XK_Execute),K("Find",h.default.XK_Find),K("Help",h.default.XK_Help),K("Pause",h.default.XK_Pause),K("Select",h.default.XK_Select),K("ZoomIn",h.default.XF86XK_ZoomIn),K("ZoomOut",h.default.XF86XK_ZoomOut),K("BrightnessDown",h.default.XF86XK_MonBrightnessDown),K("BrightnessUp",h.default.XF86XK_MonBrightnessUp),K("Eject",h.default.XF86XK_Eject),K("LogOff",h.default.XF86XK_LogOff),K("Power",h.default.XF86XK_PowerOff),K("PowerOff",h.default.XF86XK_PowerDown),K("PrintScreen",h.default.XK_Print),K("Hibernate",h.default.XF86XK_Hibernate),K("Standby",h.default.XF86XK_Standby),K("WakeUp",h.default.XF86XK_WakeUp),K("AllCandidates",h.default.XK_MultipleCandidate),K("Alphanumeric",h.default.XK_Eisu_toggle),K("CodeInput",h.default.XK_Codeinput),K("Compose",h.default.XK_Multi_key),K("Convert",h.default.XK_Henkan),K("GroupFirst",h.default.XK_ISO_First_Group),K("GroupLast",h.default.XK_ISO_Last_Group),K("GroupNext",h.default.XK_ISO_Next_Group),K("GroupPrevious",h.default.XK_ISO_Prev_Group),K("NonConvert",h.default.XK_Muhenkan),K("PreviousCandidate",h.default.XK_PreviousCandidate),K("SingleCandidate",h.default.XK_SingleCandidate),K("HangulMode",h.default.XK_Hangul),K("HanjaMode",h.default.XK_Hangul_Hanja),K("JunjaMode",h.default.XK_Hangul_Jeonja),K("Eisu",h.default.XK_Eisu_toggle),K("Hankaku",h.default.XK_Hankaku),K("Hiragana",h.default.XK_Hiragana),K("HiraganaKatakana",h.default.XK_Hiragana_Katakana),K("KanaMode",h.default.XK_Kana_Shift),K("KanjiMode",h.default.XK_Kanji),K("Katakana",h.default.XK_Katakana),K("Romaji",h.default.XK_Romaji),K("Zenkaku",h.default.XK_Zenkaku),K("ZenkakuHankaku",h.default.XK_Zenkaku_Hankaku),K("F1",h.default.XK_F1),K("F2",h.default.XK_F2),K("F3",h.default.XK_F3),K("F4",h.default.XK_F4),K("F5",h.default.XK_F5),K("F6",h.default.XK_F6),K("F7",h.default.XK_F7),K("F8",h.default.XK_F8),K("F9",h.default.XK_F9),K("F10",h.default.XK_F10),K("F11",h.default.XK_F11),K("F12",h.default.XK_F12),K("F13",h.default.XK_F13),K("F14",h.default.XK_F14),K("F15",h.default.XK_F15),K("F16",h.default.XK_F16),K("F17",h.default.XK_F17),K("F18",h.default.XK_F18),K("F19",h.default.XK_F19),K("F20",h.default.XK_F20),K("F21",h.default.XK_F21),K("F22",h.default.XK_F22),K("F23",h.default.XK_F23),K("F24",h.default.XK_F24),K("F25",h.default.XK_F25),K("F26",h.default.XK_F26),K("F27",h.default.XK_F27),K("F28",h.default.XK_F28),K("F29",h.default.XK_F29),K("F30",h.default.XK_F30),K("F31",h.default.XK_F31),K("F32",h.default.XK_F32),K("F33",h.default.XK_F33),K("F34",h.default.XK_F34),K("F35",h.default.XK_F35),K("Close",h.default.XF86XK_Close),K("MailForward",h.default.XF86XK_MailForward),K("MailReply",h.default.XF86XK_Reply),K("MailSend",h.default.XF86XK_Send),K("MediaFastForward",h.default.XF86XK_AudioForward),K("MediaPause",h.default.XF86XK_AudioPause),K("MediaPlay",h.default.XF86XK_AudioPlay),K("MediaRecord",h.default.XF86XK_AudioRecord),K("MediaRewind",h.default.XF86XK_AudioRewind),K("MediaStop",h.default.XF86XK_AudioStop),K("MediaTrackNext",h.default.XF86XK_AudioNext),K("MediaTrackPrevious",h.default.XF86XK_AudioPrev),K("New",h.default.XF86XK_New),K("Open",h.default.XF86XK_Open),K("Print",h.default.XK_Print),K("Save",h.default.XF86XK_Save),K("SpellCheck",h.default.XF86XK_Spell),K("AudioVolumeDown",h.default.XF86XK_AudioLowerVolume),K("AudioVolumeUp",h.default.XF86XK_AudioRaiseVolume),K("AudioVolumeMute",h.default.XF86XK_AudioMute),K("MicrophoneVolumeMute",h.default.XF86XK_AudioMicMute),K("LaunchApplication1",h.default.XF86XK_MyComputer),K("LaunchApplication2",h.default.XF86XK_Calculator),K("LaunchCalendar",h.default.XF86XK_Calendar),K("LaunchMail",h.default.XF86XK_Mail),K("LaunchMediaPlayer",h.default.XF86XK_AudioMedia),K("LaunchMusicPlayer",h.default.XF86XK_Music),K("LaunchPhone",h.default.XF86XK_Phone),K("LaunchScreenSaver",h.default.XF86XK_ScreenSaver),K("LaunchSpreadsheet",h.default.XF86XK_Excel),K("LaunchWebBrowser",h.default.XF86XK_WWW),K("LaunchWebCam",h.default.XF86XK_WebCam),K("LaunchWordProcessor",h.default.XF86XK_Word),K("BrowserBack",h.default.XF86XK_Back),K("BrowserFavorites",h.default.XF86XK_Favorites),K("BrowserForward",h.default.XF86XK_Forward),K("BrowserHome",h.default.XF86XK_HomePage),K("BrowserRefresh",h.default.XF86XK_Refresh),K("BrowserSearch",h.default.XF86XK_Search),K("BrowserStop",h.default.XF86XK_Stop),K("Dimmer",h.default.XF86XK_BrightnessAdjust),K("MediaAudioTrack",h.default.XF86XK_AudioCycleTrack),K("RandomToggle",h.default.XF86XK_AudioRandomPlay),K("SplitScreenToggle",h.default.XF86XK_SplitScreen),K("Subtitle",h.default.XF86XK_Subtitle),K("VideoModeNext",h.default.XF86XK_Next_VMode),L("=",h.default.XK_equal,h.default.XK_KP_Equal),L("+",h.default.XK_plus,h.default.XK_KP_Add),L("-",h.default.XK_minus,h.default.XK_KP_Subtract),L("*",h.default.XK_asterisk,h.default.XK_KP_Multiply),L("/",h.default.XK_slash,h.default.XK_KP_Divide),L(".",h.default.XK_period,h.default.XK_KP_Decimal),L(",",h.default.XK_comma,h.default.XK_KP_Separator),L("0",h.default.XK_0,h.default.XK_KP_0),L("1",h.default.XK_1,h.default.XK_KP_1),L("2",h.default.XK_2,h.default.XK_KP_2),L("3",h.default.XK_3,h.default.XK_KP_3),L("4",h.default.XK_4,h.default.XK_KP_4),L("5",h.default.XK_5,h.default.XK_KP_5),L("6",h.default.XK_6,h.default.XK_KP_6),L("7",h.default.XK_7,h.default.XK_KP_7),L("8",h.default.XK_8,h.default.XK_KP_8),L("9",h.default.XK_9,h.default.XK_KP_9),P.default=A}($t)),$t}var Zr;function In(){if(Zr)return bt;Zr=1;function P(r){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},P(r)}Object.defineProperty(bt,"__esModule",{value:!0}),bt.getKey=p,bt.getKeycode=s,bt.getKeysym=f;var h=_(Rt()),Y=_(Dn()),A=_(On()),K=_(Bn()),Q=_(Qn()),L=u(Ft());function C(r){if(typeof WeakMap!="function")return null;var n=new WeakMap,l=new WeakMap;return(C=function(i){return i?l:n})(r)}function u(r,n){if(r&&r.__esModule)return r;if(r===null||P(r)!="object"&&typeof r!="function")return{default:r};var l=C(n);if(l&&l.has(r))return l.get(r);var a={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in r)if(c!=="default"&&{}.hasOwnProperty.call(r,c)){var x=i?Object.getOwnPropertyDescriptor(r,c):null;x&&(x.get||x.set)?Object.defineProperty(a,c,x):a[c]=r[c]}return a.default=r,l&&l.set(r,a),a}function _(r){return r&&r.__esModule?r:{default:r}}function s(r){if(r.code){switch(r.code){case"OSLeft":return"MetaLeft";case"OSRight":return"MetaRight"}return r.code}if(r.keyCode in A.default){var n=A.default[r.keyCode];if(L.isMac()&&n==="ContextMenu"&&(n="MetaRight"),r.location===2)switch(n){case"ShiftLeft":return"ShiftRight";case"ControlLeft":return"ControlRight";case"AltLeft":return"AltRight"}if(r.location===3)switch(n){case"Delete":return"NumpadDecimal";case"Insert":return"Numpad0";case"End":return"Numpad1";case"ArrowDown":return"Numpad2";case"PageDown":return"Numpad3";case"ArrowLeft":return"Numpad4";case"ArrowRight":return"Numpad6";case"Home":return"Numpad7";case"ArrowUp":return"Numpad8";case"PageUp":return"Numpad9";case"Enter":return"NumpadEnter"}return n}return"Unidentified"}function p(r){if(r.key!==void 0&&r.key!=="Unidentified"){switch(r.key){case"OS":return"Meta";case"LaunchMyComputer":return"LaunchApplication1";case"LaunchCalculator":return"LaunchApplication2"}switch(r.key){case"UIKeyInputUpArrow":return"ArrowUp";case"UIKeyInputDownArrow":return"ArrowDown";case"UIKeyInputLeftArrow":return"ArrowLeft";case"UIKeyInputRightArrow":return"ArrowRight";case"UIKeyInputEscape":return"Escape"}return r.key==="\0"&&r.code==="NumpadDecimal"?"Delete":r.key}var n=s(r);return n in K.default?K.default[n]:r.charCode?String.fromCharCode(r.charCode):"Unidentified"}function f(r){var n=p(r);if(n==="Unidentified")return null;if(n in Q.default){var l=r.location;if(n==="Meta"&&l===0&&(l=2),n==="Clear"&&l===3){var a=s(r);a==="NumLock"&&(l=0)}if((l===void 0||l>3)&&(l=0),n==="Meta"){var i=s(r);if(i==="AltLeft")return h.default.XK_Meta_L;if(i==="AltRight")return h.default.XK_Meta_R}if(n==="Clear"){var c=s(r);if(c==="NumLock")return h.default.XK_Num_Lock}if(L.isWindows())switch(n){case"Zenkaku":case"Hankaku":return h.default.XK_Zenkaku_Hankaku;case"Romaji":case"KanaMode":return h.default.XK_Romaji}return Q.default[n][l]}if(n.length!==1)return null;var x=n.charCodeAt();return x?Y.default.lookup(x):null}return bt}var Yr;function Un(){return Yr||(Yr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=u(ht()),Y=Sr(),A=u(In()),K=L(Rt()),Q=u(Ft());function L(l){return l&&l.__esModule?l:{default:l}}function C(l){if(typeof WeakMap!="function")return null;var a=new WeakMap,i=new WeakMap;return(C=function(x){return x?i:a})(l)}function u(l,a){if(l&&l.__esModule)return l;if(l===null||_(l)!="object"&&typeof l!="function")return{default:l};var i=C(a);if(i&&i.has(l))return i.get(l);var c={__proto__:null},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in l)if(v!=="default"&&{}.hasOwnProperty.call(l,v)){var b=x?Object.getOwnPropertyDescriptor(l,v):null;b&&(b.get||b.set)?Object.defineProperty(c,v,b):c[v]=l[v]}return c.default=l,i&&i.set(l,c),c}function _(l){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_(l)}function s(l,a){if(!(l instanceof a))throw new TypeError("Cannot call a class as a function")}function p(l,a){for(var i=0;i<a.length;i++){var c=a[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(l,r(c.key),c)}}function f(l,a,i){return a&&p(l.prototype,a),Object.defineProperty(l,"prototype",{writable:!1}),l}function r(l){var a=n(l,"string");return _(a)=="symbol"?a:a+""}function n(l,a){if(_(l)!="object"||!l)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var c=i.call(l,a);if(_(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}P.default=function(){function l(a){s(this,l),this._target=a||null,this._keyDownList={},this._altGrArmed=!1,this._eventHandlers={keyup:this._handleKeyUp.bind(this),keydown:this._handleKeyDown.bind(this),blur:this._allKeysUp.bind(this)},this.onkeyevent=function(){}}return f(l,[{key:"_sendKeyEvent",value:function(i,c,x){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(x)this._keyDownList[c]=i;else{if(!(c in this._keyDownList))return;delete this._keyDownList[c]}h.Debug("onkeyevent "+(x?"down":"up")+", keysym: "+i,", code: "+c+", numlock: "+v+", capslock: "+b),this.onkeyevent(i,c,x,v,b)}},{key:"_getKeyCode",value:function(i){var c=A.getKeycode(i);if(c!=="Unidentified")return c;if(i.keyCode&&i.keyCode!==229)return"Platform"+i.keyCode;if(i.keyIdentifier){if(i.keyIdentifier.substr(0,2)!=="U+")return i.keyIdentifier;var x=parseInt(i.keyIdentifier.substr(2),16),v=String.fromCharCode(x).toUpperCase();return"Platform"+v.charCodeAt()}return"Unidentified"}},{key:"_handleKeyDown",value:function(i){var c=this._getKeyCode(i),x=A.getKeysym(i),v=i.getModifierState("NumLock"),b=i.getModifierState("CapsLock");if((Q.isMac()||Q.isIOS())&&(v=null),this._altGrArmed&&(this._altGrArmed=!1,clearTimeout(this._altGrTimeout),c==="AltRight"&&i.timeStamp-this._altGrCtrlTime<50?x=K.default.XK_ISO_Level3_Shift:this._sendKeyEvent(K.default.XK_Control_L,"ControlLeft",!0,v,b)),c==="Unidentified"){x&&(this._sendKeyEvent(x,c,!0,v,b),this._sendKeyEvent(x,c,!1,v,b)),(0,Y.stopEvent)(i);return}if(Q.isMac()||Q.isIOS())switch(x){case K.default.XK_Super_L:x=K.default.XK_Alt_L;break;case K.default.XK_Super_R:x=K.default.XK_Super_L;break;case K.default.XK_Alt_L:x=K.default.XK_Mode_switch;break;case K.default.XK_Alt_R:x=K.default.XK_ISO_Level3_Shift;break}if(c in this._keyDownList&&(x=this._keyDownList[c]),(Q.isMac()||Q.isIOS())&&i.metaKey&&c!=="MetaLeft"&&c!=="MetaRight"){this._sendKeyEvent(x,c,!0,v,b),this._sendKeyEvent(x,c,!1,v,b),(0,Y.stopEvent)(i);return}if((Q.isMac()||Q.isIOS())&&c==="CapsLock"){this._sendKeyEvent(K.default.XK_Caps_Lock,"CapsLock",!0,v,b),this._sendKeyEvent(K.default.XK_Caps_Lock,"CapsLock",!1,v,b),(0,Y.stopEvent)(i);return}var y=[K.default.XK_Zenkaku_Hankaku,K.default.XK_Eisu_toggle,K.default.XK_Katakana,K.default.XK_Hiragana,K.default.XK_Romaji];if(Q.isWindows()&&y.includes(x)){this._sendKeyEvent(x,c,!0,v,b),this._sendKeyEvent(x,c,!1,v,b),(0,Y.stopEvent)(i);return}if((0,Y.stopEvent)(i),c==="ControlLeft"&&Q.isWindows()&&!("ControlLeft"in this._keyDownList)){this._altGrArmed=!0,this._altGrTimeout=setTimeout(this._handleAltGrTimeout.bind(this),100),this._altGrCtrlTime=i.timeStamp;return}this._sendKeyEvent(x,c,!0,v,b)}},{key:"_handleKeyUp",value:function(i){(0,Y.stopEvent)(i);var c=this._getKeyCode(i);if(this._altGrArmed&&(this._altGrArmed=!1,clearTimeout(this._altGrTimeout),this._sendKeyEvent(K.default.XK_Control_L,"ControlLeft",!0)),(Q.isMac()||Q.isIOS())&&c==="CapsLock"){this._sendKeyEvent(K.default.XK_Caps_Lock,"CapsLock",!0),this._sendKeyEvent(K.default.XK_Caps_Lock,"CapsLock",!1);return}this._sendKeyEvent(this._keyDownList[c],c,!1),Q.isWindows()&&(c==="ShiftLeft"||c==="ShiftRight")&&("ShiftRight"in this._keyDownList&&this._sendKeyEvent(this._keyDownList.ShiftRight,"ShiftRight",!1),"ShiftLeft"in this._keyDownList&&this._sendKeyEvent(this._keyDownList.ShiftLeft,"ShiftLeft",!1))}},{key:"_handleAltGrTimeout",value:function(){this._altGrArmed=!1,clearTimeout(this._altGrTimeout),this._sendKeyEvent(K.default.XK_Control_L,"ControlLeft",!0)}},{key:"_allKeysUp",value:function(){h.Debug(">> Keyboard.allKeysUp");for(var i in this._keyDownList)this._sendKeyEvent(this._keyDownList[i],i,!1);h.Debug("<< Keyboard.allKeysUp")}},{key:"grab",value:function(){this._target.addEventListener("keydown",this._eventHandlers.keydown),this._target.addEventListener("keyup",this._eventHandlers.keyup),window.addEventListener("blur",this._eventHandlers.blur)}},{key:"ungrab",value:function(){this._target.removeEventListener("keydown",this._eventHandlers.keydown),this._target.removeEventListener("keyup",this._eventHandlers.keyup),window.removeEventListener("blur",this._eventHandlers.blur),this._allKeysUp()}}])}()}(qt)),qt}var Jt={},$r;function Nn(){return $r||($r=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;function h(y){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},h(y)}function Y(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function A(y,g){for(var S=0;S<g.length;S++){var X=g[S];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(y,Q(X.key),X)}}function K(y,g,S){return g&&A(y.prototype,g),Object.defineProperty(y,"prototype",{writable:!1}),y}function Q(y){var g=L(y,"string");return h(g)=="symbol"?g:g+""}function L(y,g){if(h(y)!="object"||!y)return y;var S=y[Symbol.toPrimitive];if(S!==void 0){var X=S.call(y,g);if(h(X)!="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}var C=0,u=1,_=2,s=4,p=8,f=16,r=32,n=64,l=127,a=50,i=90,c=250,x=1e3,v=1e3,b=50;P.default=function(){function y(){Y(this,y),this._target=null,this._state=l,this._tracked=[],this._ignored=[],this._waitingRelease=!1,this._releaseStart=0,this._longpressTimeoutId=null,this._twoTouchTimeoutId=null,this._boundEventHandler=this._eventHandler.bind(this)}return K(y,[{key:"attach",value:function(S){this.detach(),this._target=S,this._target.addEventListener("touchstart",this._boundEventHandler),this._target.addEventListener("touchmove",this._boundEventHandler),this._target.addEventListener("touchend",this._boundEventHandler),this._target.addEventListener("touchcancel",this._boundEventHandler)}},{key:"detach",value:function(){this._target&&(this._stopLongpressTimeout(),this._stopTwoTouchTimeout(),this._target.removeEventListener("touchstart",this._boundEventHandler),this._target.removeEventListener("touchmove",this._boundEventHandler),this._target.removeEventListener("touchend",this._boundEventHandler),this._target.removeEventListener("touchcancel",this._boundEventHandler),this._target=null)}},{key:"_eventHandler",value:function(S){var X;switch(S.stopPropagation(),S.preventDefault(),S.type){case"touchstart":X=this._touchStart;break;case"touchmove":X=this._touchMove;break;case"touchend":case"touchcancel":X=this._touchEnd;break}for(var F=0;F<S.changedTouches.length;F++){var T=S.changedTouches[F];X.call(this,T.identifier,T.clientX,T.clientY)}}},{key:"_touchStart",value:function(S,X,F){if(this._hasDetectedGesture()||this._state===C){this._ignored.push(S);return}if(this._tracked.length>0&&Date.now()-this._tracked[0].started>c){this._state=C,this._ignored.push(S);return}if(this._waitingRelease){this._state=C,this._ignored.push(S);return}switch(this._tracked.push({id:S,started:Date.now(),active:!0,firstX:X,firstY:F,lastX:X,lastY:F,angle:0}),this._tracked.length){case 1:this._startLongpressTimeout();break;case 2:this._state&=-26,this._stopLongpressTimeout();break;case 3:this._state&=-99;break;default:this._state=C}}},{key:"_touchMove",value:function(S,X,F){var T=this._tracked.find(function(ge){return ge.id===S});if(T!==void 0){T.lastX=X,T.lastY=F;var B=X-T.firstX,D=F-T.firstY;if((T.firstX!==T.lastX||T.firstY!==T.lastY)&&(T.angle=Math.atan2(D,B)*180/Math.PI),!this._hasDetectedGesture()){if(Math.hypot(B,D)<a)return;if(this._state&=-24,this._stopLongpressTimeout(),this._tracked.length!==1&&(this._state&=-9),this._tracked.length!==2&&(this._state&=-97),this._tracked.length===2){var N=this._tracked.find(function(ge){return ge.id!==S}),te=Math.hypot(N.firstX-N.lastX,N.firstY-N.lastY);if(te>a){var _e=Math.abs(T.angle-N.angle);_e=Math.abs((_e+180)%360-180),_e>i?this._state&=-33:this._state&=-65,this._isTwoTouchTimeoutRunning()&&this._stopTwoTouchTimeout()}else this._isTwoTouchTimeoutRunning()||this._startTwoTouchTimeout()}if(!this._hasDetectedGesture())return;this._pushEvent("gesturestart")}this._pushEvent("gesturemove")}}},{key:"_touchEnd",value:function(S,X,F){if(this._ignored.indexOf(S)!==-1){this._ignored.splice(this._ignored.indexOf(S),1),this._ignored.length===0&&this._tracked.length===0&&(this._state=l,this._waitingRelease=!1);return}if(!this._hasDetectedGesture()&&this._isTwoTouchTimeoutRunning()&&(this._stopTwoTouchTimeout(),this._state=C),!this._hasDetectedGesture()&&(this._state&=-105,this._state&=-17,this._stopLongpressTimeout(),!this._waitingRelease))switch(this._releaseStart=Date.now(),this._waitingRelease=!0,this._tracked.length){case 1:this._state&=-7;break;case 2:this._state&=-6;break}if(this._waitingRelease){Date.now()-this._releaseStart>c&&(this._state=C),this._tracked.some(function(D){return Date.now()-D.started>x})&&(this._state=C);var T=this._tracked.find(function(D){return D.id===S});if(T.active=!1,this._hasDetectedGesture())this._pushEvent("gesturestart");else if(this._state!==C)return}this._hasDetectedGesture()&&this._pushEvent("gestureend");for(var B=0;B<this._tracked.length;B++)this._tracked[B].active&&this._ignored.push(this._tracked[B].id);this._tracked=[],this._state=C,this._ignored.indexOf(S)!==-1&&this._ignored.splice(this._ignored.indexOf(S),1),this._ignored.length===0&&(this._state=l,this._waitingRelease=!1)}},{key:"_hasDetectedGesture",value:function(){return!(this._state===C||this._state&this._state-1||this._state&(u|_|s)&&this._tracked.some(function(S){return S.active}))}},{key:"_startLongpressTimeout",value:function(){var S=this;this._stopLongpressTimeout(),this._longpressTimeoutId=setTimeout(function(){return S._longpressTimeout()},v)}},{key:"_stopLongpressTimeout",value:function(){clearTimeout(this._longpressTimeoutId),this._longpressTimeoutId=null}},{key:"_longpressTimeout",value:function(){if(this._hasDetectedGesture())throw new Error("A longpress gesture failed, conflict with a different gesture");this._state=f,this._pushEvent("gesturestart")}},{key:"_startTwoTouchTimeout",value:function(){var S=this;this._stopTwoTouchTimeout(),this._twoTouchTimeoutId=setTimeout(function(){return S._twoTouchTimeout()},b)}},{key:"_stopTwoTouchTimeout",value:function(){clearTimeout(this._twoTouchTimeoutId),this._twoTouchTimeoutId=null}},{key:"_isTwoTouchTimeoutRunning",value:function(){return this._twoTouchTimeoutId!==null}},{key:"_twoTouchTimeout",value:function(){if(this._tracked.length===0)throw new Error("A pinch or two drag gesture failed, no tracked touches");var S=this._getAverageMovement(),X=Math.abs(S.x),F=Math.abs(S.y),T=this._getAverageDistance(),B=Math.abs(Math.hypot(T.first.x,T.first.y)-Math.hypot(T.last.x,T.last.y));F<B&&X<B?this._state=n:this._state=r,this._pushEvent("gesturestart"),this._pushEvent("gesturemove")}},{key:"_pushEvent",value:function(S){var X={type:this._stateToGesture(this._state)},F=this._getPosition(),T=F.last;switch(S==="gesturestart"&&(T=F.first),this._state){case r:case n:T=F.first;break}if(X.clientX=T.x,X.clientY=T.y,this._state===n){var B=this._getAverageDistance();S==="gesturestart"?(X.magnitudeX=B.first.x,X.magnitudeY=B.first.y):(X.magnitudeX=B.last.x,X.magnitudeY=B.last.y)}else if(this._state===r)if(S==="gesturestart")X.magnitudeX=0,X.magnitudeY=0;else{var D=this._getAverageMovement();X.magnitudeX=D.x,X.magnitudeY=D.y}var N=new CustomEvent(S,{detail:X});this._target.dispatchEvent(N)}},{key:"_stateToGesture",value:function(S){switch(S){case u:return"onetap";case _:return"twotap";case s:return"threetap";case p:return"drag";case f:return"longpress";case r:return"twodrag";case n:return"pinch"}throw new Error("Unknown gesture state: "+S)}},{key:"_getPosition",value:function(){if(this._tracked.length===0)throw new Error("Failed to get gesture position, no tracked touches");for(var S=this._tracked.length,X=0,F=0,T=0,B=0,D=0;D<this._tracked.length;D++)X+=this._tracked[D].firstX,F+=this._tracked[D].firstY,T+=this._tracked[D].lastX,B+=this._tracked[D].lastY;return{first:{x:X/S,y:F/S},last:{x:T/S,y:B/S}}}},{key:"_getAverageMovement",value:function(){if(this._tracked.length===0)throw new Error("Failed to get gesture movement, no tracked touches");var S,X;S=X=0;for(var F=this._tracked.length,T=0;T<this._tracked.length;T++)S+=this._tracked[T].lastX-this._tracked[T].firstX,X+=this._tracked[T].lastY-this._tracked[T].firstY;return{x:S/F,y:X/F}}},{key:"_getAverageDistance",value:function(){if(this._tracked.length===0)throw new Error("Failed to get gesture distance, no tracked touches");var S=this._tracked[0],X=this._tracked[this._tracked.length-1],F=Math.abs(X.firstX-S.firstX),T=Math.abs(X.firstY-S.firstY),B=Math.abs(X.lastX-S.lastX),D=Math.abs(X.lastY-S.lastY);return{first:{x:F,y:T},last:{x:B,y:D}}}}])}()}(Jt)),Jt}var er={},Jr;function jn(){return Jr||(Jr=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=Ft();function Y(_){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Y(_)}function A(_,s){if(!(_ instanceof s))throw new TypeError("Cannot call a class as a function")}function K(_,s){for(var p=0;p<s.length;p++){var f=s[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(_,L(f.key),f)}}function Q(_,s,p){return s&&K(_.prototype,s),Object.defineProperty(_,"prototype",{writable:!1}),_}function L(_){var s=C(_,"string");return Y(s)=="symbol"?s:s+""}function C(_,s){if(Y(_)!="object"||!_)return _;var p=_[Symbol.toPrimitive];if(p!==void 0){var f=p.call(_,s);if(Y(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}var u=!h.supportsCursorURIs||h.isTouchDevice;P.default=function(){function _(){A(this,_),this._target=null,this._canvas=document.createElement("canvas"),u&&(this._canvas.style.position="fixed",this._canvas.style.zIndex="65535",this._canvas.style.pointerEvents="none",this._canvas.style.userSelect="none",this._canvas.style.WebkitUserSelect="none",this._canvas.style.visibility="hidden"),this._position={x:0,y:0},this._hotSpot={x:0,y:0},this._eventHandlers={mouseover:this._handleMouseOver.bind(this),mouseleave:this._handleMouseLeave.bind(this),mousemove:this._handleMouseMove.bind(this),mouseup:this._handleMouseUp.bind(this)}}return Q(_,[{key:"attach",value:function(p){if(this._target&&this.detach(),this._target=p,u){document.body.appendChild(this._canvas);var f={capture:!0,passive:!0};this._target.addEventListener("mouseover",this._eventHandlers.mouseover,f),this._target.addEventListener("mouseleave",this._eventHandlers.mouseleave,f),this._target.addEventListener("mousemove",this._eventHandlers.mousemove,f),this._target.addEventListener("mouseup",this._eventHandlers.mouseup,f)}this.clear()}},{key:"detach",value:function(){if(this._target){if(u){var p={capture:!0,passive:!0};this._target.removeEventListener("mouseover",this._eventHandlers.mouseover,p),this._target.removeEventListener("mouseleave",this._eventHandlers.mouseleave,p),this._target.removeEventListener("mousemove",this._eventHandlers.mousemove,p),this._target.removeEventListener("mouseup",this._eventHandlers.mouseup,p),document.contains(this._canvas)&&document.body.removeChild(this._canvas)}this._target=null}}},{key:"change",value:function(p,f,r,n,l){if(n===0||l===0){this.clear();return}this._position.x=this._position.x+this._hotSpot.x-f,this._position.y=this._position.y+this._hotSpot.y-r,this._hotSpot.x=f,this._hotSpot.y=r;var a=this._canvas.getContext("2d");this._canvas.width=n,this._canvas.height=l;var i=new ImageData(new Uint8ClampedArray(p),n,l);if(a.clearRect(0,0,n,l),a.putImageData(i,0,0),u)this._updatePosition();else{var c=this._canvas.toDataURL();this._target.style.cursor="url("+c+")"+f+" "+r+", default"}}},{key:"clear",value:function(){this._target.style.cursor="none",this._canvas.width=0,this._canvas.height=0,this._position.x=this._position.x+this._hotSpot.x,this._position.y=this._position.y+this._hotSpot.y,this._hotSpot.x=0,this._hotSpot.y=0}},{key:"move",value:function(p,f){if(u){window.visualViewport?(this._position.x=p+window.visualViewport.offsetLeft,this._position.y=f+window.visualViewport.offsetTop):(this._position.x=p,this._position.y=f),this._updatePosition();var r=document.elementFromPoint(p,f);this._updateVisibility(r)}}},{key:"_handleMouseOver",value:function(p){this._handleMouseMove(p)}},{key:"_handleMouseLeave",value:function(p){this._updateVisibility(p.relatedTarget)}},{key:"_handleMouseMove",value:function(p){this._updateVisibility(p.target),this._position.x=p.clientX-this._hotSpot.x,this._position.y=p.clientY-this._hotSpot.y,this._updatePosition()}},{key:"_handleMouseUp",value:function(p){var f=this,r=document.elementFromPoint(p.clientX,p.clientY);this._updateVisibility(r),this._captureIsActive()&&window.setTimeout(function(){f._target&&(r=document.elementFromPoint(p.clientX,p.clientY),f._updateVisibility(r))},0)}},{key:"_showCursor",value:function(){this._canvas.style.visibility==="hidden"&&(this._canvas.style.visibility="")}},{key:"_hideCursor",value:function(){this._canvas.style.visibility!=="hidden"&&(this._canvas.style.visibility="hidden")}},{key:"_shouldShowCursor",value:function(p){return p?p===this._target?!0:!(!this._target.contains(p)||window.getComputedStyle(p).cursor!=="none"):!1}},{key:"_updateVisibility",value:function(p){this._captureIsActive()&&(p=document.captureElement),this._shouldShowCursor(p)?this._showCursor():this._hideCursor()}},{key:"_updatePosition",value:function(){this._canvas.style.left=this._position.x+"px",this._canvas.style.top=this._position.y+"px"}},{key:"_captureIsActive",value:function(){return document.captureElement&&document.documentElement.contains(document.captureElement)}}])}()}(er)),er}var tr={},en;function Hn(){return en||(en=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=A(ht());function Y(v){if(typeof WeakMap!="function")return null;var b=new WeakMap,y=new WeakMap;return(Y=function(S){return S?y:b})(v)}function A(v,b){if(v&&v.__esModule)return v;if(v===null||K(v)!="object"&&typeof v!="function")return{default:v};var y=Y(b);if(y&&y.has(v))return y.get(v);var g={__proto__:null},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in v)if(X!=="default"&&{}.hasOwnProperty.call(v,X)){var F=S?Object.getOwnPropertyDescriptor(v,X):null;F&&(F.get||F.set)?Object.defineProperty(g,X,F):g[X]=v[X]}return g.default=v,y&&y.set(v,g),g}function K(v){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},K(v)}function Q(v){return _(v)||u(v)||C(v)||L()}function L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(v,b){if(v){if(typeof v=="string")return s(v,b);var y={}.toString.call(v).slice(8,-1);return y==="Object"&&v.constructor&&(y=v.constructor.name),y==="Map"||y==="Set"?Array.from(v):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?s(v,b):void 0}}function u(v){if(typeof Symbol<"u"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function _(v){if(Array.isArray(v))return s(v)}function s(v,b){(b==null||b>v.length)&&(b=v.length);for(var y=0,g=Array(b);y<b;y++)g[y]=v[y];return g}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function f(v,b){for(var y=0;y<b.length;y++){var g=b[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,n(g.key),g)}}function r(v,b,y){return b&&f(v.prototype,b),Object.defineProperty(v,"prototype",{writable:!1}),v}function n(v){var b=l(v,"string");return K(b)=="symbol"?b:b+""}function l(v,b){if(K(v)!="object"||!v)return v;var y=v[Symbol.toPrimitive];if(y!==void 0){var g=y.call(v,b);if(K(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}var a=40*1024*1024,i={CONNECTING:"connecting",OPEN:"open",CLOSING:"closing",CLOSED:"closed"},c={CONNECTING:[WebSocket.CONNECTING,i.CONNECTING],OPEN:[WebSocket.OPEN,i.OPEN],CLOSING:[WebSocket.CLOSING,i.CLOSING],CLOSED:[WebSocket.CLOSED,i.CLOSED]},x=["send","close","binaryType","onerror","onmessage","onopen","protocol","readyState"];P.default=function(){function v(){p(this,v),this._websocket=null,this._rQi=0,this._rQlen=0,this._rQbufferSize=1024*1024*4,this._rQ=null,this._sQbufferSize=1024*10,this._sQlen=0,this._sQ=null,this._eventHandlers={message:function(){},open:function(){},close:function(){},error:function(){}}}return r(v,[{key:"readyState",get:function(){var y;return this._websocket===null?"unused":(y=this._websocket.readyState,c.CONNECTING.includes(y)?"connecting":c.OPEN.includes(y)?"open":c.CLOSING.includes(y)?"closing":c.CLOSED.includes(y)?"closed":"unknown")}},{key:"rQpeek8",value:function(){return this._rQ[this._rQi]}},{key:"rQskipBytes",value:function(y){this._rQi+=y}},{key:"rQshift8",value:function(){return this._rQshift(1)}},{key:"rQshift16",value:function(){return this._rQshift(2)}},{key:"rQshift32",value:function(){return this._rQshift(4)}},{key:"_rQshift",value:function(y){for(var g=0,S=y-1;S>=0;S--)g+=this._rQ[this._rQi++]<<S*8;return g>>>0}},{key:"rQshiftStr",value:function(y){for(var g="",S=0;S<y;S+=4096){var X=this.rQshiftBytes(Math.min(4096,y-S),!1);g+=String.fromCharCode.apply(null,X)}return g}},{key:"rQshiftBytes",value:function(y){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return this._rQi+=y,g?this._rQ.slice(this._rQi-y,this._rQi):this._rQ.subarray(this._rQi-y,this._rQi)}},{key:"rQshiftTo",value:function(y,g){y.set(new Uint8Array(this._rQ.buffer,this._rQi,g)),this._rQi+=g}},{key:"rQpeekBytes",value:function(y){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return g?this._rQ.slice(this._rQi,this._rQi+y):this._rQ.subarray(this._rQi,this._rQi+y)}},{key:"rQwait",value:function(y,g,S){if(this._rQlen-this._rQi<g){if(S){if(this._rQi<S)throw new Error("rQwait cannot backup "+S+" bytes");this._rQi-=S}return!0}return!1}},{key:"sQpush8",value:function(y){this._sQensureSpace(1),this._sQ[this._sQlen++]=y}},{key:"sQpush16",value:function(y){this._sQensureSpace(2),this._sQ[this._sQlen++]=y>>8&255,this._sQ[this._sQlen++]=y>>0&255}},{key:"sQpush32",value:function(y){this._sQensureSpace(4),this._sQ[this._sQlen++]=y>>24&255,this._sQ[this._sQlen++]=y>>16&255,this._sQ[this._sQlen++]=y>>8&255,this._sQ[this._sQlen++]=y>>0&255}},{key:"sQpushString",value:function(y){var g=y.split("").map(function(S){return S.charCodeAt(0)});this.sQpushBytes(new Uint8Array(g))}},{key:"sQpushBytes",value:function(y){for(var g=0;g<y.length;){this._sQensureSpace(1);var S=this._sQbufferSize-this._sQlen;S>y.length-g&&(S=y.length-g),this._sQ.set(y.subarray(g,S),this._sQlen),this._sQlen+=S,g+=S}}},{key:"flush",value:function(){this._sQlen>0&&this.readyState==="open"&&(this._websocket.send(new Uint8Array(this._sQ.buffer,0,this._sQlen)),this._sQlen=0)}},{key:"_sQensureSpace",value:function(y){this._sQbufferSize-this._sQlen<y&&this.flush()}},{key:"off",value:function(y){this._eventHandlers[y]=function(){}}},{key:"on",value:function(y,g){this._eventHandlers[y]=g}},{key:"_allocateBuffers",value:function(){this._rQ=new Uint8Array(this._rQbufferSize),this._sQ=new Uint8Array(this._sQbufferSize)}},{key:"init",value:function(){this._allocateBuffers(),this._rQi=0,this._websocket=null}},{key:"open",value:function(y,g){this.attach(new WebSocket(y,g))}},{key:"attach",value:function(y){var g=this;this.init();for(var S=[].concat(Q(Object.keys(y)),Q(Object.getOwnPropertyNames(Object.getPrototypeOf(y)))),X=0;X<x.length;X++){var F=x[X];if(S.indexOf(F)<0)throw new Error("Raw channel missing property: "+F)}this._websocket=y,this._websocket.binaryType="arraybuffer",this._websocket.onmessage=this._recvMessage.bind(this),this._websocket.onopen=function(){h.Debug(">> WebSock.onopen"),g._websocket.protocol&&h.Info("Server choose sub-protocol: "+g._websocket.protocol),g._eventHandlers.open(),h.Debug("<< WebSock.onopen")},this._websocket.onclose=function(T){h.Debug(">> WebSock.onclose"),g._eventHandlers.close(T),h.Debug("<< WebSock.onclose")},this._websocket.onerror=function(T){h.Debug(">> WebSock.onerror: "+T),g._eventHandlers.error(T),h.Debug("<< WebSock.onerror: "+T)}}},{key:"close",value:function(){this._websocket&&((this.readyState==="connecting"||this.readyState==="open")&&(h.Info("Closing WebSocket connection"),this._websocket.close()),this._websocket.onmessage=function(){})}},{key:"_expandCompactRQ",value:function(y){var g=(this._rQlen-this._rQi+y)*8,S=this._rQbufferSize<g;if(S&&(this._rQbufferSize=Math.max(this._rQbufferSize*2,g)),this._rQbufferSize>a&&(this._rQbufferSize=a,this._rQbufferSize-(this._rQlen-this._rQi)<y))throw new Error("Receive Queue buffer exceeded "+a+" bytes, and the new message could not fit");if(S){var X=this._rQ.buffer;this._rQ=new Uint8Array(this._rQbufferSize),this._rQ.set(new Uint8Array(X,this._rQi,this._rQlen-this._rQi))}else this._rQ.copyWithin(0,this._rQi,this._rQlen);this._rQlen=this._rQlen-this._rQi,this._rQi=0}},{key:"_recvMessage",value:function(y){this._rQlen==this._rQi&&(this._rQlen=0,this._rQi=0);var g=new Uint8Array(y.data);g.length>this._rQbufferSize-this._rQlen&&this._expandCompactRQ(g.length),this._rQ.set(g,this._rQlen),this._rQlen+=g.length,this._rQlen-this._rQi>0?this._eventHandlers.message():h.Debug("Ignoring empty message")}}])}()}(tr)),tr}var rr={},tn;function zn(){return tn||(tn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0,P.default={Again:57349,AltLeft:56,AltRight:57400,ArrowDown:57424,ArrowLeft:57419,ArrowRight:57421,ArrowUp:57416,AudioVolumeDown:57390,AudioVolumeMute:57376,AudioVolumeUp:57392,Backquote:41,Backslash:43,Backspace:14,BracketLeft:26,BracketRight:27,BrowserBack:57450,BrowserFavorites:57446,BrowserForward:57449,BrowserHome:57394,BrowserRefresh:57447,BrowserSearch:57445,BrowserStop:57448,CapsLock:58,Comma:51,ContextMenu:57437,ControlLeft:29,ControlRight:57373,Convert:121,Copy:57464,Cut:57404,Delete:57427,Digit0:11,Digit1:2,Digit2:3,Digit3:4,Digit4:5,Digit5:6,Digit6:7,Digit7:8,Digit8:9,Digit9:10,Eject:57469,End:57423,Enter:28,Equal:13,Escape:1,F1:59,F10:68,F11:87,F12:88,F13:93,F14:94,F15:95,F16:85,F17:57347,F18:57463,F19:57348,F2:60,F20:90,F21:116,F22:57465,F23:109,F24:111,F3:61,F4:62,F5:63,F6:64,F7:65,F8:66,F9:67,Find:57409,Help:57461,Hiragana:119,Home:57415,Insert:57426,IntlBackslash:86,IntlRo:115,IntlYen:125,KanaMode:112,Katakana:120,KeyA:30,KeyB:48,KeyC:46,KeyD:32,KeyE:18,KeyF:33,KeyG:34,KeyH:35,KeyI:23,KeyJ:36,KeyK:37,KeyL:38,KeyM:50,KeyN:49,KeyO:24,KeyP:25,KeyQ:16,KeyR:19,KeyS:31,KeyT:20,KeyU:22,KeyV:47,KeyW:17,KeyX:45,KeyY:21,KeyZ:44,Lang1:114,Lang2:113,Lang3:120,Lang4:119,Lang5:118,LaunchApp1:57451,LaunchApp2:57377,LaunchMail:57452,MediaPlayPause:57378,MediaSelect:57453,MediaStop:57380,MediaTrackNext:57369,MediaTrackPrevious:57360,MetaLeft:57435,MetaRight:57436,Minus:12,NonConvert:123,NumLock:69,Numpad0:82,Numpad1:79,Numpad2:80,Numpad3:81,Numpad4:75,Numpad5:76,Numpad6:77,Numpad7:71,Numpad8:72,Numpad9:73,NumpadAdd:78,NumpadComma:126,NumpadDecimal:83,NumpadDivide:57397,NumpadEnter:57372,NumpadEqual:89,NumpadMultiply:55,NumpadParenLeft:57462,NumpadParenRight:57467,NumpadSubtract:74,Open:100,PageDown:57425,PageUp:57417,Paste:101,Pause:57414,Period:52,Power:57438,PrintScreen:84,Props:57350,Quote:40,ScrollLock:70,Semicolon:39,ShiftLeft:42,ShiftRight:54,Slash:53,Sleep:57439,Space:57,Suspend:57381,Tab:15,Undo:57351,WakeUp:57443}}(rr)),rr}var mt={},rn;function Gn(){if(rn)return mt;rn=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.encodingName=h,mt.encodings=void 0;var P=mt.encodings={encodingRaw:0,encodingCopyRect:1,encodingRRE:2,encodingHextile:5,encodingTight:7,encodingZRLE:16,encodingTightPNG:-260,encodingJPEG:21,pseudoEncodingQualityLevel9:-23,pseudoEncodingQualityLevel0:-32,pseudoEncodingDesktopSize:-223,pseudoEncodingLastRect:-224,pseudoEncodingCursor:-239,pseudoEncodingQEMUExtendedKeyEvent:-258,pseudoEncodingQEMULedEvent:-261,pseudoEncodingDesktopName:-307,pseudoEncodingExtendedDesktopSize:-308,pseudoEncodingXvp:-309,pseudoEncodingFence:-312,pseudoEncodingContinuousUpdates:-313,pseudoEncodingCompressLevel9:-247,pseudoEncodingCompressLevel0:-256,pseudoEncodingVMwareCursor:1464686180,pseudoEncodingExtendedClipboard:3231835598};function h(Y){switch(Y){case P.encodingRaw:return"Raw";case P.encodingCopyRect:return"CopyRect";case P.encodingRRE:return"RRE";case P.encodingHextile:return"Hextile";case P.encodingTight:return"Tight";case P.encodingZRLE:return"ZRLE";case P.encodingTightPNG:return"TightPNG";case P.encodingJPEG:return"JPEG";default:return"[unknown encoding "+Y+"]"}}return mt}var nr={},ir={},vt={},nn;function qn(){if(nn)return vt;nn=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.AESECBCipher=vt.AESEAXCipher=void 0;function P(_){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},P(_)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return s};var _,s={},p=Object.prototype,f=p.hasOwnProperty,r=Object.defineProperty||function(J,$,re){J[$]=re.value},n=typeof Symbol=="function"?Symbol:{},l=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(J,$,re){return Object.defineProperty(J,$,{value:re,enumerable:!0,configurable:!0,writable:!0}),J[$]}try{c({},"")}catch{c=function(re,G,O){return re[G]=O}}function x(J,$,re,G){var O=$&&$.prototype instanceof F?$:F,I=Object.create(O.prototype),se=new Re(G||[]);return r(I,"_invoke",{value:Fe(J,re,se)}),I}function v(J,$,re){try{return{type:"normal",arg:J.call($,re)}}catch(G){return{type:"throw",arg:G}}}s.wrap=x;var b="suspendedStart",y="suspendedYield",g="executing",S="completed",X={};function F(){}function T(){}function B(){}var D={};c(D,l,function(){return this});var N=Object.getPrototypeOf,te=N&&N(N(De([])));te&&te!==p&&f.call(te,l)&&(D=te);var _e=B.prototype=F.prototype=Object.create(D);function ge(J){["next","throw","return"].forEach(function($){c(J,$,function(re){return this._invoke($,re)})})}function ve(J,$){function re(O,I,se,ue){var j=v(J[O],J,I);if(j.type!=="throw"){var W=j.arg,ee=W.value;return ee&&P(ee)=="object"&&f.call(ee,"__await")?$.resolve(ee.__await).then(function(ne){re("next",ne,se,ue)},function(ne){re("throw",ne,se,ue)}):$.resolve(ee).then(function(ne){W.value=ne,se(W)},function(ne){return re("throw",ne,se,ue)})}ue(j.arg)}var G;r(this,"_invoke",{value:function(I,se){function ue(){return new $(function(j,W){re(I,se,j,W)})}return G=G?G.then(ue,ue):ue()}})}function Fe(J,$,re){var G=b;return function(O,I){if(G===g)throw Error("Generator is already running");if(G===S){if(O==="throw")throw I;return{value:_,done:!0}}for(re.method=O,re.arg=I;;){var se=re.delegate;if(se){var ue=Ae(se,re);if(ue){if(ue===X)continue;return ue}}if(re.method==="next")re.sent=re._sent=re.arg;else if(re.method==="throw"){if(G===b)throw G=S,re.arg;re.dispatchException(re.arg)}else re.method==="return"&&re.abrupt("return",re.arg);G=g;var j=v(J,$,re);if(j.type==="normal"){if(G=re.done?S:y,j.arg===X)continue;return{value:j.arg,done:re.done}}j.type==="throw"&&(G=S,re.method="throw",re.arg=j.arg)}}}function Ae(J,$){var re=$.method,G=J.iterator[re];if(G===_)return $.delegate=null,re==="throw"&&J.iterator.return&&($.method="return",$.arg=_,Ae(J,$),$.method==="throw")||re!=="return"&&($.method="throw",$.arg=new TypeError("The iterator does not provide a '"+re+"' method")),X;var O=v(G,J.iterator,$.arg);if(O.type==="throw")return $.method="throw",$.arg=O.arg,$.delegate=null,X;var I=O.arg;return I?I.done?($[J.resultName]=I.value,$.next=J.nextLoc,$.method!=="return"&&($.method="next",$.arg=_),$.delegate=null,X):I:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,X)}function le(J){var $={tryLoc:J[0]};1 in J&&($.catchLoc=J[1]),2 in J&&($.finallyLoc=J[2],$.afterLoc=J[3]),this.tryEntries.push($)}function ke(J){var $=J.completion||{};$.type="normal",delete $.arg,J.completion=$}function Re(J){this.tryEntries=[{tryLoc:"root"}],J.forEach(le,this),this.reset(!0)}function De(J){if(J||J===""){var $=J[l];if($)return $.call(J);if(typeof J.next=="function")return J;if(!isNaN(J.length)){var re=-1,G=function O(){for(;++re<J.length;)if(f.call(J,re))return O.value=J[re],O.done=!1,O;return O.value=_,O.done=!0,O};return G.next=G}}throw new TypeError(P(J)+" is not iterable")}return T.prototype=B,r(_e,"constructor",{value:B,configurable:!0}),r(B,"constructor",{value:T,configurable:!0}),T.displayName=c(B,i,"GeneratorFunction"),s.isGeneratorFunction=function(J){var $=typeof J=="function"&&J.constructor;return!!$&&($===T||($.displayName||$.name)==="GeneratorFunction")},s.mark=function(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,B):(J.__proto__=B,c(J,i,"GeneratorFunction")),J.prototype=Object.create(_e),J},s.awrap=function(J){return{__await:J}},ge(ve.prototype),c(ve.prototype,a,function(){return this}),s.AsyncIterator=ve,s.async=function(J,$,re,G,O){O===void 0&&(O=Promise);var I=new ve(x(J,$,re,G),O);return s.isGeneratorFunction($)?I:I.next().then(function(se){return se.done?se.value:I.next()})},ge(_e),c(_e,i,"Generator"),c(_e,l,function(){return this}),c(_e,"toString",function(){return"[object Generator]"}),s.keys=function(J){var $=Object(J),re=[];for(var G in $)re.push(G);return re.reverse(),function O(){for(;re.length;){var I=re.pop();if(I in $)return O.value=I,O.done=!1,O}return O.done=!0,O}},s.values=De,Re.prototype={constructor:Re,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(ke),!$)for(var re in this)re.charAt(0)==="t"&&f.call(this,re)&&!isNaN(+re.slice(1))&&(this[re]=_)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if($.type==="throw")throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var re=this;function G(W,ee){return se.type="throw",se.arg=$,re.next=W,ee&&(re.method="next",re.arg=_),!!ee}for(var O=this.tryEntries.length-1;O>=0;--O){var I=this.tryEntries[O],se=I.completion;if(I.tryLoc==="root")return G("end");if(I.tryLoc<=this.prev){var ue=f.call(I,"catchLoc"),j=f.call(I,"finallyLoc");if(ue&&j){if(this.prev<I.catchLoc)return G(I.catchLoc,!0);if(this.prev<I.finallyLoc)return G(I.finallyLoc)}else if(ue){if(this.prev<I.catchLoc)return G(I.catchLoc,!0)}else{if(!j)throw Error("try statement without catch or finally");if(this.prev<I.finallyLoc)return G(I.finallyLoc)}}}},abrupt:function($,re){for(var G=this.tryEntries.length-1;G>=0;--G){var O=this.tryEntries[G];if(O.tryLoc<=this.prev&&f.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var I=O;break}}I&&($==="break"||$==="continue")&&I.tryLoc<=re&&re<=I.finallyLoc&&(I=null);var se=I?I.completion:{};return se.type=$,se.arg=re,I?(this.method="next",this.next=I.finallyLoc,X):this.complete(se)},complete:function($,re){if($.type==="throw")throw $.arg;return $.type==="break"||$.type==="continue"?this.next=$.arg:$.type==="return"?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):$.type==="normal"&&re&&(this.next=re),X},finish:function($){for(var re=this.tryEntries.length-1;re>=0;--re){var G=this.tryEntries[re];if(G.finallyLoc===$)return this.complete(G.completion,G.afterLoc),ke(G),X}},catch:function($){for(var re=this.tryEntries.length-1;re>=0;--re){var G=this.tryEntries[re];if(G.tryLoc===$){var O=G.completion;if(O.type==="throw"){var I=O.arg;ke(G)}return I}}throw Error("illegal catch attempt")},delegateYield:function($,re,G){return this.delegate={iterator:De($),resultName:re,nextLoc:G},this.method==="next"&&(this.arg=_),X}},s}function Y(_,s,p,f,r,n,l){try{var a=_[n](l),i=a.value}catch(c){return void p(c)}a.done?s(i):Promise.resolve(i).then(f,r)}function A(_){return function(){var s=this,p=arguments;return new Promise(function(f,r){var n=_.apply(s,p);function l(i){Y(n,f,r,l,a,"next",i)}function a(i){Y(n,f,r,l,a,"throw",i)}l(void 0)})}}function K(_,s){if(!(_ instanceof s))throw new TypeError("Cannot call a class as a function")}function Q(_,s){for(var p=0;p<s.length;p++){var f=s[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(_,C(f.key),f)}}function L(_,s,p){return s&&Q(_.prototype,s),p&&Q(_,p),Object.defineProperty(_,"prototype",{writable:!1}),_}function C(_){var s=u(_,"string");return P(s)=="symbol"?s:s+""}function u(_,s){if(P(_)!="object"||!_)return _;var p=_[Symbol.toPrimitive];if(p!==void 0){var f=p.call(_,s);if(P(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}return vt.AESECBCipher=function(){function _(){K(this,_),this._key=null}return L(_,[{key:"algorithm",get:function(){return{name:"AES-ECB"}}},{key:"_importKey",value:function(){var s=A(h().mark(function f(r,n,l){return h().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.crypto.subtle.importKey("raw",r,{name:"AES-CBC"},n,l);case 2:this._key=i.sent;case 3:case"end":return i.stop()}},f,this)}));function p(f,r,n){return s.apply(this,arguments)}return p}()},{key:"encrypt",value:function(){var s=A(h().mark(function f(r,n){var l,a,i,c;return h().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(l=new Uint8Array(n),!(l.length%16!==0||this._key===null)){v.next=3;break}return v.abrupt("return",null);case 3:a=l.length/16,i=0;case 5:if(!(i<a)){v.next=15;break}return v.t0=Uint8Array,v.next=9,window.crypto.subtle.encrypt({name:"AES-CBC",iv:new Uint8Array(16)},this._key,l.slice(i*16,i*16+16));case 9:v.t1=v.sent,c=new v.t0(v.t1).slice(0,16),l.set(c,i*16);case 12:i++,v.next=5;break;case 15:return v.abrupt("return",l);case 16:case"end":return v.stop()}},f,this)}));function p(f,r){return s.apply(this,arguments)}return p}()}],[{key:"importKey",value:function(){var s=A(h().mark(function f(r,n,l,a){var i;return h().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return i=new _,x.next=3,i._importKey(r,l,a);case 3:return x.abrupt("return",i);case 4:case"end":return x.stop()}},f)}));function p(f,r,n,l){return s.apply(this,arguments)}return p}()}])}(),vt.AESEAXCipher=function(){function _(){K(this,_),this._rawKey=null,this._ctrKey=null,this._cbcKey=null,this._zeroBlock=new Uint8Array(16),this._prefixBlock0=this._zeroBlock,this._prefixBlock1=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]),this._prefixBlock2=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2])}return L(_,[{key:"algorithm",get:function(){return{name:"AES-EAX"}}},{key:"_encryptBlock",value:function(){var s=A(h().mark(function f(r){var n;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.crypto.subtle.encrypt({name:"AES-CBC",iv:this._zeroBlock},this._cbcKey,r);case 2:return n=a.sent,a.abrupt("return",new Uint8Array(n).slice(0,16));case 4:case"end":return a.stop()}},f,this)}));function p(f){return s.apply(this,arguments)}return p}()},{key:"_initCMAC",value:function(){var s=A(h().mark(function f(){var r,n,l,a,i;return h().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this._encryptBlock(this._zeroBlock);case 2:for(r=x.sent,n=new Uint8Array(16),l=r[0]>>>6,a=0;a<15;a++)n[a]=r[a+1]>>6|r[a]<<2,r[a]=r[a+1]>>7|r[a]<<1;i=[0,135,14,137],n[14]^=l>>>1,n[15]=r[15]<<2^i[l],r[15]=r[15]<<1^i[l>>1],this._k1=r,this._k2=n;case 12:case"end":return x.stop()}},f,this)}));function p(){return s.apply(this,arguments)}return p}()},{key:"_encryptCTR",value:function(){var s=A(h().mark(function f(r,n){var l;return h().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.crypto.subtle.encrypt({name:"AES-CTR",counter:n,length:128},this._ctrKey,r);case 2:return l=i.sent,i.abrupt("return",new Uint8Array(l));case 4:case"end":return i.stop()}},f,this)}));function p(f,r){return s.apply(this,arguments)}return p}()},{key:"_decryptCTR",value:function(){var s=A(h().mark(function f(r,n){var l;return h().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.crypto.subtle.decrypt({name:"AES-CTR",counter:n,length:128},this._ctrKey,r);case 2:return l=i.sent,i.abrupt("return",new Uint8Array(l));case 4:case"end":return i.stop()}},f,this)}));function p(f,r){return s.apply(this,arguments)}return p}()},{key:"_computeCMAC",value:function(){var s=A(h().mark(function f(r,n){var l,a,i,c,x,v,b,y;return h().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(n.length===16){S.next=2;break}return S.abrupt("return",null);case 2:if(l=Math.floor(r.length/16),a=Math.ceil(r.length/16),i=r.length-l*16,c=new Uint8Array((a+1)*16),c.set(n),c.set(r,16),i===0)for(x=0;x<16;x++)c[l*16+x]^=this._k1[x];else for(c[(l+1)*16+i]=128,v=0;v<16;v++)c[(l+1)*16+v]^=this._k2[v];return S.next=11,window.crypto.subtle.encrypt({name:"AES-CBC",iv:this._zeroBlock},this._cbcKey,c);case 11:return b=S.sent,b=new Uint8Array(b),y=b.slice(b.length-32,b.length-16),S.abrupt("return",y);case 15:case"end":return S.stop()}},f,this)}));function p(f,r){return s.apply(this,arguments)}return p}()},{key:"_importKey",value:function(){var s=A(h().mark(function f(r){return h().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._rawKey=r,l.next=3,window.crypto.subtle.importKey("raw",r,{name:"AES-CTR"},!1,["encrypt","decrypt"]);case 3:return this._ctrKey=l.sent,l.next=6,window.crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]);case 6:return this._cbcKey=l.sent,l.next=9,this._initCMAC();case 9:case"end":return l.stop()}},f,this)}));function p(f){return s.apply(this,arguments)}return p}()},{key:"encrypt",value:function(){var s=A(h().mark(function f(r,n){var l,a,i,c,x,v,b,y;return h().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return l=r.additionalData,a=r.iv,S.next=4,this._computeCMAC(a,this._prefixBlock0);case 4:return i=S.sent,S.next=7,this._encryptCTR(n,i);case 7:return c=S.sent,S.next=10,this._computeCMAC(l,this._prefixBlock1);case 10:return x=S.sent,S.next=13,this._computeCMAC(c,this._prefixBlock2);case 13:for(v=S.sent,b=0;b<16;b++)v[b]^=i[b]^x[b];return y=new Uint8Array(16+c.length),y.set(c),y.set(v,c.length),S.abrupt("return",y);case 19:case"end":return S.stop()}},f,this)}));function p(f,r){return s.apply(this,arguments)}return p}()},{key:"decrypt",value:function(){var s=A(h().mark(function f(r,n){var l,a,i,c,x,v,b,y,g,S;return h().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return l=n.slice(0,n.length-16),a=r.additionalData,i=r.iv,c=n.slice(n.length-16),F.next=6,this._computeCMAC(i,this._prefixBlock0);case 6:return x=F.sent,F.next=9,this._computeCMAC(a,this._prefixBlock1);case 9:return v=F.sent,F.next=12,this._computeCMAC(l,this._prefixBlock2);case 12:for(b=F.sent,y=0;y<16;y++)b[y]^=x[y]^v[y];if(b.length===c.length){F.next=16;break}return F.abrupt("return",null);case 16:g=0;case 17:if(!(g<c.length)){F.next=23;break}if(b[g]===c[g]){F.next=20;break}return F.abrupt("return",null);case 20:g++,F.next=17;break;case 23:return F.next=25,this._decryptCTR(l,x);case 25:return S=F.sent,F.abrupt("return",S);case 27:case"end":return F.stop()}},f,this)}));function p(f,r){return s.apply(this,arguments)}return p}()}],[{key:"importKey",value:function(){var s=A(h().mark(function f(r,n,l,a){var i;return h().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return i=new _,x.next=3,i._importKey(r);case 3:return x.abrupt("return",i);case 4:case"end":return x.stop()}},f)}));function p(f,r,n,l){return s.apply(this,arguments)}return p}()}])}(),vt}var yt={},an;function Wn(){if(an)return yt;an=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.DESECBCipher=yt.DESCBCCipher=void 0;function P(S){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},P(S)}function h(S,X){if(!(S instanceof X))throw new TypeError("Cannot call a class as a function")}function Y(S,X){for(var F=0;F<X.length;F++){var T=X[F];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(S,K(T.key),T)}}function A(S,X,F){return X&&Y(S.prototype,X),F&&Y(S,F),Object.defineProperty(S,"prototype",{writable:!1}),S}function K(S){var X=Q(S,"string");return P(X)=="symbol"?X:X+""}function Q(S,X){if(P(S)!="object"||!S)return S;var F=S[Symbol.toPrimitive];if(F!==void 0){var T=F.call(S,X);if(P(T)!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(S)}var L=[13,16,10,23,0,4,2,27,14,5,20,9,22,18,11,3,25,7,15,6,26,19,12,1,40,51,30,36,46,54,29,39,50,44,32,47,43,48,38,55,33,52,45,41,49,35,28,31],C=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=0,_,s,p,f,r,n;_=65536,s=1<<24,p=_|s,f=4,r=1024,n=f|r;var l=[p|r,u|u,_|u,p|n,p|f,_|n,u|f,_|u,u|r,p|r,p|n,u|r,s|n,p|f,s|u,u|f,u|n,s|r,s|r,_|r,_|r,p|u,p|u,s|n,_|f,s|f,s|f,_|f,u|u,u|n,_|n,s|u,_|u,p|n,u|f,p|u,p|r,s|u,s|u,u|r,p|f,_|u,_|r,s|f,u|r,u|f,s|n,_|n,p|n,_|f,p|u,s|n,s|f,u|n,_|n,p|r,u|n,s|r,s|r,u|u,_|f,_|r,u|u,p|f];_=1<<20,s=1<<31,p=_|s,f=32,r=32768,n=f|r;var a=[p|n,s|r,u|r,_|n,_|u,u|f,p|f,s|n,s|f,p|n,p|r,s|u,s|r,_|u,u|f,p|f,_|r,_|f,s|n,u|u,s|u,u|r,_|n,p|u,_|f,s|f,u|u,_|r,u|n,p|r,p|u,u|n,u|u,_|n,p|f,_|u,s|n,p|u,p|r,u|r,p|u,s|r,u|f,p|n,_|n,u|f,u|r,s|u,u|n,p|r,_|u,s|f,_|f,s|n,s|f,_|f,_|r,u|u,s|r,u|n,s|u,p|f,p|n,_|r];_=1<<17,s=1<<27,p=_|s,f=8,r=512,n=f|r;var i=[u|n,p|r,u|u,p|f,s|r,u|u,_|n,s|r,_|f,s|f,s|f,_|u,p|n,_|f,p|u,u|n,s|u,u|f,p|r,u|r,_|r,p|u,p|f,_|n,s|n,_|r,_|u,s|n,u|f,p|n,u|r,s|u,p|r,s|u,_|f,u|n,_|u,p|r,s|r,u|u,u|r,_|f,p|n,s|r,s|f,u|r,u|u,p|f,s|n,_|u,s|u,p|n,u|f,_|n,_|r,s|f,p|u,s|n,u|n,p|u,_|n,u|f,p|f,_|r];_=8192,s=1<<23,p=_|s,f=1,r=128,n=f|r;var c=[p|f,_|n,_|n,u|r,p|r,s|n,s|f,_|f,u|u,p|u,p|u,p|n,u|n,u|u,s|r,s|f,u|f,_|u,s|u,p|f,u|r,s|u,_|f,_|r,s|n,u|f,_|r,s|r,_|u,p|r,p|n,u|n,s|r,s|f,p|u,p|n,u|n,u|u,u|u,p|u,_|r,s|r,s|n,u|f,p|f,_|n,_|n,u|r,p|n,u|n,u|f,_|u,s|f,_|f,p|r,s|n,_|f,_|r,s|u,p|f,u|r,s|u,_|u,p|r];_=1<<25,s=1<<30,p=_|s,f=256,r=1<<19,n=f|r;var x=[u|f,_|n,_|r,p|f,u|r,u|f,s|u,_|r,s|n,u|r,_|f,s|n,p|f,p|r,u|n,s|u,_|u,s|r,s|r,u|u,s|f,p|n,p|n,_|f,p|r,s|f,u|u,p|u,_|n,_|u,p|u,u|n,u|r,p|f,u|f,_|u,s|u,_|r,p|f,s|n,_|f,s|u,p|r,_|n,s|n,u|f,_|u,p|r,p|n,u|n,p|u,p|n,_|r,u|u,s|r,p|u,u|n,_|f,s|f,u|r,u|u,s|r,_|n,s|f];_=1<<22,s=1<<29,p=_|s,f=16,r=16384,n=f|r;var v=[s|f,p|u,u|r,p|n,p|u,u|f,p|n,_|u,s|r,_|n,_|u,s|f,_|f,s|r,s|u,u|n,u|u,_|f,s|n,u|r,_|r,s|n,u|f,p|f,p|f,u|u,_|n,p|r,u|n,_|r,p|r,s|u,s|r,u|f,p|f,_|r,p|n,_|u,u|n,s|f,_|u,s|r,s|u,u|n,s|f,p|n,_|r,p|u,_|n,p|r,u|u,p|f,u|f,u|r,p|u,_|n,u|r,_|f,s|n,u|u,p|r,s|u,_|f,s|n];_=1<<21,s=1<<26,p=_|s,f=2,r=2048,n=f|r;var b=[_|u,p|f,s|n,u|u,u|r,s|n,_|n,p|r,p|n,_|u,u|u,s|f,u|f,s|u,p|f,u|n,s|r,_|n,_|f,s|r,s|f,p|u,p|r,_|f,p|u,u|r,u|n,p|n,_|r,u|f,s|u,_|r,s|u,_|r,_|u,s|n,s|n,p|f,p|f,u|f,_|f,s|u,s|r,_|u,p|r,u|n,_|n,p|r,u|n,s|f,p|n,p|u,_|r,u|u,u|f,p|n,u|u,_|n,p|u,u|r,s|f,s|r,u|r,_|f];_=1<<18,s=1<<28,p=_|s,f=64,r=4096,n=f|r;var y=[s|n,u|r,_|u,p|n,s|u,s|n,u|f,s|u,_|f,p|u,p|n,_|r,p|r,_|n,u|r,u|f,p|u,s|f,s|r,u|n,_|r,_|f,p|f,p|r,u|n,u|u,u|u,p|f,s|f,s|r,_|n,_|u,_|n,_|u,p|r,u|r,u|f,p|f,u|r,_|n,s|r,u|f,s|f,p|u,p|f,s|u,_|u,s|n,u|u,p|n,_|f,s|f,p|u,s|r,s|n,u|u,p|n,_|r,_|r,u|n,u|n,_|f,s|u,p|r],g=function(){function S(X){h(this,S),this.keys=[];for(var F=[],T=[],B=[],D=0,N=56;D<56;++D,N-=8){N+=N<-5?65:N<-3?31:N<-1?63:N===27?35:0;var te=N&7;F[D]=(X[N>>>3]&1<<te)!==0?1:0}for(var _e=0;_e<16;++_e){var ge=_e<<1,ve=ge+1;B[ge]=B[ve]=0;for(var Fe=28;Fe<59;Fe+=28)for(var Ae=Fe-28;Ae<Fe;++Ae){var le=Ae+C[_e];T[Ae]=le<Fe?F[le]:F[le-28]}for(var ke=0;ke<24;++ke)T[L[ke]]!==0&&(B[ge]|=1<<23-ke),T[L[ke+24]]!==0&&(B[ve]|=1<<23-ke)}for(var Re=0,De=0,J=0;Re<16;++Re){var $=B[De++],re=B[De++];this.keys[J]=($&16515072)<<6,this.keys[J]|=($&4032)<<10,this.keys[J]|=(re&16515072)>>>10,this.keys[J]|=(re&4032)>>>6,++J,this.keys[J]=($&258048)<<12,this.keys[J]|=($&63)<<16,this.keys[J]|=(re&258048)>>>4,this.keys[J]|=re&63,++J}}return A(S,[{key:"enc8",value:function(F){var T=F.slice(),B=0,D,N,te;D=T[B++]<<24|T[B++]<<16|T[B++]<<8|T[B++],N=T[B++]<<24|T[B++]<<16|T[B++]<<8|T[B++],te=(D>>>4^N)&252645135,N^=te,D^=te<<4,te=(D>>>16^N)&65535,N^=te,D^=te<<16,te=(N>>>2^D)&858993459,D^=te,N^=te<<2,te=(N>>>8^D)&16711935,D^=te,N^=te<<8,N=N<<1|N>>>31&1,te=(D^N)&2863311530,D^=te,N^=te,D=D<<1|D>>>31&1;for(var _e=0,ge=0;_e<8;++_e){te=N<<28|N>>>4,te^=this.keys[ge++];var ve=b[te&63];ve|=x[te>>>8&63],ve|=i[te>>>16&63],ve|=l[te>>>24&63],te=N^this.keys[ge++],ve|=y[te&63],ve|=v[te>>>8&63],ve|=c[te>>>16&63],ve|=a[te>>>24&63],D^=ve,te=D<<28|D>>>4,te^=this.keys[ge++],ve=b[te&63],ve|=x[te>>>8&63],ve|=i[te>>>16&63],ve|=l[te>>>24&63],te=D^this.keys[ge++],ve|=y[te&63],ve|=v[te>>>8&63],ve|=c[te>>>16&63],ve|=a[te>>>24&63],N^=ve}for(N=N<<31|N>>>1,te=(D^N)&2863311530,D^=te,N^=te,D=D<<31|D>>>1,te=(D>>>8^N)&16711935,N^=te,D^=te<<8,te=(D>>>2^N)&858993459,N^=te,D^=te<<2,te=(N>>>16^D)&65535,D^=te,N^=te<<16,te=(N>>>4^D)&252645135,D^=te,N^=te<<4,te=[N,D],B=0;B<8;B++)T[B]=(te[B>>>2]>>>8*(3-B%4))%256,T[B]<0&&(T[B]+=256);return T}}])}();return yt.DESECBCipher=function(){function S(){h(this,S),this._cipher=null}return A(S,[{key:"algorithm",get:function(){return{name:"DES-ECB"}}},{key:"_importKey",value:function(F,T,B){this._cipher=new g(F)}},{key:"encrypt",value:function(F,T){var B=new Uint8Array(T);if(B.length%8!==0||this._cipher===null)return null;for(var D=B.length/8,N=0;N<D;N++)B.set(this._cipher.enc8(B.slice(N*8,N*8+8)),N*8);return B}}],[{key:"importKey",value:function(F,T,B,D){var N=new S;return N._importKey(F),N}}])}(),yt.DESCBCCipher=function(){function S(){h(this,S),this._cipher=null}return A(S,[{key:"algorithm",get:function(){return{name:"DES-CBC"}}},{key:"_importKey",value:function(F){this._cipher=new g(F)}},{key:"encrypt",value:function(F,T){var B=new Uint8Array(T),D=new Uint8Array(F.iv);if(B.length%8!==0||this._cipher===null)return null;for(var N=B.length/8,te=0;te<N;te++){for(var _e=0;_e<8;_e++)D[_e]^=T[te*8+_e];D=this._cipher.enc8(D),B.set(D,te*8)}return B}}],[{key:"importKey",value:function(F,T,B,D){var N=new S;return N._importKey(F),N}}])}(),yt}var Et={},wt={},on;function sn(){if(on)return wt;on=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.bigIntToU8Array=h,wt.modPow=P,wt.u8ArrayToBigInt=Y;function P(A,K,Q){var L=1n;for(A=A%Q;K>0n;)(K&1n)===1n&&(L=L*A%Q),K=K>>1n,A=A*A%Q;return L}function h(A){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Q=A.toString(16);K===0&&(K=Math.ceil(Q.length/2)),Q=Q.padStart(K*2,"0");for(var L=Q.length/2,C=new Uint8Array(L),u=0;u<L;u++)C[u]=parseInt(Q.slice(u*2,u*2+2),16);return C}function Y(A){for(var K="0x",Q=0;Q<A.length;Q++)K+=A[Q].toString(16).padStart(2,"0");return BigInt(K)}return wt}var un;function Vn(){if(un)return Et;un=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.RSACipher=void 0;var P=Y(Fr()),h=sn();function Y(f){return f&&f.__esModule?f:{default:f}}function A(f){"@babel/helpers - typeof";return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},A(f)}function K(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */K=function(){return r};var f,r={},n=Object.prototype,l=n.hasOwnProperty,a=Object.defineProperty||function(G,O,I){G[O]=I.value},i=typeof Symbol=="function"?Symbol:{},c=i.iterator||"@@iterator",x=i.asyncIterator||"@@asyncIterator",v=i.toStringTag||"@@toStringTag";function b(G,O,I){return Object.defineProperty(G,O,{value:I,enumerable:!0,configurable:!0,writable:!0}),G[O]}try{b({},"")}catch{b=function(I,se,ue){return I[se]=ue}}function y(G,O,I,se){var ue=O&&O.prototype instanceof D?O:D,j=Object.create(ue.prototype),W=new $(se||[]);return a(j,"_invoke",{value:ke(G,I,W)}),j}function g(G,O,I){try{return{type:"normal",arg:G.call(O,I)}}catch(se){return{type:"throw",arg:se}}}r.wrap=y;var S="suspendedStart",X="suspendedYield",F="executing",T="completed",B={};function D(){}function N(){}function te(){}var _e={};b(_e,c,function(){return this});var ge=Object.getPrototypeOf,ve=ge&&ge(ge(re([])));ve&&ve!==n&&l.call(ve,c)&&(_e=ve);var Fe=te.prototype=D.prototype=Object.create(_e);function Ae(G){["next","throw","return"].forEach(function(O){b(G,O,function(I){return this._invoke(O,I)})})}function le(G,O){function I(ue,j,W,ee){var ne=g(G[ue],G,j);if(ne.type!=="throw"){var be=ne.arg,V=be.value;return V&&A(V)=="object"&&l.call(V,"__await")?O.resolve(V.__await).then(function(q){I("next",q,W,ee)},function(q){I("throw",q,W,ee)}):O.resolve(V).then(function(q){be.value=q,W(be)},function(q){return I("throw",q,W,ee)})}ee(ne.arg)}var se;a(this,"_invoke",{value:function(j,W){function ee(){return new O(function(ne,be){I(j,W,ne,be)})}return se=se?se.then(ee,ee):ee()}})}function ke(G,O,I){var se=S;return function(ue,j){if(se===F)throw Error("Generator is already running");if(se===T){if(ue==="throw")throw j;return{value:f,done:!0}}for(I.method=ue,I.arg=j;;){var W=I.delegate;if(W){var ee=Re(W,I);if(ee){if(ee===B)continue;return ee}}if(I.method==="next")I.sent=I._sent=I.arg;else if(I.method==="throw"){if(se===S)throw se=T,I.arg;I.dispatchException(I.arg)}else I.method==="return"&&I.abrupt("return",I.arg);se=F;var ne=g(G,O,I);if(ne.type==="normal"){if(se=I.done?T:X,ne.arg===B)continue;return{value:ne.arg,done:I.done}}ne.type==="throw"&&(se=T,I.method="throw",I.arg=ne.arg)}}}function Re(G,O){var I=O.method,se=G.iterator[I];if(se===f)return O.delegate=null,I==="throw"&&G.iterator.return&&(O.method="return",O.arg=f,Re(G,O),O.method==="throw")||I!=="return"&&(O.method="throw",O.arg=new TypeError("The iterator does not provide a '"+I+"' method")),B;var ue=g(se,G.iterator,O.arg);if(ue.type==="throw")return O.method="throw",O.arg=ue.arg,O.delegate=null,B;var j=ue.arg;return j?j.done?(O[G.resultName]=j.value,O.next=G.nextLoc,O.method!=="return"&&(O.method="next",O.arg=f),O.delegate=null,B):j:(O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,B)}function De(G){var O={tryLoc:G[0]};1 in G&&(O.catchLoc=G[1]),2 in G&&(O.finallyLoc=G[2],O.afterLoc=G[3]),this.tryEntries.push(O)}function J(G){var O=G.completion||{};O.type="normal",delete O.arg,G.completion=O}function $(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(De,this),this.reset(!0)}function re(G){if(G||G===""){var O=G[c];if(O)return O.call(G);if(typeof G.next=="function")return G;if(!isNaN(G.length)){var I=-1,se=function ue(){for(;++I<G.length;)if(l.call(G,I))return ue.value=G[I],ue.done=!1,ue;return ue.value=f,ue.done=!0,ue};return se.next=se}}throw new TypeError(A(G)+" is not iterable")}return N.prototype=te,a(Fe,"constructor",{value:te,configurable:!0}),a(te,"constructor",{value:N,configurable:!0}),N.displayName=b(te,v,"GeneratorFunction"),r.isGeneratorFunction=function(G){var O=typeof G=="function"&&G.constructor;return!!O&&(O===N||(O.displayName||O.name)==="GeneratorFunction")},r.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,te):(G.__proto__=te,b(G,v,"GeneratorFunction")),G.prototype=Object.create(Fe),G},r.awrap=function(G){return{__await:G}},Ae(le.prototype),b(le.prototype,x,function(){return this}),r.AsyncIterator=le,r.async=function(G,O,I,se,ue){ue===void 0&&(ue=Promise);var j=new le(y(G,O,I,se),ue);return r.isGeneratorFunction(O)?j:j.next().then(function(W){return W.done?W.value:j.next()})},Ae(Fe),b(Fe,v,"Generator"),b(Fe,c,function(){return this}),b(Fe,"toString",function(){return"[object Generator]"}),r.keys=function(G){var O=Object(G),I=[];for(var se in O)I.push(se);return I.reverse(),function ue(){for(;I.length;){var j=I.pop();if(j in O)return ue.value=j,ue.done=!1,ue}return ue.done=!0,ue}},r.values=re,$.prototype={constructor:$,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(J),!O)for(var I in this)I.charAt(0)==="t"&&l.call(this,I)&&!isNaN(+I.slice(1))&&(this[I]=f)},stop:function(){this.done=!0;var O=this.tryEntries[0].completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var I=this;function se(be,V){return W.type="throw",W.arg=O,I.next=be,V&&(I.method="next",I.arg=f),!!V}for(var ue=this.tryEntries.length-1;ue>=0;--ue){var j=this.tryEntries[ue],W=j.completion;if(j.tryLoc==="root")return se("end");if(j.tryLoc<=this.prev){var ee=l.call(j,"catchLoc"),ne=l.call(j,"finallyLoc");if(ee&&ne){if(this.prev<j.catchLoc)return se(j.catchLoc,!0);if(this.prev<j.finallyLoc)return se(j.finallyLoc)}else if(ee){if(this.prev<j.catchLoc)return se(j.catchLoc,!0)}else{if(!ne)throw Error("try statement without catch or finally");if(this.prev<j.finallyLoc)return se(j.finallyLoc)}}}},abrupt:function(O,I){for(var se=this.tryEntries.length-1;se>=0;--se){var ue=this.tryEntries[se];if(ue.tryLoc<=this.prev&&l.call(ue,"finallyLoc")&&this.prev<ue.finallyLoc){var j=ue;break}}j&&(O==="break"||O==="continue")&&j.tryLoc<=I&&I<=j.finallyLoc&&(j=null);var W=j?j.completion:{};return W.type=O,W.arg=I,j?(this.method="next",this.next=j.finallyLoc,B):this.complete(W)},complete:function(O,I){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&I&&(this.next=I),B},finish:function(O){for(var I=this.tryEntries.length-1;I>=0;--I){var se=this.tryEntries[I];if(se.finallyLoc===O)return this.complete(se.completion,se.afterLoc),J(se),B}},catch:function(O){for(var I=this.tryEntries.length-1;I>=0;--I){var se=this.tryEntries[I];if(se.tryLoc===O){var ue=se.completion;if(ue.type==="throw"){var j=ue.arg;J(se)}return j}}throw Error("illegal catch attempt")},delegateYield:function(O,I,se){return this.delegate={iterator:re(O),resultName:I,nextLoc:se},this.method==="next"&&(this.arg=f),B}},r}function Q(f,r,n,l,a,i,c){try{var x=f[i](c),v=x.value}catch(b){return void n(b)}x.done?r(v):Promise.resolve(v).then(l,a)}function L(f){return function(){var r=this,n=arguments;return new Promise(function(l,a){var i=f.apply(r,n);function c(v){Q(i,l,a,c,x,"next",v)}function x(v){Q(i,l,a,c,x,"throw",v)}c(void 0)})}}function C(f,r){if(!(f instanceof r))throw new TypeError("Cannot call a class as a function")}function u(f,r){for(var n=0;n<r.length;n++){var l=r[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(f,s(l.key),l)}}function _(f,r,n){return r&&u(f.prototype,r),n&&u(f,n),Object.defineProperty(f,"prototype",{writable:!1}),f}function s(f){var r=p(f,"string");return A(r)=="symbol"?r:r+""}function p(f,r){if(A(f)!="object"||!f)return f;var n=f[Symbol.toPrimitive];if(n!==void 0){var l=n.call(f,r);if(A(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}return Et.RSACipher=function(){function f(){C(this,f),this._keyLength=0,this._keyBytes=0,this._n=null,this._e=null,this._d=null,this._nBigInt=null,this._eBigInt=null,this._dBigInt=null,this._extractable=!1}return _(f,[{key:"algorithm",get:function(){return{name:"RSA-PKCS1-v1_5"}}},{key:"_base64urlDecode",value:function(n){return n=n.replace(/-/g,"+").replace(/_/g,"/"),n=n.padEnd(Math.ceil(n.length/4)*4,"="),P.default.decode(n)}},{key:"_padArray",value:function(n,l){var a=new Uint8Array(l);return a.set(n,l-n.length),a}},{key:"_generateKey",value:function(){var r=L(K().mark(function l(a,i){var c,x;return K().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return this._keyLength=a.modulusLength,this._keyBytes=Math.ceil(this._keyLength/8),b.next=4,window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:a.modulusLength,publicExponent:a.publicExponent,hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]);case 4:return c=b.sent,b.next=7,window.crypto.subtle.exportKey("jwk",c.privateKey);case 7:x=b.sent,this._n=this._padArray(this._base64urlDecode(x.n),this._keyBytes),this._nBigInt=(0,h.u8ArrayToBigInt)(this._n),this._e=this._padArray(this._base64urlDecode(x.e),this._keyBytes),this._eBigInt=(0,h.u8ArrayToBigInt)(this._e),this._d=this._padArray(this._base64urlDecode(x.d),this._keyBytes),this._dBigInt=(0,h.u8ArrayToBigInt)(this._d),this._extractable=i;case 15:case"end":return b.stop()}},l,this)}));function n(l,a){return r.apply(this,arguments)}return n}()},{key:"_importKey",value:function(){var r=L(K().mark(function l(a,i){var c,x;return K().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c=a.n,x=a.e,c.length===x.length){b.next=4;break}throw new Error("the sizes of modulus and public exponent do not match");case 4:this._keyBytes=c.length,this._keyLength=this._keyBytes*8,this._n=new Uint8Array(this._keyBytes),this._e=new Uint8Array(this._keyBytes),this._n.set(c),this._e.set(x),this._nBigInt=(0,h.u8ArrayToBigInt)(this._n),this._eBigInt=(0,h.u8ArrayToBigInt)(this._e),this._extractable=i;case 13:case"end":return b.stop()}},l,this)}));function n(l,a){return r.apply(this,arguments)}return n}()},{key:"encrypt",value:function(){var r=L(K().mark(function l(a,i){var c,x,v,b,y;return K().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(i.length>this._keyBytes-11)){S.next=2;break}return S.abrupt("return",null);case 2:for(c=new Uint8Array(this._keyBytes-i.length-3),window.crypto.getRandomValues(c),x=0;x<c.length;x++)c[x]=Math.floor(c[x]*254/255+1);return v=new Uint8Array(this._keyBytes),v[1]=2,v.set(c,2),v.set(i,c.length+3),b=(0,h.u8ArrayToBigInt)(v),y=(0,h.modPow)(b,this._eBigInt,this._nBigInt),S.abrupt("return",(0,h.bigIntToU8Array)(y,this._keyBytes));case 12:case"end":return S.stop()}},l,this)}));function n(l,a){return r.apply(this,arguments)}return n}()},{key:"decrypt",value:function(){var r=L(K().mark(function l(a,i){var c,x,v,b;return K().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(i.length===this._keyBytes){g.next=2;break}return g.abrupt("return",null);case 2:if(c=(0,h.u8ArrayToBigInt)(i),x=(0,h.modPow)(c,this._dBigInt,this._nBigInt),v=(0,h.bigIntToU8Array)(x,this._keyBytes),!(v[0]!==0||v[1]!==2)){g.next=7;break}return g.abrupt("return",null);case 7:b=2;case 8:if(!(b<v.length)){g.next=14;break}if(v[b]!==0){g.next=11;break}return g.abrupt("break",14);case 11:b++,g.next=8;break;case 14:if(b!==v.length){g.next=16;break}return g.abrupt("return",null);case 16:return g.abrupt("return",v.slice(b+1,v.length));case 17:case"end":return g.stop()}},l,this)}));function n(l,a){return r.apply(this,arguments)}return n}()},{key:"exportKey",value:function(){var r=L(K().mark(function l(){return K().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this._extractable){i.next=2;break}throw new Error("key is not extractable");case 2:return i.abrupt("return",{n:this._n,e:this._e,d:this._d});case 3:case"end":return i.stop()}},l,this)}));function n(){return r.apply(this,arguments)}return n}()}],[{key:"generateKey",value:function(){var r=L(K().mark(function l(a,i,c){var x;return K().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return x=new f,b.next=3,x._generateKey(a,i);case 3:return b.abrupt("return",{privateKey:x});case 4:case"end":return b.stop()}},l)}));function n(l,a,i){return r.apply(this,arguments)}return n}()},{key:"importKey",value:function(){var r=L(K().mark(function l(a,i,c,x){var v;return K().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(x.length!==1||x[0]!=="encrypt")){y.next=2;break}throw new Error("only support importing RSA public key");case 2:return v=new f,y.next=5,v._importKey(a,c);case 5:return y.abrupt("return",v);case 6:case"end":return y.stop()}},l)}));function n(l,a,i,c){return r.apply(this,arguments)}return n}()}])}(),Et}var Xt={},ln;function Zn(){if(ln)return Xt;ln=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.DHCipher=void 0;var P=sn();function h(u){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},h(u)}function Y(u,_){if(!(u instanceof _))throw new TypeError("Cannot call a class as a function")}function A(u,_){for(var s=0;s<_.length;s++){var p=_[s];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,Q(p.key),p)}}function K(u,_,s){return _&&A(u.prototype,_),s&&A(u,s),Object.defineProperty(u,"prototype",{writable:!1}),u}function Q(u){var _=L(u,"string");return h(_)=="symbol"?_:_+""}function L(u,_){if(h(u)!="object"||!u)return u;var s=u[Symbol.toPrimitive];if(s!==void 0){var p=s.call(u,_);if(h(p)!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}var C=function(){function u(_){Y(this,u),this._key=_}return K(u,[{key:"algorithm",get:function(){return{name:"DH"}}},{key:"exportKey",value:function(){return this._key}}])}();return Xt.DHCipher=function(){function u(){Y(this,u),this._g=null,this._p=null,this._gBigInt=null,this._pBigInt=null,this._privateKey=null}return K(u,[{key:"algorithm",get:function(){return{name:"DH"}}},{key:"_generateKey",value:function(s){var p=s.g,f=s.p;this._keyBytes=f.length,this._gBigInt=(0,P.u8ArrayToBigInt)(p),this._pBigInt=(0,P.u8ArrayToBigInt)(f),this._privateKey=window.crypto.getRandomValues(new Uint8Array(this._keyBytes)),this._privateKeyBigInt=(0,P.u8ArrayToBigInt)(this._privateKey),this._publicKey=(0,P.bigIntToU8Array)((0,P.modPow)(this._gBigInt,this._privateKeyBigInt,this._pBigInt),this._keyBytes)}},{key:"deriveBits",value:function(s,p){var f=Math.ceil(p/8),r=new Uint8Array(s.public),n=f>this._keyBytes?f:this._keyBytes,l=(0,P.modPow)((0,P.u8ArrayToBigInt)(r),this._privateKeyBigInt,this._pBigInt);return(0,P.bigIntToU8Array)(l,n).slice(0,n)}}],[{key:"generateKey",value:function(s,p){var f=new u;return f._generateKey(s),{privateKey:f,publicKey:new C(f._publicKey)}}}])}(),Xt}var Tt={},fn;function Yn(){if(fn)return Tt;fn=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.MD5=K;function P(i){"@babel/helpers - typeof";return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},P(i)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return c};var i,c={},x=Object.prototype,v=x.hasOwnProperty,b=Object.defineProperty||function(j,W,ee){j[W]=ee.value},y=typeof Symbol=="function"?Symbol:{},g=y.iterator||"@@iterator",S=y.asyncIterator||"@@asyncIterator",X=y.toStringTag||"@@toStringTag";function F(j,W,ee){return Object.defineProperty(j,W,{value:ee,enumerable:!0,configurable:!0,writable:!0}),j[W]}try{F({},"")}catch{F=function(ee,ne,be){return ee[ne]=be}}function T(j,W,ee,ne){var be=W&&W.prototype instanceof ve?W:ve,V=Object.create(be.prototype),q=new se(ne||[]);return b(V,"_invoke",{value:re(j,ee,q)}),V}function B(j,W,ee){try{return{type:"normal",arg:j.call(W,ee)}}catch(ne){return{type:"throw",arg:ne}}}c.wrap=T;var D="suspendedStart",N="suspendedYield",te="executing",_e="completed",ge={};function ve(){}function Fe(){}function Ae(){}var le={};F(le,g,function(){return this});var ke=Object.getPrototypeOf,Re=ke&&ke(ke(ue([])));Re&&Re!==x&&v.call(Re,g)&&(le=Re);var De=Ae.prototype=ve.prototype=Object.create(le);function J(j){["next","throw","return"].forEach(function(W){F(j,W,function(ee){return this._invoke(W,ee)})})}function $(j,W){function ee(be,V,q,ie){var ce=B(j[be],j,V);if(ce.type!=="throw"){var he=ce.arg,H=he.value;return H&&P(H)=="object"&&v.call(H,"__await")?W.resolve(H.__await).then(function(we){ee("next",we,q,ie)},function(we){ee("throw",we,q,ie)}):W.resolve(H).then(function(we){he.value=we,q(he)},function(we){return ee("throw",we,q,ie)})}ie(ce.arg)}var ne;b(this,"_invoke",{value:function(V,q){function ie(){return new W(function(ce,he){ee(V,q,ce,he)})}return ne=ne?ne.then(ie,ie):ie()}})}function re(j,W,ee){var ne=D;return function(be,V){if(ne===te)throw Error("Generator is already running");if(ne===_e){if(be==="throw")throw V;return{value:i,done:!0}}for(ee.method=be,ee.arg=V;;){var q=ee.delegate;if(q){var ie=G(q,ee);if(ie){if(ie===ge)continue;return ie}}if(ee.method==="next")ee.sent=ee._sent=ee.arg;else if(ee.method==="throw"){if(ne===D)throw ne=_e,ee.arg;ee.dispatchException(ee.arg)}else ee.method==="return"&&ee.abrupt("return",ee.arg);ne=te;var ce=B(j,W,ee);if(ce.type==="normal"){if(ne=ee.done?_e:N,ce.arg===ge)continue;return{value:ce.arg,done:ee.done}}ce.type==="throw"&&(ne=_e,ee.method="throw",ee.arg=ce.arg)}}}function G(j,W){var ee=W.method,ne=j.iterator[ee];if(ne===i)return W.delegate=null,ee==="throw"&&j.iterator.return&&(W.method="return",W.arg=i,G(j,W),W.method==="throw")||ee!=="return"&&(W.method="throw",W.arg=new TypeError("The iterator does not provide a '"+ee+"' method")),ge;var be=B(ne,j.iterator,W.arg);if(be.type==="throw")return W.method="throw",W.arg=be.arg,W.delegate=null,ge;var V=be.arg;return V?V.done?(W[j.resultName]=V.value,W.next=j.nextLoc,W.method!=="return"&&(W.method="next",W.arg=i),W.delegate=null,ge):V:(W.method="throw",W.arg=new TypeError("iterator result is not an object"),W.delegate=null,ge)}function O(j){var W={tryLoc:j[0]};1 in j&&(W.catchLoc=j[1]),2 in j&&(W.finallyLoc=j[2],W.afterLoc=j[3]),this.tryEntries.push(W)}function I(j){var W=j.completion||{};W.type="normal",delete W.arg,j.completion=W}function se(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(O,this),this.reset(!0)}function ue(j){if(j||j===""){var W=j[g];if(W)return W.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var ee=-1,ne=function be(){for(;++ee<j.length;)if(v.call(j,ee))return be.value=j[ee],be.done=!1,be;return be.value=i,be.done=!0,be};return ne.next=ne}}throw new TypeError(P(j)+" is not iterable")}return Fe.prototype=Ae,b(De,"constructor",{value:Ae,configurable:!0}),b(Ae,"constructor",{value:Fe,configurable:!0}),Fe.displayName=F(Ae,X,"GeneratorFunction"),c.isGeneratorFunction=function(j){var W=typeof j=="function"&&j.constructor;return!!W&&(W===Fe||(W.displayName||W.name)==="GeneratorFunction")},c.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,Ae):(j.__proto__=Ae,F(j,X,"GeneratorFunction")),j.prototype=Object.create(De),j},c.awrap=function(j){return{__await:j}},J($.prototype),F($.prototype,S,function(){return this}),c.AsyncIterator=$,c.async=function(j,W,ee,ne,be){be===void 0&&(be=Promise);var V=new $(T(j,W,ee,ne),be);return c.isGeneratorFunction(W)?V:V.next().then(function(q){return q.done?q.value:V.next()})},J(De),F(De,X,"Generator"),F(De,g,function(){return this}),F(De,"toString",function(){return"[object Generator]"}),c.keys=function(j){var W=Object(j),ee=[];for(var ne in W)ee.push(ne);return ee.reverse(),function be(){for(;ee.length;){var V=ee.pop();if(V in W)return be.value=V,be.done=!1,be}return be.done=!0,be}},c.values=ue,se.prototype={constructor:se,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(I),!W)for(var ee in this)ee.charAt(0)==="t"&&v.call(this,ee)&&!isNaN(+ee.slice(1))&&(this[ee]=i)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var ee=this;function ne(he,H){return q.type="throw",q.arg=W,ee.next=he,H&&(ee.method="next",ee.arg=i),!!H}for(var be=this.tryEntries.length-1;be>=0;--be){var V=this.tryEntries[be],q=V.completion;if(V.tryLoc==="root")return ne("end");if(V.tryLoc<=this.prev){var ie=v.call(V,"catchLoc"),ce=v.call(V,"finallyLoc");if(ie&&ce){if(this.prev<V.catchLoc)return ne(V.catchLoc,!0);if(this.prev<V.finallyLoc)return ne(V.finallyLoc)}else if(ie){if(this.prev<V.catchLoc)return ne(V.catchLoc,!0)}else{if(!ce)throw Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return ne(V.finallyLoc)}}}},abrupt:function(W,ee){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var be=this.tryEntries[ne];if(be.tryLoc<=this.prev&&v.call(be,"finallyLoc")&&this.prev<be.finallyLoc){var V=be;break}}V&&(W==="break"||W==="continue")&&V.tryLoc<=ee&&ee<=V.finallyLoc&&(V=null);var q=V?V.completion:{};return q.type=W,q.arg=ee,V?(this.method="next",this.next=V.finallyLoc,ge):this.complete(q)},complete:function(W,ee){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&ee&&(this.next=ee),ge},finish:function(W){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var ne=this.tryEntries[ee];if(ne.finallyLoc===W)return this.complete(ne.completion,ne.afterLoc),I(ne),ge}},catch:function(W){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var ne=this.tryEntries[ee];if(ne.tryLoc===W){var be=ne.completion;if(be.type==="throw"){var V=be.arg;I(ne)}return V}}throw Error("illegal catch attempt")},delegateYield:function(W,ee,ne){return this.delegate={iterator:ue(W),resultName:ee,nextLoc:ne},this.method==="next"&&(this.arg=i),ge}},c}function Y(i,c,x,v,b,y,g){try{var S=i[y](g),X=S.value}catch(F){return void x(F)}S.done?c(X):Promise.resolve(X).then(v,b)}function A(i){return function(){var c=this,x=arguments;return new Promise(function(v,b){var y=i.apply(c,x);function g(X){Y(y,v,b,g,S,"next",X)}function S(X){Y(y,v,b,g,S,"throw",X)}g(void 0)})}}function K(i){return Q.apply(this,arguments)}function Q(){return Q=A(h().mark(function i(c){var x,v;return h().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:for(x="",v=0;v<c.length;v++)x+=String.fromCharCode(c[v]);return y.abrupt("return",L(u(_(C(x),8*x.length))));case 3:case"end":return y.stop()}},i)})),Q.apply(this,arguments)}function L(i){for(var c=new Uint8Array(i.length),x=0;x<i.length;x++)c[x]=i.charCodeAt(x);return c}function C(i){for(var c=Array(i.length>>2),x=0;x<c.length;x++)c[x]=0;for(var v=0;v<8*i.length;v+=8)c[v>>5]|=(255&i.charCodeAt(v/8))<<v%32;return c}function u(i){for(var c="",x=0;x<32*i.length;x+=8)c+=String.fromCharCode(i[x>>5]>>>x%32&255);return c}function _(i,c){i[c>>5]|=128<<c%32,i[14+(c+64>>>9<<4)]=c;for(var x=1732584193,v=-271733879,b=-1732584194,y=271733878,g=0;g<i.length;g+=16){var S=x,X=v,F=b,T=y;v=n(v=n(v=n(v=n(v=r(v=r(v=r(v=r(v=f(v=f(v=f(v=f(v=p(v=p(v=p(v=p(v,b=p(b,y=p(y,x=p(x,v,b,y,i[g+0],7,-680876936),v,b,i[g+1],12,-389564586),x,v,i[g+2],17,606105819),y,x,i[g+3],22,-1044525330),b=p(b,y=p(y,x=p(x,v,b,y,i[g+4],7,-176418897),v,b,i[g+5],12,1200080426),x,v,i[g+6],17,-1473231341),y,x,i[g+7],22,-45705983),b=p(b,y=p(y,x=p(x,v,b,y,i[g+8],7,1770035416),v,b,i[g+9],12,-1958414417),x,v,i[g+10],17,-42063),y,x,i[g+11],22,-1990404162),b=p(b,y=p(y,x=p(x,v,b,y,i[g+12],7,1804603682),v,b,i[g+13],12,-40341101),x,v,i[g+14],17,-1502002290),y,x,i[g+15],22,1236535329),b=f(b,y=f(y,x=f(x,v,b,y,i[g+1],5,-165796510),v,b,i[g+6],9,-1069501632),x,v,i[g+11],14,643717713),y,x,i[g+0],20,-373897302),b=f(b,y=f(y,x=f(x,v,b,y,i[g+5],5,-701558691),v,b,i[g+10],9,38016083),x,v,i[g+15],14,-660478335),y,x,i[g+4],20,-405537848),b=f(b,y=f(y,x=f(x,v,b,y,i[g+9],5,568446438),v,b,i[g+14],9,-1019803690),x,v,i[g+3],14,-187363961),y,x,i[g+8],20,1163531501),b=f(b,y=f(y,x=f(x,v,b,y,i[g+13],5,-1444681467),v,b,i[g+2],9,-51403784),x,v,i[g+7],14,1735328473),y,x,i[g+12],20,-1926607734),b=r(b,y=r(y,x=r(x,v,b,y,i[g+5],4,-378558),v,b,i[g+8],11,-2022574463),x,v,i[g+11],16,1839030562),y,x,i[g+14],23,-35309556),b=r(b,y=r(y,x=r(x,v,b,y,i[g+1],4,-1530992060),v,b,i[g+4],11,1272893353),x,v,i[g+7],16,-155497632),y,x,i[g+10],23,-1094730640),b=r(b,y=r(y,x=r(x,v,b,y,i[g+13],4,681279174),v,b,i[g+0],11,-358537222),x,v,i[g+3],16,-722521979),y,x,i[g+6],23,76029189),b=r(b,y=r(y,x=r(x,v,b,y,i[g+9],4,-640364487),v,b,i[g+12],11,-421815835),x,v,i[g+15],16,530742520),y,x,i[g+2],23,-995338651),b=n(b,y=n(y,x=n(x,v,b,y,i[g+0],6,-198630844),v,b,i[g+7],10,1126891415),x,v,i[g+14],15,-1416354905),y,x,i[g+5],21,-57434055),b=n(b,y=n(y,x=n(x,v,b,y,i[g+12],6,1700485571),v,b,i[g+3],10,-1894986606),x,v,i[g+10],15,-1051523),y,x,i[g+1],21,-2054922799),b=n(b,y=n(y,x=n(x,v,b,y,i[g+8],6,1873313359),v,b,i[g+15],10,-30611744),x,v,i[g+6],15,-1560198380),y,x,i[g+13],21,1309151649),b=n(b,y=n(y,x=n(x,v,b,y,i[g+4],6,-145523070),v,b,i[g+11],10,-1120210379),x,v,i[g+2],15,718787259),y,x,i[g+9],21,-343485551),x=l(x,S),v=l(v,X),b=l(b,F),y=l(y,T)}return Array(x,v,b,y)}function s(i,c,x,v,b,y){return l(a(l(l(c,i),l(v,y)),b),x)}function p(i,c,x,v,b,y,g){return s(c&x|~c&v,i,c,b,y,g)}function f(i,c,x,v,b,y,g){return s(c&v|x&~v,i,c,b,y,g)}function r(i,c,x,v,b,y,g){return s(c^x^v,i,c,b,y,g)}function n(i,c,x,v,b,y,g){return s(x^(c|~v),i,c,b,y,g)}function l(i,c){var x=(65535&i)+(65535&c);return(i>>16)+(c>>16)+(x>>16)<<16|65535&x}function a(i,c){return i<<c|i>>>32-c}return Tt}var cn;function hn(){return cn||(cn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=qn(),Y=Wn(),A=Vn(),K=Zn(),Q=Yn();function L(r){"@babel/helpers - typeof";return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},L(r)}function C(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function u(r,n){for(var l=0;l<n.length;l++){var a=n[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,s(a.key),a)}}function _(r,n,l){return n&&u(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function s(r){var n=p(r,"string");return L(n)=="symbol"?n:n+""}function p(r,n){if(L(r)!="object"||!r)return r;var l=r[Symbol.toPrimitive];if(l!==void 0){var a=l.call(r,n);if(L(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var f=function(){function r(){C(this,r),this._algorithms={"AES-ECB":h.AESECBCipher,"AES-EAX":h.AESEAXCipher,"DES-ECB":Y.DESECBCipher,"DES-CBC":Y.DESCBCCipher,"RSA-PKCS1-v1_5":A.RSACipher,DH:K.DHCipher,MD5:Q.MD5}}return _(r,[{key:"encrypt",value:function(l,a,i){if(a.algorithm.name!==l.name)throw new Error("algorithm does not match");if(typeof a.encrypt!="function")throw new Error("key does not support encryption");return a.encrypt(l,i)}},{key:"decrypt",value:function(l,a,i){if(a.algorithm.name!==l.name)throw new Error("algorithm does not match");if(typeof a.decrypt!="function")throw new Error("key does not support encryption");return a.decrypt(l,i)}},{key:"importKey",value:function(l,a,i,c,x){if(l!=="raw")throw new Error("key format is not supported");var v=this._algorithms[i.name];if(typeof v>"u"||typeof v.importKey!="function")throw new Error("algorithm is not supported");return v.importKey(a,i,c,x)}},{key:"generateKey",value:function(l,a,i){var c=this._algorithms[l.name];if(typeof c>"u"||typeof c.generateKey!="function")throw new Error("algorithm is not supported");return c.generateKey(l,a,i)}},{key:"exportKey",value:function(l,a){if(l!=="raw")throw new Error("key format is not supported");if(typeof a.exportKey!="function")throw new Error("key does not support exportKey");return a.exportKey()}},{key:"digest",value:function(l,a){var i=this._algorithms[l];if(typeof i!="function")throw new Error("algorithm is not supported");return i(a)}},{key:"deriveBits",value:function(l,a,i){if(a.algorithm.name!==l.name)throw new Error("algorithm does not match");if(typeof a.deriveBits!="function")throw new Error("key does not support deriveBits");return a.deriveBits(l,i)}}])}();P.default=new f}(ir)),ir}var dn;function $n(){return dn||(dn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=br(),Y=K(Er()),A=K(hn());function K(y){return y&&y.__esModule?y:{default:y}}function Q(y,g,S){return g=_(g),L(y,u()?Reflect.construct(g,[],_(y).constructor):g.apply(y,S))}function L(y,g){if(g&&(f(g)=="object"||typeof g=="function"))return g;if(g!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(y)}function C(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function u(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u=function(){return!!y})()}function _(y){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},_(y)}function s(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),g&&p(y,g)}function p(y,g){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,X){return S.__proto__=X,S},p(y,g)}function f(y){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},f(y)}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */r=function(){return g};var y,g={},S=Object.prototype,X=S.hasOwnProperty,F=Object.defineProperty||function(V,q,ie){V[q]=ie.value},T=typeof Symbol=="function"?Symbol:{},B=T.iterator||"@@iterator",D=T.asyncIterator||"@@asyncIterator",N=T.toStringTag||"@@toStringTag";function te(V,q,ie){return Object.defineProperty(V,q,{value:ie,enumerable:!0,configurable:!0,writable:!0}),V[q]}try{te({},"")}catch{te=function(ie,ce,he){return ie[ce]=he}}function _e(V,q,ie,ce){var he=q&&q.prototype instanceof Re?q:Re,H=Object.create(he.prototype),we=new ne(ce||[]);return F(H,"_invoke",{value:ue(V,ie,we)}),H}function ge(V,q,ie){try{return{type:"normal",arg:V.call(q,ie)}}catch(ce){return{type:"throw",arg:ce}}}g.wrap=_e;var ve="suspendedStart",Fe="suspendedYield",Ae="executing",le="completed",ke={};function Re(){}function De(){}function J(){}var $={};te($,B,function(){return this});var re=Object.getPrototypeOf,G=re&&re(re(be([])));G&&G!==S&&X.call(G,B)&&($=G);var O=J.prototype=Re.prototype=Object.create($);function I(V){["next","throw","return"].forEach(function(q){te(V,q,function(ie){return this._invoke(q,ie)})})}function se(V,q){function ie(he,H,we,je){var ze=ge(V[he],V,H);if(ze.type!=="throw"){var xe=ze.arg,Ve=xe.value;return Ve&&f(Ve)=="object"&&X.call(Ve,"__await")?q.resolve(Ve.__await).then(function(Ze){ie("next",Ze,we,je)},function(Ze){ie("throw",Ze,we,je)}):q.resolve(Ve).then(function(Ze){xe.value=Ze,we(xe)},function(Ze){return ie("throw",Ze,we,je)})}je(ze.arg)}var ce;F(this,"_invoke",{value:function(H,we){function je(){return new q(function(ze,xe){ie(H,we,ze,xe)})}return ce=ce?ce.then(je,je):je()}})}function ue(V,q,ie){var ce=ve;return function(he,H){if(ce===Ae)throw Error("Generator is already running");if(ce===le){if(he==="throw")throw H;return{value:y,done:!0}}for(ie.method=he,ie.arg=H;;){var we=ie.delegate;if(we){var je=j(we,ie);if(je){if(je===ke)continue;return je}}if(ie.method==="next")ie.sent=ie._sent=ie.arg;else if(ie.method==="throw"){if(ce===ve)throw ce=le,ie.arg;ie.dispatchException(ie.arg)}else ie.method==="return"&&ie.abrupt("return",ie.arg);ce=Ae;var ze=ge(V,q,ie);if(ze.type==="normal"){if(ce=ie.done?le:Fe,ze.arg===ke)continue;return{value:ze.arg,done:ie.done}}ze.type==="throw"&&(ce=le,ie.method="throw",ie.arg=ze.arg)}}}function j(V,q){var ie=q.method,ce=V.iterator[ie];if(ce===y)return q.delegate=null,ie==="throw"&&V.iterator.return&&(q.method="return",q.arg=y,j(V,q),q.method==="throw")||ie!=="return"&&(q.method="throw",q.arg=new TypeError("The iterator does not provide a '"+ie+"' method")),ke;var he=ge(ce,V.iterator,q.arg);if(he.type==="throw")return q.method="throw",q.arg=he.arg,q.delegate=null,ke;var H=he.arg;return H?H.done?(q[V.resultName]=H.value,q.next=V.nextLoc,q.method!=="return"&&(q.method="next",q.arg=y),q.delegate=null,ke):H:(q.method="throw",q.arg=new TypeError("iterator result is not an object"),q.delegate=null,ke)}function W(V){var q={tryLoc:V[0]};1 in V&&(q.catchLoc=V[1]),2 in V&&(q.finallyLoc=V[2],q.afterLoc=V[3]),this.tryEntries.push(q)}function ee(V){var q=V.completion||{};q.type="normal",delete q.arg,V.completion=q}function ne(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(W,this),this.reset(!0)}function be(V){if(V||V===""){var q=V[B];if(q)return q.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length)){var ie=-1,ce=function he(){for(;++ie<V.length;)if(X.call(V,ie))return he.value=V[ie],he.done=!1,he;return he.value=y,he.done=!0,he};return ce.next=ce}}throw new TypeError(f(V)+" is not iterable")}return De.prototype=J,F(O,"constructor",{value:J,configurable:!0}),F(J,"constructor",{value:De,configurable:!0}),De.displayName=te(J,N,"GeneratorFunction"),g.isGeneratorFunction=function(V){var q=typeof V=="function"&&V.constructor;return!!q&&(q===De||(q.displayName||q.name)==="GeneratorFunction")},g.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,J):(V.__proto__=J,te(V,N,"GeneratorFunction")),V.prototype=Object.create(O),V},g.awrap=function(V){return{__await:V}},I(se.prototype),te(se.prototype,D,function(){return this}),g.AsyncIterator=se,g.async=function(V,q,ie,ce,he){he===void 0&&(he=Promise);var H=new se(_e(V,q,ie,ce),he);return g.isGeneratorFunction(q)?H:H.next().then(function(we){return we.done?we.value:H.next()})},I(O),te(O,N,"Generator"),te(O,B,function(){return this}),te(O,"toString",function(){return"[object Generator]"}),g.keys=function(V){var q=Object(V),ie=[];for(var ce in q)ie.push(ce);return ie.reverse(),function he(){for(;ie.length;){var H=ie.pop();if(H in q)return he.value=H,he.done=!1,he}return he.done=!0,he}},g.values=be,ne.prototype={constructor:ne,reset:function(q){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(ee),!q)for(var ie in this)ie.charAt(0)==="t"&&X.call(this,ie)&&!isNaN(+ie.slice(1))&&(this[ie]=y)},stop:function(){this.done=!0;var q=this.tryEntries[0].completion;if(q.type==="throw")throw q.arg;return this.rval},dispatchException:function(q){if(this.done)throw q;var ie=this;function ce(xe,Ve){return we.type="throw",we.arg=q,ie.next=xe,Ve&&(ie.method="next",ie.arg=y),!!Ve}for(var he=this.tryEntries.length-1;he>=0;--he){var H=this.tryEntries[he],we=H.completion;if(H.tryLoc==="root")return ce("end");if(H.tryLoc<=this.prev){var je=X.call(H,"catchLoc"),ze=X.call(H,"finallyLoc");if(je&&ze){if(this.prev<H.catchLoc)return ce(H.catchLoc,!0);if(this.prev<H.finallyLoc)return ce(H.finallyLoc)}else if(je){if(this.prev<H.catchLoc)return ce(H.catchLoc,!0)}else{if(!ze)throw Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return ce(H.finallyLoc)}}}},abrupt:function(q,ie){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var he=this.tryEntries[ce];if(he.tryLoc<=this.prev&&X.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var H=he;break}}H&&(q==="break"||q==="continue")&&H.tryLoc<=ie&&ie<=H.finallyLoc&&(H=null);var we=H?H.completion:{};return we.type=q,we.arg=ie,H?(this.method="next",this.next=H.finallyLoc,ke):this.complete(we)},complete:function(q,ie){if(q.type==="throw")throw q.arg;return q.type==="break"||q.type==="continue"?this.next=q.arg:q.type==="return"?(this.rval=this.arg=q.arg,this.method="return",this.next="end"):q.type==="normal"&&ie&&(this.next=ie),ke},finish:function(q){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var ce=this.tryEntries[ie];if(ce.finallyLoc===q)return this.complete(ce.completion,ce.afterLoc),ee(ce),ke}},catch:function(q){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var ce=this.tryEntries[ie];if(ce.tryLoc===q){var he=ce.completion;if(he.type==="throw"){var H=he.arg;ee(ce)}return H}}throw Error("illegal catch attempt")},delegateYield:function(q,ie,ce){return this.delegate={iterator:be(q),resultName:ie,nextLoc:ce},this.method==="next"&&(this.arg=y),ke}},g}function n(y,g,S,X,F,T,B){try{var D=y[T](B),N=D.value}catch(te){return void S(te)}D.done?g(N):Promise.resolve(N).then(X,F)}function l(y){return function(){var g=this,S=arguments;return new Promise(function(X,F){var T=y.apply(g,S);function B(N){n(T,X,F,B,D,"next",N)}function D(N){n(T,X,F,B,D,"throw",N)}B(void 0)})}}function a(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function i(y,g){for(var S=0;S<g.length;S++){var X=g[S];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(y,x(X.key),X)}}function c(y,g,S){return g&&i(y.prototype,g),Object.defineProperty(y,"prototype",{writable:!1}),y}function x(y){var g=v(y,"string");return f(g)=="symbol"?g:g+""}function v(y,g){if(f(y)!="object"||!y)return y;var S=y[Symbol.toPrimitive];if(S!==void 0){var X=S.call(y,g);if(f(X)!="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(y)}var b=function(){function y(){a(this,y),this._cipher=null,this._counter=new Uint8Array(16)}return c(y,[{key:"setKey",value:function(){var g=l(r().mark(function X(F){return r().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,A.default.importKey("raw",F,{name:"AES-EAX"},!1,["encrypt, decrypt"]);case 2:this._cipher=B.sent;case 3:case"end":return B.stop()}},X,this)}));function S(X){return g.apply(this,arguments)}return S}()},{key:"makeMessage",value:function(){var g=l(r().mark(function X(F){var T,B,D,N;return r().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return T=new Uint8Array([(F.length&65280)>>>8,F.length&255]),_e.next=3,A.default.encrypt({name:"AES-EAX",iv:this._counter,additionalData:T},this._cipher,F);case 3:for(B=_e.sent,D=0;D<16&&this._counter[D]++===255;D++);return N=new Uint8Array(F.length+2+16),N.set(T),N.set(B,2),_e.abrupt("return",N);case 9:case"end":return _e.stop()}},X,this)}));function S(X){return g.apply(this,arguments)}return S}()},{key:"receiveMessage",value:function(){var g=l(r().mark(function X(F,T){var B,D,N;return r().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return B=new Uint8Array([(F&65280)>>>8,F&255]),_e.next=3,A.default.decrypt({name:"AES-EAX",iv:this._counter,additionalData:B},this._cipher,T);case 3:for(D=_e.sent,N=0;N<16&&this._counter[N]++===255;N++);return _e.abrupt("return",D);case 6:case"end":return _e.stop()}},X,this)}));function S(X,F){return g.apply(this,arguments)}return S}()}])}();P.default=function(y){function g(S,X){var F;return a(this,g),F=Q(this,g),F._hasStarted=!1,F._checkSock=null,F._checkCredentials=null,F._approveServerResolve=null,F._sockReject=null,F._credentialsReject=null,F._approveServerReject=null,F._sock=S,F._getCredentials=X,F}return s(g,y),c(g,[{key:"_waitSockAsync",value:function(X){var F=this;return new Promise(function(T,B){var D=function(){return!F._sock.rQwait("RA2",X)};D()?T():(F._checkSock=function(){D()&&(T(),F._checkSock=null,F._sockReject=null)},F._sockReject=B)})}},{key:"_waitApproveKeyAsync",value:function(){var X=this;return new Promise(function(F,T){X._approveServerResolve=F,X._approveServerReject=T})}},{key:"_waitCredentialsAsync",value:function(X){var F=this,T=function(){return X===1&&F._getCredentials().username!==void 0&&F._getCredentials().password!==void 0?!0:X===2&&F._getCredentials().password!==void 0};return new Promise(function(B,D){T()?B():(F._checkCredentials=function(){T()&&(B(),F._checkCredentials=null,F._credentialsReject=null)},F._credentialsReject=D)})}},{key:"checkInternalEvents",value:function(){this._checkSock!==null&&this._checkSock(),this._checkCredentials!==null&&this._checkCredentials()}},{key:"approveServer",value:function(){this._approveServerResolve!==null&&(this._approveServerResolve(),this._approveServerResolve=null)}},{key:"disconnect",value:function(){this._sockReject!==null&&(this._sockReject(new Error("disconnect normally")),this._sockReject=null),this._credentialsReject!==null&&(this._credentialsReject(new Error("disconnect normally")),this._credentialsReject=null),this._approveServerReject!==null&&(this._approveServerReject(new Error("disconnect normally")),this._approveServerReject=null)}},{key:"negotiateRA2neAuthAsync",value:function(){var S=l(r().mark(function F(){var T,B,D,N,te,_e,ge,ve,Fe,Ae,le,ke,Re,De,J,$,re,G,O,I,se,ue,j,W,ee,ne,be,V,q,ie,ce,he,H,we,je;return r().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return this._hasStarted=!0,xe.next=3,this._waitSockAsync(4);case 3:if(T=this._sock.rQpeekBytes(4),B=this._sock.rQshift32(),!(B<1024)){xe.next=9;break}throw new Error("RA2: server public key is too short: "+B);case 9:if(!(B>8192)){xe.next=11;break}throw new Error("RA2: server public key is too long: "+B);case 11:return D=Math.ceil(B/8),xe.next=14,this._waitSockAsync(D*2);case 14:return N=this._sock.rQshiftBytes(D),te=this._sock.rQshiftBytes(D),xe.next=18,A.default.importKey("raw",{n:N,e:te},{name:"RSA-PKCS1-v1_5"},!1,["encrypt"]);case 18:return _e=xe.sent,ge=new Uint8Array(4+D*2),ge.set(T),ge.set(N,4),ge.set(te,4+D),ve=this._waitApproveKeyAsync(),this.dispatchEvent(new CustomEvent("serververification",{detail:{type:"RSA",publickey:ge}})),xe.next=27,ve;case 27:return Fe=2048,Ae=Math.ceil(Fe/8),xe.next=31,A.default.generateKey({name:"RSA-PKCS1-v1_5",modulusLength:Fe,publicExponent:new Uint8Array([1,0,1])},!0,["encrypt"]);case 31:return le=xe.sent.privateKey,xe.next=34,A.default.exportKey("raw",le);case 34:return ke=xe.sent,Re=ke.n,De=ke.e,J=new Uint8Array(4+Ae*2),J[0]=(Fe&4278190080)>>>24,J[1]=(Fe&16711680)>>>16,J[2]=(Fe&65280)>>>8,J[3]=Fe&255,J.set(Re,4),J.set(De,4+Ae),this._sock.sQpushBytes(J),this._sock.flush(),$=new Uint8Array(16),window.crypto.getRandomValues($),xe.next=50,A.default.encrypt({name:"RSA-PKCS1-v1_5"},_e,$);case 50:return re=xe.sent,G=new Uint8Array(2+D),G[0]=(D&65280)>>>8,G[1]=D&255,G.set(re,2),this._sock.sQpushBytes(G),this._sock.flush(),xe.next=59,this._waitSockAsync(2);case 59:if(this._sock.rQshift16()===Ae){xe.next=61;break}throw new Error("RA2: wrong encrypted message length");case 61:return O=this._sock.rQshiftBytes(Ae),xe.next=64,A.default.decrypt({name:"RSA-PKCS1-v1_5"},le,O);case 64:if(I=xe.sent,!(I===null||I.length!==16)){xe.next=67;break}throw new Error("RA2: corrupted server encrypted random");case 67:return se=new Uint8Array(32),ue=new Uint8Array(32),se.set(I),se.set($,16),ue.set($),ue.set(I,16),xe.next=75,window.crypto.subtle.digest("SHA-1",se);case 75:return se=xe.sent,se=new Uint8Array(se).slice(0,16),xe.next=79,window.crypto.subtle.digest("SHA-1",ue);case 79:return ue=xe.sent,ue=new Uint8Array(ue).slice(0,16),j=new b,xe.next=84,j.setKey(se);case 84:return W=new b,xe.next=87,W.setKey(ue);case 87:return ee=new Uint8Array(8+D*2+Ae*2),ne=new Uint8Array(8+D*2+Ae*2),ee.set(ge),ee.set(J,4+D*2),ne.set(J),ne.set(ge,4+Ae*2),xe.next=95,window.crypto.subtle.digest("SHA-1",ee);case 95:return ee=xe.sent,xe.next=98,window.crypto.subtle.digest("SHA-1",ne);case 98:return ne=xe.sent,ee=new Uint8Array(ee),ne=new Uint8Array(ne),xe.t0=this._sock,xe.next=104,j.makeMessage(ne);case 104:return xe.t1=xe.sent,xe.t0.sQpushBytes.call(xe.t0,xe.t1),this._sock.flush(),xe.next=109,this._waitSockAsync(38);case 109:if(this._sock.rQshift16()===20){xe.next=111;break}throw new Error("RA2: wrong server hash");case 111:return xe.next=113,W.receiveMessage(20,this._sock.rQshiftBytes(36));case 113:if(be=xe.sent,be!==null){xe.next=116;break}throw new Error("RA2: failed to authenticate the message");case 116:V=0;case 117:if(!(V<20)){xe.next=123;break}if(be[V]===ee[V]){xe.next=120;break}throw new Error("RA2: wrong server hash");case 120:V++,xe.next=117;break;case 123:return xe.next=125,this._waitSockAsync(19);case 125:if(this._sock.rQshift16()===1){xe.next=127;break}throw new Error("RA2: wrong subtype");case 127:return xe.next=129,W.receiveMessage(1,this._sock.rQshiftBytes(17));case 129:if(q=xe.sent,q!==null){xe.next=132;break}throw new Error("RA2: failed to authenticate the message");case 132:if(q=q[0],ie=this._waitCredentialsAsync(q),q!==1){xe.next=138;break}(this._getCredentials().username===void 0||this._getCredentials().password===void 0)&&this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password"]}})),xe.next=143;break;case 138:if(q!==2){xe.next=142;break}this._getCredentials().password===void 0&&this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["password"]}})),xe.next=143;break;case 142:throw new Error("RA2: wrong subtype");case 143:return xe.next=145,ie;case 145:for(q===1?ce=(0,h.encodeUTF8)(this._getCredentials().username).slice(0,255):ce="",he=(0,h.encodeUTF8)(this._getCredentials().password).slice(0,255),H=new Uint8Array(ce.length+he.length+2),H[0]=ce.length,H[ce.length+1]=he.length,we=0;we<ce.length;we++)H[we+1]=ce.charCodeAt(we);for(je=0;je<he.length;je++)H[ce.length+2+je]=he.charCodeAt(je);return xe.t2=this._sock,xe.next=155,j.makeMessage(H);case 155:xe.t3=xe.sent,xe.t2.sQpushBytes.call(xe.t2,xe.t3),this._sock.flush();case 158:case"end":return xe.stop()}},F,this)}));function X(){return S.apply(this,arguments)}return X}()},{key:"hasStarted",get:function(){return this._hasStarted},set:function(X){this._hasStarted=X}}])}(Y.default)}(nr)),nr}var ar={},_n;function Jn(){return _n||(_n=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;function h(C){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},h(C)}function Y(C,u){if(!(C instanceof u))throw new TypeError("Cannot call a class as a function")}function A(C,u){for(var _=0;_<u.length;_++){var s=u[_];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(C,Q(s.key),s)}}function K(C,u,_){return u&&A(C.prototype,u),Object.defineProperty(C,"prototype",{writable:!1}),C}function Q(C){var u=L(C,"string");return h(u)=="symbol"?u:u+""}function L(C,u){if(h(C)!="object"||!C)return C;var _=C[Symbol.toPrimitive];if(_!==void 0){var s=_.call(C,u);if(h(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(C)}P.default=function(){function C(){Y(this,C),this._lines=0}return K(C,[{key:"decodeRect",value:function(_,s,p,f,r,n,l){if(p===0||f===0)return!0;this._lines===0&&(this._lines=f);for(var a=l==8?1:4,i=p*a;this._lines>0;){if(r.rQwait("RAW",i))return!1;var c=s+(f-this._lines),x=r.rQshiftBytes(i,!1);if(l==8){for(var v=new Uint8Array(p*4),b=0;b<p;b++)v[b*4+0]=(x[b]>>0&3)*255/3,v[b*4+1]=(x[b]>>2&3)*255/3,v[b*4+2]=(x[b]>>4&3)*255/3,v[b*4+3]=255;x=v}for(var y=0;y<p;y++)x[y*4+3]=255;n.blitImage(_,c,p,1,x,0),this._lines--}return!0}}])}()}(ar)),ar}var or={},pn;function ei(){return pn||(pn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;function h(C){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},h(C)}function Y(C,u){if(!(C instanceof u))throw new TypeError("Cannot call a class as a function")}function A(C,u){for(var _=0;_<u.length;_++){var s=u[_];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(C,Q(s.key),s)}}function K(C,u,_){return u&&A(C.prototype,u),Object.defineProperty(C,"prototype",{writable:!1}),C}function Q(C){var u=L(C,"string");return h(u)=="symbol"?u:u+""}function L(C,u){if(h(C)!="object"||!C)return C;var _=C[Symbol.toPrimitive];if(_!==void 0){var s=_.call(C,u);if(h(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(C)}P.default=function(){function C(){Y(this,C)}return K(C,[{key:"decodeRect",value:function(_,s,p,f,r,n,l){if(r.rQwait("COPYRECT",4))return!1;var a=r.rQshift16(),i=r.rQshift16();return p===0||f===0||n.copyImage(a,i,_,s,p,f),!0}}])}()}(or)),or}var sr={},vn;function ti(){return vn||(vn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;function h(C){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},h(C)}function Y(C,u){if(!(C instanceof u))throw new TypeError("Cannot call a class as a function")}function A(C,u){for(var _=0;_<u.length;_++){var s=u[_];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(C,Q(s.key),s)}}function K(C,u,_){return u&&A(C.prototype,u),Object.defineProperty(C,"prototype",{writable:!1}),C}function Q(C){var u=L(C,"string");return h(u)=="symbol"?u:u+""}function L(C,u){if(h(C)!="object"||!C)return C;var _=C[Symbol.toPrimitive];if(_!==void 0){var s=_.call(C,u);if(h(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(C)}P.default=function(){function C(){Y(this,C),this._subrects=0}return K(C,[{key:"decodeRect",value:function(_,s,p,f,r,n,l){if(this._subrects===0){if(r.rQwait("RRE",8))return!1;this._subrects=r.rQshift32();var a=r.rQshiftBytes(4);n.fillRect(_,s,p,f,a)}for(;this._subrects>0;){if(r.rQwait("RRE",12))return!1;var i=r.rQshiftBytes(4),c=r.rQshift16(),x=r.rQshift16(),v=r.rQshift16(),b=r.rQshift16();n.fillRect(_+c,s+x,v,b,i),this._subrects--}return!0}}])}()}(sr)),sr}var ur={},yn;function ri(){return yn||(yn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=A(ht());function Y(s){if(typeof WeakMap!="function")return null;var p=new WeakMap,f=new WeakMap;return(Y=function(n){return n?f:p})(s)}function A(s,p){if(s&&s.__esModule)return s;if(s===null||K(s)!="object"&&typeof s!="function")return{default:s};var f=Y(p);if(f&&f.has(s))return f.get(s);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in s)if(l!=="default"&&{}.hasOwnProperty.call(s,l)){var a=n?Object.getOwnPropertyDescriptor(s,l):null;a&&(a.get||a.set)?Object.defineProperty(r,l,a):r[l]=s[l]}return r.default=s,f&&f.set(s,r),r}function K(s){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},K(s)}function Q(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}function L(s,p){for(var f=0;f<p.length;f++){var r=p[f];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,u(r.key),r)}}function C(s,p,f){return p&&L(s.prototype,p),Object.defineProperty(s,"prototype",{writable:!1}),s}function u(s){var p=_(s,"string");return K(p)=="symbol"?p:p+""}function _(s,p){if(K(s)!="object"||!s)return s;var f=s[Symbol.toPrimitive];if(f!==void 0){var r=f.call(s,p);if(K(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}P.default=function(){function s(){Q(this,s),this._tiles=0,this._lastsubencoding=0,this._tileBuffer=new Uint8Array(16*16*4)}return C(s,[{key:"decodeRect",value:function(f,r,n,l,a,i,c){for(this._tiles===0&&(this._tilesX=Math.ceil(n/16),this._tilesY=Math.ceil(l/16),this._totalTiles=this._tilesX*this._tilesY,this._tiles=this._totalTiles);this._tiles>0;){var x=1;if(a.rQwait("HEXTILE",x))return!1;var v=a.rQpeek8();if(v>30)throw new Error("Illegal hextile subencoding (subencoding: "+v+")");var b=this._totalTiles-this._tiles,y=b%this._tilesX,g=Math.floor(b/this._tilesX),S=f+y*16,X=r+g*16,F=Math.min(16,f+n-S),T=Math.min(16,r+l-X);if(v&1)x+=F*T*4;else if(v&2&&(x+=4),v&4&&(x+=4),v&8){if(x++,a.rQwait("HEXTILE",x))return!1;var B=a.rQpeekBytes(x).at(-1);v&16?x+=B*6:x+=B*2}if(a.rQwait("HEXTILE",x))return!1;if(a.rQshift8(),v===0)this._lastsubencoding&1?h.Debug("     Ignoring blank after RAW"):i.fillRect(S,X,F,T,this._background);else if(v&1){for(var D=F*T,N=a.rQshiftBytes(D*4,!1),te=0;te<D;te++)N[te*4+3]=255;i.blitImage(S,X,F,T,N,0)}else{if(v&2&&(this._background=new Uint8Array(a.rQshiftBytes(4))),v&4&&(this._foreground=new Uint8Array(a.rQshiftBytes(4))),this._startTile(S,X,F,T,this._background),v&8)for(var _e=a.rQshift8(),ge=0;ge<_e;ge++){var ve=void 0;v&16?ve=a.rQshiftBytes(4):ve=this._foreground;var Fe=a.rQshift8(),Ae=Fe>>4,le=Fe&15,ke=a.rQshift8(),Re=(ke>>4)+1,De=(ke&15)+1;this._subTile(Ae,le,Re,De,ve)}this._finishTile(i)}this._lastsubencoding=v,this._tiles--}return!0}},{key:"_startTile",value:function(f,r,n,l,a){this._tileX=f,this._tileY=r,this._tileW=n,this._tileH=l;for(var i=a[0],c=a[1],x=a[2],v=this._tileBuffer,b=0;b<n*l*4;b+=4)v[b]=i,v[b+1]=c,v[b+2]=x,v[b+3]=255}},{key:"_subTile",value:function(f,r,n,l,a){for(var i=a[0],c=a[1],x=a[2],v=f+n,b=r+l,y=this._tileBuffer,g=this._tileW,S=r;S<b;S++)for(var X=f;X<v;X++){var F=(X+S*g)*4;y[F]=i,y[F+1]=c,y[F+2]=x,y[F+3]=255}}},{key:"_finishTile",value:function(f){f.blitImage(this._tileX,this._tileY,this._tileW,this._tileH,this._tileBuffer,0)}}])}()}(ur)),ur}var lr={},xn;function gn(){return xn||(xn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=Q(ht()),Y=A(Ht());function A(f){return f&&f.__esModule?f:{default:f}}function K(f){if(typeof WeakMap!="function")return null;var r=new WeakMap,n=new WeakMap;return(K=function(a){return a?n:r})(f)}function Q(f,r){if(f&&f.__esModule)return f;if(f===null||L(f)!="object"&&typeof f!="function")return{default:f};var n=K(r);if(n&&n.has(f))return n.get(f);var l={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in f)if(i!=="default"&&{}.hasOwnProperty.call(f,i)){var c=a?Object.getOwnPropertyDescriptor(f,i):null;c&&(c.get||c.set)?Object.defineProperty(l,i,c):l[i]=f[i]}return l.default=f,n&&n.set(f,l),l}function L(f){"@babel/helpers - typeof";return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},L(f)}function C(f,r){if(!(f instanceof r))throw new TypeError("Cannot call a class as a function")}function u(f,r){for(var n=0;n<r.length;n++){var l=r[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(f,s(l.key),l)}}function _(f,r,n){return r&&u(f.prototype,r),Object.defineProperty(f,"prototype",{writable:!1}),f}function s(f){var r=p(f,"string");return L(r)=="symbol"?r:r+""}function p(f,r){if(L(f)!="object"||!f)return f;var n=f[Symbol.toPrimitive];if(n!==void 0){var l=n.call(f,r);if(L(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(f)}P.default=function(){function f(){C(this,f),this._ctl=null,this._filter=null,this._numColors=0,this._palette=new Uint8Array(1024),this._len=0,this._zlibs=[];for(var r=0;r<4;r++)this._zlibs[r]=new Y.default}return _(f,[{key:"decodeRect",value:function(n,l,a,i,c,x,v){if(this._ctl===null){if(c.rQwait("TIGHT compression-control",1))return!1;this._ctl=c.rQshift8();for(var b=0;b<4;b++)this._ctl>>b&1&&(this._zlibs[b].reset(),h.Info("Reset zlib stream "+b));this._ctl=this._ctl>>4}var y;if(this._ctl===8)y=this._fillRect(n,l,a,i,c,x,v);else if(this._ctl===9)y=this._jpegRect(n,l,a,i,c,x,v);else if(this._ctl===10)y=this._pngRect(n,l,a,i,c,x,v);else if((this._ctl&8)==0)y=this._basicRect(this._ctl,n,l,a,i,c,x,v);else throw new Error("Illegal tight compression received (ctl: "+this._ctl+")");return y&&(this._ctl=null),y}},{key:"_fillRect",value:function(n,l,a,i,c,x,v){if(c.rQwait("TIGHT",3))return!1;var b=c.rQshiftBytes(3);return x.fillRect(n,l,a,i,b,!1),!0}},{key:"_jpegRect",value:function(n,l,a,i,c,x,v){var b=this._readData(c);return b===null?!1:(x.imageRect(n,l,a,i,"image/jpeg",b),!0)}},{key:"_pngRect",value:function(n,l,a,i,c,x,v){throw new Error("PNG received in standard Tight rect")}},{key:"_basicRect",value:function(n,l,a,i,c,x,v,b){if(this._filter===null)if(n&4){if(x.rQwait("TIGHT",1))return!1;this._filter=x.rQshift8()}else this._filter=0;var y=n&3,g;switch(this._filter){case 0:g=this._copyFilter(y,l,a,i,c,x,v,b);break;case 1:g=this._paletteFilter(y,l,a,i,c,x,v,b);break;case 2:g=this._gradientFilter(y,l,a,i,c,x,v,b);break;default:throw new Error("Illegal tight filter received (ctl: "+this._filter+")")}return g&&(this._filter=null),g}},{key:"_copyFilter",value:function(n,l,a,i,c,x,v,b){var y=i*c*3,g;if(y===0)return!0;if(y<12){if(x.rQwait("TIGHT",y))return!1;g=x.rQshiftBytes(y)}else{if(g=this._readData(x),g===null)return!1;this._zlibs[n].setInput(g),g=this._zlibs[n].inflate(y),this._zlibs[n].setInput(null)}for(var S=new Uint8Array(i*c*4),X=0,F=0;X<i*c*4;X+=4,F+=3)S[X]=g[F],S[X+1]=g[F+1],S[X+2]=g[F+2],S[X+3]=255;return v.blitImage(l,a,i,c,S,0,!1),!0}},{key:"_paletteFilter",value:function(n,l,a,i,c,x,v,b){if(this._numColors===0){if(x.rQwait("TIGHT palette",1))return!1;var y=x.rQpeek8()+1,g=y*3;if(x.rQwait("TIGHT palette",1+g))return!1;this._numColors=y,x.rQskipBytes(1),x.rQshiftTo(this._palette,g)}var S=this._numColors<=2?1:8,X=Math.floor((i*S+7)/8),F=X*c,T;if(F===0)return!0;if(F<12){if(x.rQwait("TIGHT",F))return!1;T=x.rQshiftBytes(F)}else{if(T=this._readData(x),T===null)return!1;this._zlibs[n].setInput(T),T=this._zlibs[n].inflate(F),this._zlibs[n].setInput(null)}return this._numColors==2?this._monoRect(l,a,i,c,T,this._palette,v):this._paletteRect(l,a,i,c,T,this._palette,v),this._numColors=0,!0}},{key:"_monoRect",value:function(n,l,a,i,c,x,v){for(var b=this._getScratchBuffer(a*i*4),y=Math.floor((a+7)/8),g=Math.floor(a/8),S=0;S<i;S++){var X=void 0,F=void 0,T=void 0;for(T=0;T<g;T++)for(var B=7;B>=0;B--)X=(S*a+T*8+7-B)*4,F=(c[S*y+T]>>B&1)*3,b[X]=x[F],b[X+1]=x[F+1],b[X+2]=x[F+2],b[X+3]=255;for(var D=7;D>=8-a%8;D--)X=(S*a+T*8+7-D)*4,F=(c[S*y+T]>>D&1)*3,b[X]=x[F],b[X+1]=x[F+1],b[X+2]=x[F+2],b[X+3]=255}v.blitImage(n,l,a,i,b,0,!1)}},{key:"_paletteRect",value:function(n,l,a,i,c,x,v){for(var b=this._getScratchBuffer(a*i*4),y=a*i*4,g=0,S=0;g<y;g+=4,S++){var X=c[S]*3;b[g]=x[X],b[g+1]=x[X+1],b[g+2]=x[X+2],b[g+3]=255}v.blitImage(n,l,a,i,b,0,!1)}},{key:"_gradientFilter",value:function(n,l,a,i,c,x,v,b){var y=i*c*3,g;if(y===0)return!0;if(y<12){if(x.rQwait("TIGHT",y))return!1;g=x.rQshiftBytes(y)}else{if(g=this._readData(x),g===null)return!1;this._zlibs[n].setInput(g),g=this._zlibs[n].inflate(y),this._zlibs[n].setInput(null)}for(var S=new Uint8Array(4*i*c),X=0,F=0,T=new Uint8Array(3),B=0;B<i;B++){for(var D=0;D<3;D++){var N=T[D],te=g[F++]+N;S[X++]=te,T[D]=te}S[X++]=255}for(var _e=0,ge=new Uint8Array(3),ve=new Uint8Array(3),Fe=1;Fe<c;Fe++){T.fill(0),ve.fill(0);for(var Ae=0;Ae<i;Ae++){for(var le=0;le<3;le++){ge[le]=S[_e++];var ke=T[le]+ge[le]-ve[le];ke<0?ke=0:ke>255&&(ke=255);var Re=g[F++]+ke;S[X++]=Re,ve[le]=ge[le],T[le]=Re}S[X++]=255,_e++}}return v.blitImage(l,a,i,c,S,0,!1),!0}},{key:"_readData",value:function(n){if(this._len===0){if(n.rQwait("TIGHT",3))return null;var l;l=n.rQshift8(),this._len=l&127,l&128&&(l=n.rQshift8(),this._len|=(l&127)<<7,l&128&&(l=n.rQshift8(),this._len|=l<<14))}if(n.rQwait("TIGHT",this._len))return null;var a=n.rQshiftBytes(this._len,!1);return this._len=0,a}},{key:"_getScratchBuffer",value:function(n){return(!this._scratchBuffer||this._scratchBuffer.length<n)&&(this._scratchBuffer=new Uint8Array(n)),this._scratchBuffer}}])}()}(lr)),lr}var fr={},bn;function ni(){return bn||(bn=1,function(P){function h(a){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},h(a)}Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var Y=A(gn());function A(a){return a&&a.__esModule?a:{default:a}}function K(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Q(a,i){for(var c=0;c<i.length;c++){var x=i[c];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(a,C(x.key),x)}}function L(a,i,c){return i&&Q(a.prototype,i),Object.defineProperty(a,"prototype",{writable:!1}),a}function C(a){var i=u(a,"string");return h(i)=="symbol"?i:i+""}function u(a,i){if(h(a)!="object"||!a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var x=c.call(a,i);if(h(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}function _(a,i,c){return i=r(i),s(a,f()?Reflect.construct(i,c||[],r(a).constructor):i.apply(a,c))}function s(a,i){if(i&&(h(i)=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(a)}function p(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function f(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f=function(){return!!a})()}function r(a){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},r(a)}function n(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),i&&l(a,i)}function l(a,i){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,x){return c.__proto__=x,c},l(a,i)}P.default=function(a){function i(){return K(this,i),_(this,i,arguments)}return n(i,a),L(i,[{key:"_pngRect",value:function(x,v,b,y,g,S,X){var F=this._readData(g);return F===null?!1:(S.imageRect(x,v,b,y,"image/png",F),!0)}},{key:"_basicRect",value:function(x,v,b,y,g,S,X,F){throw new Error("BasicCompression received in TightPNG rect")}}])}(Y.default)}(fr)),fr}var cr={},mn;function ii(){return mn||(mn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var h=Y(Ht());function Y(p){return p&&p.__esModule?p:{default:p}}function A(p){"@babel/helpers - typeof";return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},A(p)}function K(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function Q(p,f){for(var r=0;r<f.length;r++){var n=f[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(p,C(n.key),n)}}function L(p,f,r){return f&&Q(p.prototype,f),Object.defineProperty(p,"prototype",{writable:!1}),p}function C(p){var f=u(p,"string");return A(f)=="symbol"?f:f+""}function u(p,f){if(A(p)!="object"||!p)return p;var r=p[Symbol.toPrimitive];if(r!==void 0){var n=r.call(p,f);if(A(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}var _=64,s=64;P.default=function(){function p(){K(this,p),this._length=0,this._inflator=new h.default,this._pixelBuffer=new Uint8Array(_*s*4),this._tileBuffer=new Uint8Array(_*s*4)}return L(p,[{key:"decodeRect",value:function(r,n,l,a,i,c,x){if(this._length===0){if(i.rQwait("ZLib data length",4))return!1;this._length=i.rQshift32()}if(i.rQwait("Zlib data",this._length))return!1;var v=i.rQshiftBytes(this._length,!1);this._inflator.setInput(v);for(var b=n;b<n+a;b+=s)for(var y=Math.min(s,n+a-b),g=r;g<r+l;g+=_){var S=Math.min(_,r+l-g),X=S*y,F=this._inflator.inflate(1)[0];if(F===0){var T=this._readPixels(X);c.blitImage(g,b,S,y,T,0,!1)}else if(F===1){var B=this._readPixels(1);c.fillRect(g,b,S,y,[B[0],B[1],B[2]])}else if(F>=2&&F<=16){var D=this._decodePaletteTile(F,X,S,y);c.blitImage(g,b,S,y,D,0,!1)}else if(F===128){var N=this._decodeRLETile(X);c.blitImage(g,b,S,y,N,0,!1)}else if(F>=130&&F<=255){var te=this._decodeRLEPaletteTile(F-128,X);c.blitImage(g,b,S,y,te,0,!1)}else throw new Error("Unknown subencoding: "+F)}return this._length=0,!0}},{key:"_getBitsPerPixelInPalette",value:function(r){if(r<=2)return 1;if(r<=4)return 2;if(r<=16)return 4}},{key:"_readPixels",value:function(r){for(var n=this._pixelBuffer,l=this._inflator.inflate(3*r),a=0,i=0;a<r*4;a+=4,i+=3)n[a]=l[i],n[a+1]=l[i+1],n[a+2]=l[i+2],n[a+3]=255;return n}},{key:"_decodePaletteTile",value:function(r,n,l,a){for(var i=this._tileBuffer,c=this._readPixels(r),x=this._getBitsPerPixelInPalette(r),v=(1<<x)-1,b=0,y=this._inflator.inflate(1)[0],g=0;g<a;g++){for(var S=8-x,X=0;X<l;X++){S<0&&(S=8-x,y=this._inflator.inflate(1)[0]);var F=y>>S&v;i[b]=c[F*4],i[b+1]=c[F*4+1],i[b+2]=c[F*4+2],i[b+3]=c[F*4+3],b+=4,S-=x}S<8-x&&g<a-1&&(y=this._inflator.inflate(1)[0])}return i}},{key:"_decodeRLETile",value:function(r){for(var n=this._tileBuffer,l=0;l<r;)for(var a=this._readPixels(1),i=this._readRLELength(),c=0;c<i;c++)n[l*4]=a[0],n[l*4+1]=a[1],n[l*4+2]=a[2],n[l*4+3]=a[3],l++;return n}},{key:"_decodeRLEPaletteTile",value:function(r,n){for(var l=this._tileBuffer,a=this._readPixels(r),i=0;i<n;){var c=this._inflator.inflate(1)[0],x=1;if(c>=128&&(c-=128,x=this._readRLELength()),c>r)throw new Error("Too big index in palette: "+c+", palette size: "+r);if(i+x>n)throw new Error("Too big rle length in palette mode: "+x+", allowed length is: "+(n-i));for(var v=0;v<x;v++)l[i*4]=a[c*4],l[i*4+1]=a[c*4+1],l[i*4+2]=a[c*4+2],l[i*4+3]=a[c*4+3],i++}return l}},{key:"_readRLELength",value:function(){var r=0,n=0;do n=this._inflator.inflate(1)[0],r+=n;while(n===255);return r+1}}])}()}(cr)),cr}var hr={},wn;function ai(){return wn||(wn=1,function(P){Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;function h(n){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},h(n)}function Y(n){return Q(n)||K(n)||C(n)||A()}function A(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Q(n){if(Array.isArray(n))return u(n)}function L(n,l){var a=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!a){if(Array.isArray(n)||(a=C(n))||l){a&&(n=a);var i=0,c=function(){};return{s:c,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(g){throw g},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x,v=!0,b=!1;return{s:function(){a=a.call(n)},n:function(){var g=a.next();return v=g.done,g},e:function(g){b=!0,x=g},f:function(){try{v||a.return==null||a.return()}finally{if(b)throw x}}}}function C(n,l){if(n){if(typeof n=="string")return u(n,l);var a={}.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?u(n,l):void 0}}function u(n,l){(l==null||l>n.length)&&(l=n.length);for(var a=0,i=Array(l);a<l;a++)i[a]=n[a];return i}function _(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}function s(n,l){for(var a=0;a<l.length;a++){var i=l[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,f(i.key),i)}}function p(n,l,a){return l&&s(n.prototype,l),Object.defineProperty(n,"prototype",{writable:!1}),n}function f(n){var l=r(n,"string");return h(l)=="symbol"?l:l+""}function r(n,l){if(h(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var i=a.call(n,l);if(h(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}P.default=function(){function n(){_(this,n),this._cachedQuantTables=[],this._cachedHuffmanTables=[],this._segments=[]}return p(n,[{key:"decodeRect",value:function(a,i,c,x,v,b,y){for(;;){var g=this._readSegment(v);if(g===null)return!1;if(this._segments.push(g),g[1]===217)break}var S=[],X=[],F=L(this._segments),T;try{for(F.s();!(T=F.n()).done;){var B=T.value,D=B[1];D===196?S.push(B):D===219&&X.push(B)}}catch(J){F.e(J)}finally{F.f()}var N=this._segments.findIndex(function(J){return J[1]==192||J[1]==194});if(N==-1)throw new Error("Illegal JPEG image without SOF");if(X.length===0){var te;(te=this._segments).splice.apply(te,[N+1,0].concat(Y(this._cachedQuantTables)))}if(S.length===0){var _e;(_e=this._segments).splice.apply(_e,[N+1,0].concat(Y(this._cachedHuffmanTables)))}var ge=0,ve=L(this._segments),Fe;try{for(ve.s();!(Fe=ve.n()).done;){var Ae=Fe.value;ge+=Ae.length}}catch(J){ve.e(J)}finally{ve.f()}var le=new Uint8Array(ge);ge=0;var ke=L(this._segments),Re;try{for(ke.s();!(Re=ke.n()).done;){var De=Re.value;le.set(De,ge),ge+=De.length}}catch(J){ke.e(J)}finally{ke.f()}return b.imageRect(a,i,c,x,"image/jpeg",le),S.length!==0&&(this._cachedHuffmanTables=S),X.length!==0&&(this._cachedQuantTables=X),this._segments=[],!0}},{key:"_readSegment",value:function(a){if(a.rQwait("JPEG",2))return null;var i=a.rQshift8();if(i!=255)throw new Error("Illegal JPEG marker received (byte: "+i+")");var c=a.rQshift8();if(c>=208&&c<=217||c==1)return new Uint8Array([i,c]);if(a.rQwait("JPEG",2,2))return null;var x=a.rQshift16();if(x<2)throw new Error("Illegal JPEG length received (length: "+x+")");if(a.rQwait("JPEG",x-2,4))return null;var v=0;if(c===218)for(v+=2;;){if(a.rQwait("JPEG",x-2+v,4))return null;var b=a.rQpeekBytes(x-2+v,!1);if(b.at(-2)===255&&b.at(-1)!==0&&!(b.at(-1)>=208&&b.at(-1)<=215)){v-=2;break}v++}var y=new Uint8Array(2+x+v);return y[0]=i,y[1]=c,y[2]=x>>8,y[3]=x,y.set(a.rQshiftBytes(x-2+v,!1),4),y}}])}()}(hr)),hr}var kn;function oi(){return kn||(kn=1,function(P){function h(e){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},h(e)}Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var Y=yr(),A=te(ht()),K=br(),Q=Ft(),L=Xn(),C=Sr(),u=D(Er()),_=D(Fn()),s=D(Ht()),p=D(Mn()),f=D(Un()),r=D(Nn()),n=D(jn()),l=D(Hn()),a=D(Rt()),i=D(zn()),c=Gn(),x=D($n()),v=D(hn()),b=D(Jn()),y=D(ei()),g=D(ti()),S=D(ri()),X=D(gn()),F=D(ni()),T=D(ii()),B=D(ai());function D(e){return e&&e.__esModule?e:{default:e}}function N(e){if(typeof WeakMap!="function")return null;var k=new WeakMap,m=new WeakMap;return(N=function(d){return d?m:k})(e)}function te(e,k){if(e&&e.__esModule)return e;if(e===null||h(e)!="object"&&typeof e!="function")return{default:e};var m=N(k);if(m&&m.has(e))return m.get(e);var t={__proto__:null},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var M=d?Object.getOwnPropertyDescriptor(e,o):null;M&&(M.get||M.set)?Object.defineProperty(t,o,M):t[o]=e[o]}return t.default=e,m&&m.set(e,t),t}function _e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_e=function(){return k};var e,k={},m=Object.prototype,t=m.hasOwnProperty,d=Object.defineProperty||function(Se,pe,me){Se[pe]=me.value},o=typeof Symbol=="function"?Symbol:{},M=o.iterator||"@@iterator",U=o.asyncIterator||"@@asyncIterator",z=o.toStringTag||"@@toStringTag";function ae(Se,pe,me){return Object.defineProperty(Se,pe,{value:me,enumerable:!0,configurable:!0,writable:!0}),Se[pe]}try{ae({},"")}catch{ae=function(me,Oe,Ue){return me[Oe]=Ue}}function Me(Se,pe,me,Oe){var Ue=pe&&pe.prototype instanceof Ye?pe:Ye,Qe=Object.create(Ue.prototype),Je=new _r(Oe||[]);return d(Qe,"_invoke",{value:ci(Se,me,Je)}),Qe}function Pe(Se,pe,me){try{return{type:"normal",arg:Se.call(pe,me)}}catch(Oe){return{type:"throw",arg:Oe}}}k.wrap=Me;var Xe="suspendedStart",Te="suspendedYield",Be="executing",Ke="completed",Ie={};function Ye(){}function qe(){}function Ne(){}var Ge={};ae(Ge,M,function(){return this});var et=Object.getPrototypeOf,rt=et&&et(et(pr([])));rt&&rt!==m&&t.call(rt,M)&&(Ge=rt);var st=Ne.prototype=Ye.prototype=Object.create(Ge);function Sn(Se){["next","throw","return"].forEach(function(pe){ae(Se,pe,function(me){return this._invoke(pe,me)})})}function Pt(Se,pe){function me(Ue,Qe,Je,nt){var it=Pe(Se[Ue],Se,Qe);if(it.type!=="throw"){var xt=it.arg,_t=xt.value;return _t&&h(_t)=="object"&&t.call(_t,"__await")?pe.resolve(_t.__await).then(function(gt){me("next",gt,Je,nt)},function(gt){me("throw",gt,Je,nt)}):pe.resolve(_t).then(function(gt){xt.value=gt,Je(xt)},function(gt){return me("throw",gt,Je,nt)})}nt(it.arg)}var Oe;d(this,"_invoke",{value:function(Qe,Je){function nt(){return new pe(function(it,xt){me(Qe,Je,it,xt)})}return Oe=Oe?Oe.then(nt,nt):nt()}})}function ci(Se,pe,me){var Oe=Xe;return function(Ue,Qe){if(Oe===Be)throw Error("Generator is already running");if(Oe===Ke){if(Ue==="throw")throw Qe;return{value:e,done:!0}}for(me.method=Ue,me.arg=Qe;;){var Je=me.delegate;if(Je){var nt=Kn(Je,me);if(nt){if(nt===Ie)continue;return nt}}if(me.method==="next")me.sent=me._sent=me.arg;else if(me.method==="throw"){if(Oe===Xe)throw Oe=Ke,me.arg;me.dispatchException(me.arg)}else me.method==="return"&&me.abrupt("return",me.arg);Oe=Be;var it=Pe(Se,pe,me);if(it.type==="normal"){if(Oe=me.done?Ke:Te,it.arg===Ie)continue;return{value:it.arg,done:me.done}}it.type==="throw"&&(Oe=Ke,me.method="throw",me.arg=it.arg)}}}function Kn(Se,pe){var me=pe.method,Oe=Se.iterator[me];if(Oe===e)return pe.delegate=null,me==="throw"&&Se.iterator.return&&(pe.method="return",pe.arg=e,Kn(Se,pe),pe.method==="throw")||me!=="return"&&(pe.method="throw",pe.arg=new TypeError("The iterator does not provide a '"+me+"' method")),Ie;var Ue=Pe(Oe,Se.iterator,pe.arg);if(Ue.type==="throw")return pe.method="throw",pe.arg=Ue.arg,pe.delegate=null,Ie;var Qe=Ue.arg;return Qe?Qe.done?(pe[Se.resultName]=Qe.value,pe.next=Se.nextLoc,pe.method!=="return"&&(pe.method="next",pe.arg=e),pe.delegate=null,Ie):Qe:(pe.method="throw",pe.arg=new TypeError("iterator result is not an object"),pe.delegate=null,Ie)}function hi(Se){var pe={tryLoc:Se[0]};1 in Se&&(pe.catchLoc=Se[1]),2 in Se&&(pe.finallyLoc=Se[2],pe.afterLoc=Se[3]),this.tryEntries.push(pe)}function dr(Se){var pe=Se.completion||{};pe.type="normal",delete pe.arg,Se.completion=pe}function _r(Se){this.tryEntries=[{tryLoc:"root"}],Se.forEach(hi,this),this.reset(!0)}function pr(Se){if(Se||Se===""){var pe=Se[M];if(pe)return pe.call(Se);if(typeof Se.next=="function")return Se;if(!isNaN(Se.length)){var me=-1,Oe=function Ue(){for(;++me<Se.length;)if(t.call(Se,me))return Ue.value=Se[me],Ue.done=!1,Ue;return Ue.value=e,Ue.done=!0,Ue};return Oe.next=Oe}}throw new TypeError(h(Se)+" is not iterable")}return qe.prototype=Ne,d(st,"constructor",{value:Ne,configurable:!0}),d(Ne,"constructor",{value:qe,configurable:!0}),qe.displayName=ae(Ne,z,"GeneratorFunction"),k.isGeneratorFunction=function(Se){var pe=typeof Se=="function"&&Se.constructor;return!!pe&&(pe===qe||(pe.displayName||pe.name)==="GeneratorFunction")},k.mark=function(Se){return Object.setPrototypeOf?Object.setPrototypeOf(Se,Ne):(Se.__proto__=Ne,ae(Se,z,"GeneratorFunction")),Se.prototype=Object.create(st),Se},k.awrap=function(Se){return{__await:Se}},Sn(Pt.prototype),ae(Pt.prototype,U,function(){return this}),k.AsyncIterator=Pt,k.async=function(Se,pe,me,Oe,Ue){Ue===void 0&&(Ue=Promise);var Qe=new Pt(Me(Se,pe,me,Oe),Ue);return k.isGeneratorFunction(pe)?Qe:Qe.next().then(function(Je){return Je.done?Je.value:Qe.next()})},Sn(st),ae(st,z,"Generator"),ae(st,M,function(){return this}),ae(st,"toString",function(){return"[object Generator]"}),k.keys=function(Se){var pe=Object(Se),me=[];for(var Oe in pe)me.push(Oe);return me.reverse(),function Ue(){for(;me.length;){var Qe=me.pop();if(Qe in pe)return Ue.value=Qe,Ue.done=!1,Ue}return Ue.done=!0,Ue}},k.values=pr,_r.prototype={constructor:_r,reset:function(pe){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(dr),!pe)for(var me in this)me.charAt(0)==="t"&&t.call(this,me)&&!isNaN(+me.slice(1))&&(this[me]=e)},stop:function(){this.done=!0;var pe=this.tryEntries[0].completion;if(pe.type==="throw")throw pe.arg;return this.rval},dispatchException:function(pe){if(this.done)throw pe;var me=this;function Oe(xt,_t){return Je.type="throw",Je.arg=pe,me.next=xt,_t&&(me.method="next",me.arg=e),!!_t}for(var Ue=this.tryEntries.length-1;Ue>=0;--Ue){var Qe=this.tryEntries[Ue],Je=Qe.completion;if(Qe.tryLoc==="root")return Oe("end");if(Qe.tryLoc<=this.prev){var nt=t.call(Qe,"catchLoc"),it=t.call(Qe,"finallyLoc");if(nt&&it){if(this.prev<Qe.catchLoc)return Oe(Qe.catchLoc,!0);if(this.prev<Qe.finallyLoc)return Oe(Qe.finallyLoc)}else if(nt){if(this.prev<Qe.catchLoc)return Oe(Qe.catchLoc,!0)}else{if(!it)throw Error("try statement without catch or finally");if(this.prev<Qe.finallyLoc)return Oe(Qe.finallyLoc)}}}},abrupt:function(pe,me){for(var Oe=this.tryEntries.length-1;Oe>=0;--Oe){var Ue=this.tryEntries[Oe];if(Ue.tryLoc<=this.prev&&t.call(Ue,"finallyLoc")&&this.prev<Ue.finallyLoc){var Qe=Ue;break}}Qe&&(pe==="break"||pe==="continue")&&Qe.tryLoc<=me&&me<=Qe.finallyLoc&&(Qe=null);var Je=Qe?Qe.completion:{};return Je.type=pe,Je.arg=me,Qe?(this.method="next",this.next=Qe.finallyLoc,Ie):this.complete(Je)},complete:function(pe,me){if(pe.type==="throw")throw pe.arg;return pe.type==="break"||pe.type==="continue"?this.next=pe.arg:pe.type==="return"?(this.rval=this.arg=pe.arg,this.method="return",this.next="end"):pe.type==="normal"&&me&&(this.next=me),Ie},finish:function(pe){for(var me=this.tryEntries.length-1;me>=0;--me){var Oe=this.tryEntries[me];if(Oe.finallyLoc===pe)return this.complete(Oe.completion,Oe.afterLoc),dr(Oe),Ie}},catch:function(pe){for(var me=this.tryEntries.length-1;me>=0;--me){var Oe=this.tryEntries[me];if(Oe.tryLoc===pe){var Ue=Oe.completion;if(Ue.type==="throw"){var Qe=Ue.arg;dr(Oe)}return Qe}}throw Error("illegal catch attempt")},delegateYield:function(pe,me,Oe){return this.delegate={iterator:pr(pe),resultName:me,nextLoc:Oe},this.method==="next"&&(this.arg=e),Ie}},k}function ge(e,k,m,t,d,o,M){try{var U=e[o](M),z=U.value}catch(ae){return void m(ae)}U.done?k(z):Promise.resolve(z).then(t,d)}function ve(e){return function(){var k=this,m=arguments;return new Promise(function(t,d){var o=e.apply(k,m);function M(z){ge(o,t,d,M,U,"next",z)}function U(z){ge(o,t,d,M,U,"throw",z)}M(void 0)})}}function Fe(e,k){return ke(e)||le(e,k)||De(e,k)||Ae()}function Ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function le(e,k){var m=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(m!=null){var t,d,o,M,U=[],z=!0,ae=!1;try{if(o=(m=m.call(e)).next,k!==0)for(;!(z=(t=o.call(m)).done)&&(U.push(t.value),U.length!==k);z=!0);}catch(Me){ae=!0,d=Me}finally{try{if(!z&&m.return!=null&&(M=m.return(),Object(M)!==M))return}finally{if(ae)throw d}}return U}}function ke(e){if(Array.isArray(e))return e}function Re(e,k){var m=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!m){if(Array.isArray(e)||(m=De(e))||k){m&&(e=m);var t=0,d=function(){};return{s:d,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(ae){throw ae},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,M=!0,U=!1;return{s:function(){m=m.call(e)},n:function(){var ae=m.next();return M=ae.done,ae},e:function(ae){U=!0,o=ae},f:function(){try{M||m.return==null||m.return()}finally{if(U)throw o}}}}function De(e,k){if(e){if(typeof e=="string")return J(e,k);var m={}.toString.call(e).slice(8,-1);return m==="Object"&&e.constructor&&(m=e.constructor.name),m==="Map"||m==="Set"?Array.from(e):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?J(e,k):void 0}}function J(e,k){(k==null||k>e.length)&&(k=e.length);for(var m=0,t=Array(k);m<k;m++)t[m]=e[m];return t}function $(e,k){if(!(e instanceof k))throw new TypeError("Cannot call a class as a function")}function re(e,k){for(var m=0;m<k.length;m++){var t=k[m];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,O(t.key),t)}}function G(e,k,m){return k&&re(e.prototype,k),m&&re(e,m),Object.defineProperty(e,"prototype",{writable:!1}),e}function O(e){var k=I(e,"string");return h(k)=="symbol"?k:k+""}function I(e,k){if(h(e)!="object"||!e)return e;var m=e[Symbol.toPrimitive];if(m!==void 0){var t=m.call(e,k);if(h(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function se(e,k,m){return k=ee(k),ue(e,W()?Reflect.construct(k,[],ee(e).constructor):k.apply(e,m))}function ue(e,k){if(k&&(h(k)=="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W=function(){return!!e})()}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},ee(e)}function ne(e,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(k&&k.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),k&&be(e,k)}function be(e,k){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(m,t){return m.__proto__=t,m},be(e,k)}var V=3,q="rgb(40, 40, 40)",ie=17,ce=50,he=19,H=75,we=50,je=1e3,ze=50,xe=1,Ve=2,Ze=6,at=16,lt=19,tt=22,ot=30,E=113,oe=129,fe=256,ye=1,Ce=1<<24,R=1<<25,Z=1<<26,w=1<<27,de=1<<28,Ee=P.default=function(e){function k(m,t,d){var o;if($(this,k),!m)throw new Error("Must specify target");if(!t)throw new Error("Must specify URL, WebSocket or RTCDataChannel");window.isSecureContext||A.Error("noVNC requires a secure context (TLS). Expect crashes!"),o=se(this,k),o._target=m,typeof t=="string"?o._url=t:(o._url=null,o._rawChannel=t),d=d||{},o._rfbCredentials=d.credentials||{},o._shared="shared"in d?!!d.shared:!0,o._repeaterID=d.repeaterID||"",o._wsProtocols=d.wsProtocols||[],o._rfbConnectionState="",o._rfbInitState="",o._rfbAuthScheme=-1,o._rfbCleanDisconnect=!0,o._rfbRSAAESAuthenticationState=null,o._rfbVersion=0,o._rfbMaxVersion=3.8,o._rfbTightVNC=!1,o._rfbVeNCryptState=0,o._rfbXvpVer=0,o._fbWidth=0,o._fbHeight=0,o._fbName="",o._capabilities={power:!1},o._supportsFence=!1,o._supportsContinuousUpdates=!1,o._enabledContinuousUpdates=!1,o._supportsSetDesktopSize=!1,o._screenID=0,o._screenFlags=0,o._qemuExtKeyEventSupported=!1,o._clipboardText=null,o._clipboardServerCapabilitiesActions={},o._clipboardServerCapabilitiesFormats={},o._sock=null,o._display=null,o._flushing=!1,o._keyboard=null,o._gestures=null,o._resizeObserver=null,o._disconnTimer=null,o._resizeTimeout=null,o._mouseMoveTimer=null,o._decoders={},o._FBU={rects:0,x:0,y:0,width:0,height:0,encoding:null},o._mousePos={},o._mouseButtonMask=0,o._mouseLastMoveTime=0,o._viewportDragging=!1,o._viewportDragPos={},o._viewportHasMoved=!1,o._accumulatedWheelDeltaX=0,o._accumulatedWheelDeltaY=0,o._gestureLastTapTime=null,o._gestureFirstDoubleTapEv=null,o._gestureLastMagnitudeX=0,o._gestureLastMagnitudeY=0,o._eventHandlers={focusCanvas:o._focusCanvas.bind(o),handleResize:o._handleResize.bind(o),handleMouse:o._handleMouse.bind(o),handleWheel:o._handleWheel.bind(o),handleGesture:o._handleGesture.bind(o),handleRSAAESCredentialsRequired:o._handleRSAAESCredentialsRequired.bind(o),handleRSAAESServerVerification:o._handleRSAAESServerVerification.bind(o)},A.Debug(">> RFB.constructor"),o._screen=document.createElement("div"),o._screen.style.display="flex",o._screen.style.width="100%",o._screen.style.height="100%",o._screen.style.overflow="auto",o._screen.style.background=q,o._canvas=document.createElement("canvas"),o._canvas.style.margin="auto",o._canvas.style.outline="none",o._canvas.width=0,o._canvas.height=0,o._canvas.tabIndex=-1,o._screen.appendChild(o._canvas),o._cursor=new n.default,o._cursorImage=k.cursors.none,o._decoders[c.encodings.encodingRaw]=new b.default,o._decoders[c.encodings.encodingCopyRect]=new y.default,o._decoders[c.encodings.encodingRRE]=new g.default,o._decoders[c.encodings.encodingHextile]=new S.default,o._decoders[c.encodings.encodingTight]=new X.default,o._decoders[c.encodings.encodingTightPNG]=new F.default,o._decoders[c.encodings.encodingZRLE]=new T.default,o._decoders[c.encodings.encodingJPEG]=new B.default;try{o._display=new _.default(o._canvas)}catch(M){throw A.Error("Display exception: "+M),M}return o._keyboard=new f.default(o._canvas),o._keyboard.onkeyevent=o._handleKeyEvent.bind(o),o._remoteCapsLock=null,o._remoteNumLock=null,o._gestures=new r.default,o._sock=new l.default,o._sock.on("open",o._socketOpen.bind(o)),o._sock.on("close",o._socketClose.bind(o)),o._sock.on("message",o._handleMessage.bind(o)),o._sock.on("error",o._socketError.bind(o)),o._expectedClientWidth=null,o._expectedClientHeight=null,o._resizeObserver=new ResizeObserver(o._eventHandlers.handleResize),o._updateConnectionState("connecting"),A.Debug("<< RFB.constructor"),o.dragViewport=!1,o.focusOnClick=!0,o._viewOnly=!1,o._clipViewport=!1,o._clippingViewport=!1,o._scaleViewport=!1,o._resizeSession=!1,o._showDotCursor=!1,d.showDotCursor!==void 0&&(A.Warn("Specifying showDotCursor as a RFB constructor argument is deprecated"),o._showDotCursor=d.showDotCursor),o._qualityLevel=6,o._compressionLevel=2,o}return ne(k,e),G(k,[{key:"viewOnly",get:function(){return this._viewOnly},set:function(t){this._viewOnly=t,(this._rfbConnectionState==="connecting"||this._rfbConnectionState==="connected")&&(t?this._keyboard.ungrab():this._keyboard.grab())}},{key:"capabilities",get:function(){return this._capabilities}},{key:"clippingViewport",get:function(){return this._clippingViewport}},{key:"_setClippingViewport",value:function(t){t!==this._clippingViewport&&(this._clippingViewport=t,this.dispatchEvent(new CustomEvent("clippingviewport",{detail:this._clippingViewport})))}},{key:"touchButton",get:function(){return 0},set:function(t){A.Warn("Using old API!")}},{key:"clipViewport",get:function(){return this._clipViewport},set:function(t){this._clipViewport=t,this._updateClip()}},{key:"scaleViewport",get:function(){return this._scaleViewport},set:function(t){this._scaleViewport=t,t&&this._clipViewport&&this._updateClip(),this._updateScale(),!t&&this._clipViewport&&this._updateClip()}},{key:"resizeSession",get:function(){return this._resizeSession},set:function(t){this._resizeSession=t,t&&this._requestRemoteResize()}},{key:"showDotCursor",get:function(){return this._showDotCursor},set:function(t){this._showDotCursor=t,this._refreshCursor()}},{key:"background",get:function(){return this._screen.style.background},set:function(t){this._screen.style.background=t}},{key:"qualityLevel",get:function(){return this._qualityLevel},set:function(t){if(!Number.isInteger(t)||t<0||t>9){A.Error("qualityLevel must be an integer between 0 and 9");return}this._qualityLevel!==t&&(this._qualityLevel=t,this._rfbConnectionState==="connected"&&this._sendEncodings())}},{key:"compressionLevel",get:function(){return this._compressionLevel},set:function(t){if(!Number.isInteger(t)||t<0||t>9){A.Error("compressionLevel must be an integer between 0 and 9");return}this._compressionLevel!==t&&(this._compressionLevel=t,this._rfbConnectionState==="connected"&&this._sendEncodings())}},{key:"disconnect",value:function(){this._updateConnectionState("disconnecting"),this._sock.off("error"),this._sock.off("message"),this._sock.off("open"),this._rfbRSAAESAuthenticationState!==null&&this._rfbRSAAESAuthenticationState.disconnect()}},{key:"approveServer",value:function(){this._rfbRSAAESAuthenticationState!==null&&this._rfbRSAAESAuthenticationState.approveServer()}},{key:"sendCredentials",value:function(t){this._rfbCredentials=t,this._resumeAuthentication()}},{key:"sendCtrlAltDel",value:function(){this._rfbConnectionState!=="connected"||this._viewOnly||(A.Info("Sending Ctrl-Alt-Del"),this.sendKey(a.default.XK_Control_L,"ControlLeft",!0),this.sendKey(a.default.XK_Alt_L,"AltLeft",!0),this.sendKey(a.default.XK_Delete,"Delete",!0),this.sendKey(a.default.XK_Delete,"Delete",!1),this.sendKey(a.default.XK_Alt_L,"AltLeft",!1),this.sendKey(a.default.XK_Control_L,"ControlLeft",!1))}},{key:"machineShutdown",value:function(){this._xvpOp(1,2)}},{key:"machineReboot",value:function(){this._xvpOp(1,3)}},{key:"machineReset",value:function(){this._xvpOp(1,4)}},{key:"sendKey",value:function(t,d,o){if(!(this._rfbConnectionState!=="connected"||this._viewOnly)){if(o===void 0){this.sendKey(t,d,!0),this.sendKey(t,d,!1);return}var M=i.default[d];if(this._qemuExtKeyEventSupported&&M)t=t||0,A.Info("Sending key ("+(o?"down":"up")+"): keysym "+t+", scancode "+M),k.messages.QEMUExtendedKeyEvent(this._sock,t,o,M);else{if(!t)return;A.Info("Sending keysym ("+(o?"down":"up")+"): "+t),k.messages.keyEvent(this._sock,t,o?1:0)}}}},{key:"focus",value:function(t){this._canvas.focus(t)}},{key:"blur",value:function(){this._canvas.blur()}},{key:"clipboardPasteFrom",value:function(t){if(!(this._rfbConnectionState!=="connected"||this._viewOnly))if(this._clipboardServerCapabilitiesFormats[ye]&&this._clipboardServerCapabilitiesActions[w])this._clipboardText=t,k.messages.extendedClipboardNotify(this._sock,[ye]);else{var d,o,M;d=0;var U=Re(t),z;try{for(U.s();!(z=U.n()).done;){var ae=z.value;d++}}catch(Be){U.e(Be)}finally{U.f()}M=new Uint8Array(d),o=0;var Me=Re(t),Pe;try{for(Me.s();!(Pe=Me.n()).done;){var Xe=Pe.value,Te=Xe.codePointAt(0);Te>255&&(Te=63),M[o++]=Te}}catch(Be){Me.e(Be)}finally{Me.f()}k.messages.clientCutText(this._sock,M)}}},{key:"getImageData",value:function(){return this._display.getImageData()}},{key:"toDataURL",value:function(t,d){return this._display.toDataURL(t,d)}},{key:"toBlob",value:function(t,d,o){return this._display.toBlob(t,d,o)}},{key:"_connect",value:function(){if(A.Debug(">> RFB.connect"),this._url)A.Info("connecting to ".concat(this._url)),this._sock.open(this._url,this._wsProtocols);else{if(A.Info("attaching ".concat(this._rawChannel," to Websock")),this._sock.attach(this._rawChannel),this._sock.readyState==="closed")throw Error("Cannot use already closed WebSocket/RTCDataChannel");this._sock.readyState==="open"&&this._socketOpen()}this._target.appendChild(this._screen),this._gestures.attach(this._canvas),this._cursor.attach(this._canvas),this._refreshCursor(),this._resizeObserver.observe(this._screen),this._canvas.addEventListener("mousedown",this._eventHandlers.focusCanvas),this._canvas.addEventListener("touchstart",this._eventHandlers.focusCanvas),this._canvas.addEventListener("mousedown",this._eventHandlers.handleMouse),this._canvas.addEventListener("mouseup",this._eventHandlers.handleMouse),this._canvas.addEventListener("mousemove",this._eventHandlers.handleMouse),this._canvas.addEventListener("click",this._eventHandlers.handleMouse),this._canvas.addEventListener("contextmenu",this._eventHandlers.handleMouse),this._canvas.addEventListener("wheel",this._eventHandlers.handleWheel),this._canvas.addEventListener("gesturestart",this._eventHandlers.handleGesture),this._canvas.addEventListener("gesturemove",this._eventHandlers.handleGesture),this._canvas.addEventListener("gestureend",this._eventHandlers.handleGesture),A.Debug("<< RFB.connect")}},{key:"_disconnect",value:function(){A.Debug(">> RFB.disconnect"),this._cursor.detach(),this._canvas.removeEventListener("gesturestart",this._eventHandlers.handleGesture),this._canvas.removeEventListener("gesturemove",this._eventHandlers.handleGesture),this._canvas.removeEventListener("gestureend",this._eventHandlers.handleGesture),this._canvas.removeEventListener("wheel",this._eventHandlers.handleWheel),this._canvas.removeEventListener("mousedown",this._eventHandlers.handleMouse),this._canvas.removeEventListener("mouseup",this._eventHandlers.handleMouse),this._canvas.removeEventListener("mousemove",this._eventHandlers.handleMouse),this._canvas.removeEventListener("click",this._eventHandlers.handleMouse),this._canvas.removeEventListener("contextmenu",this._eventHandlers.handleMouse),this._canvas.removeEventListener("mousedown",this._eventHandlers.focusCanvas),this._canvas.removeEventListener("touchstart",this._eventHandlers.focusCanvas),this._resizeObserver.disconnect(),this._keyboard.ungrab(),this._gestures.detach(),this._sock.close();try{this._target.removeChild(this._screen)}catch(t){if(t.name!=="NotFoundError")throw t}clearTimeout(this._resizeTimeout),clearTimeout(this._mouseMoveTimer),A.Debug("<< RFB.disconnect")}},{key:"_socketOpen",value:function(){this._rfbConnectionState==="connecting"&&this._rfbInitState===""?(this._rfbInitState="ProtocolVersion",A.Debug("Starting VNC handshake")):this._fail("Unexpected server connection while "+this._rfbConnectionState)}},{key:"_socketClose",value:function(t){A.Debug("WebSocket on-close event");var d="";switch(t.code&&(d="(code: "+t.code,t.reason&&(d+=", reason: "+t.reason),d+=")"),this._rfbConnectionState){case"connecting":this._fail("Connection closed "+d);break;case"connected":this._updateConnectionState("disconnecting"),this._updateConnectionState("disconnected");break;case"disconnecting":this._updateConnectionState("disconnected");break;case"disconnected":this._fail("Unexpected server disconnect when already disconnected "+d);break;default:this._fail("Unexpected server disconnect before connecting "+d);break}this._sock.off("close"),this._rawChannel=null}},{key:"_socketError",value:function(t){A.Warn("WebSocket on-error event")}},{key:"_focusCanvas",value:function(t){this.focusOnClick&&this.focus({preventScroll:!0})}},{key:"_setDesktopName",value:function(t){this._fbName=t,this.dispatchEvent(new CustomEvent("desktopname",{detail:{name:this._fbName}}))}},{key:"_saveExpectedClientSize",value:function(){this._expectedClientWidth=this._screen.clientWidth,this._expectedClientHeight=this._screen.clientHeight}},{key:"_currentClientSize",value:function(){return[this._screen.clientWidth,this._screen.clientHeight]}},{key:"_clientHasExpectedSize",value:function(){var t=this._currentClientSize(),d=Fe(t,2),o=d[0],M=d[1];return o==this._expectedClientWidth&&M==this._expectedClientHeight}},{key:"_handleResize",value:function(){var t=this;this._clientHasExpectedSize()||(window.requestAnimationFrame(function(){t._updateClip(),t._updateScale()}),this._resizeSession&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(this._requestRemoteResize.bind(this),500)))}},{key:"_updateClip",value:function(){var t=this._display.clipViewport,d=this._clipViewport;if(this._scaleViewport&&(d=!1),t!==d&&(this._display.clipViewport=d),d){var o=this._screenSize();this._display.viewportChangeSize(o.w,o.h),this._fixScrollbars(),this._setClippingViewport(o.w<this._display.width||o.h<this._display.height)}else this._setClippingViewport(!1);t!==d&&this._saveExpectedClientSize()}},{key:"_updateScale",value:function(){if(!this._scaleViewport)this._display.scale=1;else{var t=this._screenSize();this._display.autoscale(t.w,t.h)}this._fixScrollbars()}},{key:"_requestRemoteResize",value:function(){if(clearTimeout(this._resizeTimeout),this._resizeTimeout=null,!(!this._resizeSession||this._viewOnly||!this._supportsSetDesktopSize)){var t=this._screenSize();k.messages.setDesktopSize(this._sock,Math.floor(t.w),Math.floor(t.h),this._screenID,this._screenFlags),A.Debug("Requested new desktop size: "+t.w+"x"+t.h)}}},{key:"_screenSize",value:function(){var t=this._screen.getBoundingClientRect();return{w:t.width,h:t.height}}},{key:"_fixScrollbars",value:function(){var t=this._screen.style.overflow;this._screen.style.overflow="hidden",this._screen.getBoundingClientRect(),this._screen.style.overflow=t}},{key:"_updateConnectionState",value:function(t){var d=this,o=this._rfbConnectionState;if(t===o){A.Debug("Already in state '"+t+"', ignoring");return}if(o==="disconnected"){A.Error("Tried changing state of a disconnected RFB object");return}switch(t){case"connected":if(o!=="connecting"){A.Error("Bad transition to connected state, previous connection state: "+o);return}break;case"disconnected":if(o!=="disconnecting"){A.Error("Bad transition to disconnected state, previous connection state: "+o);return}break;case"connecting":if(o!==""){A.Error("Bad transition to connecting state, previous connection state: "+o);return}break;case"disconnecting":if(o!=="connected"&&o!=="connecting"){A.Error("Bad transition to disconnecting state, previous connection state: "+o);return}break;default:A.Error("Unknown connection state: "+t);return}switch(this._rfbConnectionState=t,A.Debug("New state '"+t+"', was '"+o+"'."),this._disconnTimer&&t!=="disconnecting"&&(A.Debug("Clearing disconnect timer"),clearTimeout(this._disconnTimer),this._disconnTimer=null,this._sock.off("close")),t){case"connecting":this._connect();break;case"connected":this.dispatchEvent(new CustomEvent("connect",{detail:{}}));break;case"disconnecting":this._disconnect(),this._disconnTimer=setTimeout(function(){A.Error("Disconnection timed out."),d._updateConnectionState("disconnected")},V*1e3);break;case"disconnected":this.dispatchEvent(new CustomEvent("disconnect",{detail:{clean:this._rfbCleanDisconnect}}));break}}},{key:"_fail",value:function(t){switch(this._rfbConnectionState){case"disconnecting":A.Error("Failed when disconnecting: "+t);break;case"connected":A.Error("Failed while connected: "+t);break;case"connecting":A.Error("Failed when connecting: "+t);break;default:A.Error("RFB failure: "+t);break}return this._rfbCleanDisconnect=!1,this._updateConnectionState("disconnecting"),this._updateConnectionState("disconnected"),!1}},{key:"_setCapability",value:function(t,d){this._capabilities[t]=d,this.dispatchEvent(new CustomEvent("capabilities",{detail:{capabilities:this._capabilities}}))}},{key:"_handleMessage",value:function(){if(this._sock.rQwait("message",1)){A.Warn("handleMessage called on an empty receive queue");return}switch(this._rfbConnectionState){case"disconnected":A.Error("Got data while disconnected");break;case"connected":for(;!(this._flushing||!this._normalMsg()||this._sock.rQwait("message",1)););break;case"connecting":for(;this._rfbConnectionState==="connecting"&&this._initMsg(););break;default:A.Error("Got data while in an invalid state");break}}},{key:"_handleKeyEvent",value:function(t,d,o,M,U){d=="CapsLock"&&o&&(this._remoteCapsLock=null),this._remoteCapsLock!==null&&U!==null&&this._remoteCapsLock!==U&&o&&(A.Debug("Fixing remote caps lock"),this.sendKey(a.default.XK_Caps_Lock,"CapsLock",!0),this.sendKey(a.default.XK_Caps_Lock,"CapsLock",!1),this._remoteCapsLock=null),d=="NumLock"&&o&&(this._remoteNumLock=null),this._remoteNumLock!==null&&M!==null&&this._remoteNumLock!==M&&o&&(A.Debug("Fixing remote num lock"),this.sendKey(a.default.XK_Num_Lock,"NumLock",!0),this.sendKey(a.default.XK_Num_Lock,"NumLock",!1),this._remoteNumLock=null),this.sendKey(t,d,o)}},{key:"_handleMouse",value:function(t){if(!(t.type==="click"&&t.target!==this._canvas)&&(t.stopPropagation(),t.preventDefault(),!(t.type==="click"||t.type==="contextmenu"))){var d=(0,L.clientToElement)(t.clientX,t.clientY,this._canvas);switch(t.type){case"mousedown":(0,C.setCapture)(this._canvas),this._handleMouseButton(d.x,d.y,!0,1<<t.button);break;case"mouseup":this._handleMouseButton(d.x,d.y,!1,1<<t.button);break;case"mousemove":this._handleMouseMove(d.x,d.y);break}}}},{key:"_handleMouseButton",value:function(t,d,o,M){if(this.dragViewport)if(o&&!this._viewportDragging){this._viewportDragging=!0,this._viewportDragPos={x:t,y:d},this._viewportHasMoved=!1;return}else{if(this._viewportDragging=!1,this._viewportHasMoved)return;this._sendMouse(t,d,M)}this._mouseMoveTimer!==null&&(clearTimeout(this._mouseMoveTimer),this._mouseMoveTimer=null,this._sendMouse(t,d,this._mouseButtonMask)),o?this._mouseButtonMask|=M:this._mouseButtonMask&=~M,this._sendMouse(t,d,this._mouseButtonMask)}},{key:"_handleMouseMove",value:function(t,d){var o=this;if(this._viewportDragging){var M=this._viewportDragPos.x-t,U=this._viewportDragPos.y-d;(this._viewportHasMoved||Math.abs(M)>Q.dragThreshold||Math.abs(U)>Q.dragThreshold)&&(this._viewportHasMoved=!0,this._viewportDragPos={x:t,y:d},this._display.viewportChangePos(M,U));return}if(this._mousePos={x:t,y:d},this._mouseMoveTimer==null){var z=Date.now()-this._mouseLastMoveTime;z>ie?(this._sendMouse(t,d,this._mouseButtonMask),this._mouseLastMoveTime=Date.now()):this._mouseMoveTimer=setTimeout(function(){o._handleDelayedMouseMove()},ie-z)}}},{key:"_handleDelayedMouseMove",value:function(){this._mouseMoveTimer=null,this._sendMouse(this._mousePos.x,this._mousePos.y,this._mouseButtonMask),this._mouseLastMoveTime=Date.now()}},{key:"_sendMouse",value:function(t,d,o){this._rfbConnectionState==="connected"&&(this._viewOnly||k.messages.pointerEvent(this._sock,this._display.absX(t),this._display.absY(d),o))}},{key:"_handleWheel",value:function(t){if(this._rfbConnectionState==="connected"&&!this._viewOnly){t.stopPropagation(),t.preventDefault();var d=(0,L.clientToElement)(t.clientX,t.clientY,this._canvas),o=t.deltaX,M=t.deltaY;t.deltaMode!==0&&(o*=he,M*=he),this._accumulatedWheelDeltaX+=o,this._accumulatedWheelDeltaY+=M,Math.abs(this._accumulatedWheelDeltaX)>=ce&&(this._accumulatedWheelDeltaX<0?(this._handleMouseButton(d.x,d.y,!0,32),this._handleMouseButton(d.x,d.y,!1,32)):this._accumulatedWheelDeltaX>0&&(this._handleMouseButton(d.x,d.y,!0,64),this._handleMouseButton(d.x,d.y,!1,64)),this._accumulatedWheelDeltaX=0),Math.abs(this._accumulatedWheelDeltaY)>=ce&&(this._accumulatedWheelDeltaY<0?(this._handleMouseButton(d.x,d.y,!0,8),this._handleMouseButton(d.x,d.y,!1,8)):this._accumulatedWheelDeltaY>0&&(this._handleMouseButton(d.x,d.y,!0,16),this._handleMouseButton(d.x,d.y,!1,16)),this._accumulatedWheelDeltaY=0)}}},{key:"_fakeMouseMove",value:function(t,d,o){this._handleMouseMove(d,o),this._cursor.move(t.detail.clientX,t.detail.clientY)}},{key:"_handleTapEvent",value:function(t,d){var o=(0,L.clientToElement)(t.detail.clientX,t.detail.clientY,this._canvas);if(this._gestureLastTapTime!==null&&Date.now()-this._gestureLastTapTime<je&&this._gestureFirstDoubleTapEv.detail.type===t.detail.type){var M=this._gestureFirstDoubleTapEv.detail.clientX-t.detail.clientX,U=this._gestureFirstDoubleTapEv.detail.clientY-t.detail.clientY,z=Math.hypot(M,U);z<ze?o=(0,L.clientToElement)(this._gestureFirstDoubleTapEv.detail.clientX,this._gestureFirstDoubleTapEv.detail.clientY,this._canvas):this._gestureFirstDoubleTapEv=t}else this._gestureFirstDoubleTapEv=t;this._gestureLastTapTime=Date.now(),this._fakeMouseMove(this._gestureFirstDoubleTapEv,o.x,o.y),this._handleMouseButton(o.x,o.y,!0,d),this._handleMouseButton(o.x,o.y,!1,d)}},{key:"_handleGesture",value:function(t){var d,o=(0,L.clientToElement)(t.detail.clientX,t.detail.clientY,this._canvas);switch(t.type){case"gesturestart":switch(t.detail.type){case"onetap":this._handleTapEvent(t,1);break;case"twotap":this._handleTapEvent(t,4);break;case"threetap":this._handleTapEvent(t,2);break;case"drag":this._fakeMouseMove(t,o.x,o.y),this._handleMouseButton(o.x,o.y,!0,1);break;case"longpress":this._fakeMouseMove(t,o.x,o.y),this._handleMouseButton(o.x,o.y,!0,4);break;case"twodrag":this._gestureLastMagnitudeX=t.detail.magnitudeX,this._gestureLastMagnitudeY=t.detail.magnitudeY,this._fakeMouseMove(t,o.x,o.y);break;case"pinch":this._gestureLastMagnitudeX=Math.hypot(t.detail.magnitudeX,t.detail.magnitudeY),this._fakeMouseMove(t,o.x,o.y);break}break;case"gesturemove":switch(t.detail.type){case"onetap":case"twotap":case"threetap":break;case"drag":case"longpress":this._fakeMouseMove(t,o.x,o.y);break;case"twodrag":for(this._fakeMouseMove(t,o.x,o.y);t.detail.magnitudeY-this._gestureLastMagnitudeY>we;)this._handleMouseButton(o.x,o.y,!0,8),this._handleMouseButton(o.x,o.y,!1,8),this._gestureLastMagnitudeY+=we;for(;t.detail.magnitudeY-this._gestureLastMagnitudeY<-50;)this._handleMouseButton(o.x,o.y,!0,16),this._handleMouseButton(o.x,o.y,!1,16),this._gestureLastMagnitudeY-=we;for(;t.detail.magnitudeX-this._gestureLastMagnitudeX>we;)this._handleMouseButton(o.x,o.y,!0,32),this._handleMouseButton(o.x,o.y,!1,32),this._gestureLastMagnitudeX+=we;for(;t.detail.magnitudeX-this._gestureLastMagnitudeX<-50;)this._handleMouseButton(o.x,o.y,!0,64),this._handleMouseButton(o.x,o.y,!1,64),this._gestureLastMagnitudeX-=we;break;case"pinch":if(this._fakeMouseMove(t,o.x,o.y),d=Math.hypot(t.detail.magnitudeX,t.detail.magnitudeY),Math.abs(d-this._gestureLastMagnitudeX)>H){for(this._handleKeyEvent(a.default.XK_Control_L,"ControlLeft",!0);d-this._gestureLastMagnitudeX>H;)this._handleMouseButton(o.x,o.y,!0,8),this._handleMouseButton(o.x,o.y,!1,8),this._gestureLastMagnitudeX+=H;for(;d-this._gestureLastMagnitudeX<-75;)this._handleMouseButton(o.x,o.y,!0,16),this._handleMouseButton(o.x,o.y,!1,16),this._gestureLastMagnitudeX-=H}this._handleKeyEvent(a.default.XK_Control_L,"ControlLeft",!1);break}break;case"gestureend":switch(t.detail.type){case"onetap":case"twotap":case"threetap":case"pinch":case"twodrag":break;case"drag":this._fakeMouseMove(t,o.x,o.y),this._handleMouseButton(o.x,o.y,!1,1);break;case"longpress":this._fakeMouseMove(t,o.x,o.y),this._handleMouseButton(o.x,o.y,!1,4);break}break}}},{key:"_negotiateProtocolVersion",value:function(){if(this._sock.rQwait("version",12))return!1;var t=this._sock.rQshiftStr(12).substr(4,7);A.Info("Server ProtocolVersion: "+t);var d=0;switch(t){case"000.000":d=1;break;case"003.003":case"003.006":this._rfbVersion=3.3;break;case"003.007":this._rfbVersion=3.7;break;case"003.008":case"003.889":case"004.000":case"004.001":case"005.000":this._rfbVersion=3.8;break;default:return this._fail("Invalid server version "+t)}if(d){for(var o="ID:"+this._repeaterID;o.length<250;)o+="\0";return this._sock.sQpushString(o),this._sock.flush(),!0}this._rfbVersion>this._rfbMaxVersion&&(this._rfbVersion=this._rfbMaxVersion);var M="00"+parseInt(this._rfbVersion,10)+".00"+this._rfbVersion*10%10;this._sock.sQpushString("RFB "+M+`
`),this._sock.flush(),A.Debug("Sent ProtocolVersion: "+M),this._rfbInitState="Security"}},{key:"_isSupportedSecurityType",value:function(t){var d=[xe,Ve,Ze,at,lt,tt,ot,E,fe];return d.includes(t)}},{key:"_negotiateSecurity",value:function(){if(this._rfbVersion>=3.7){var t=this._sock.rQshift8();if(this._sock.rQwait("security type",t,1))return!1;if(t===0)return this._rfbInitState="SecurityReason",this._securityContext="no security types",this._securityStatus=1,!0;var d=this._sock.rQshiftBytes(t);A.Debug("Server security types: "+d),this._rfbAuthScheme=-1;var o=Re(d),M;try{for(o.s();!(M=o.n()).done;){var U=M.value;if(this._isSupportedSecurityType(U)){this._rfbAuthScheme=U;break}}}catch(z){o.e(z)}finally{o.f()}if(this._rfbAuthScheme===-1)return this._fail("Unsupported security types (types: "+d+")");this._sock.sQpush8(this._rfbAuthScheme),this._sock.flush()}else{if(this._sock.rQwait("security scheme",4))return!1;if(this._rfbAuthScheme=this._sock.rQshift32(),this._rfbAuthScheme==0)return this._rfbInitState="SecurityReason",this._securityContext="authentication scheme",this._securityStatus=1,!0}return this._rfbInitState="Authentication",A.Debug("Authenticating using scheme: "+this._rfbAuthScheme),!0}},{key:"_handleSecurityReason",value:function(){if(this._sock.rQwait("reason length",4))return!1;var t=this._sock.rQshift32(),d="";if(t>0){if(this._sock.rQwait("reason",t,4))return!1;d=this._sock.rQshiftStr(t)}return d!==""?(this.dispatchEvent(new CustomEvent("securityfailure",{detail:{status:this._securityStatus,reason:d}})),this._fail("Security negotiation failed on "+this._securityContext+" (reason: "+d+")")):(this.dispatchEvent(new CustomEvent("securityfailure",{detail:{status:this._securityStatus}})),this._fail("Security negotiation failed on "+this._securityContext))}},{key:"_negotiateXvpAuth",value:function(){return this._rfbCredentials.username===void 0||this._rfbCredentials.password===void 0||this._rfbCredentials.target===void 0?(this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password","target"]}})),!1):(this._sock.sQpush8(this._rfbCredentials.username.length),this._sock.sQpush8(this._rfbCredentials.target.length),this._sock.sQpushString(this._rfbCredentials.username),this._sock.sQpushString(this._rfbCredentials.target),this._sock.flush(),this._rfbAuthScheme=Ve,this._negotiateAuthentication())}},{key:"_negotiateVeNCryptAuth",value:function(){if(this._rfbVeNCryptState==0){if(this._sock.rQwait("vencrypt version",2))return!1;var t=this._sock.rQshift8(),d=this._sock.rQshift8();if(!(t==0&&d==2))return this._fail("Unsupported VeNCrypt version "+t+"."+d);this._sock.sQpush8(0),this._sock.sQpush8(2),this._sock.flush(),this._rfbVeNCryptState=1}if(this._rfbVeNCryptState==1){if(this._sock.rQwait("vencrypt ack",1))return!1;var o=this._sock.rQshift8();if(o!=0)return this._fail("VeNCrypt failure "+o);this._rfbVeNCryptState=2}if(this._rfbVeNCryptState==2){if(this._sock.rQwait("vencrypt subtypes length",1))return!1;var M=this._sock.rQshift8();if(M<1)return this._fail("VeNCrypt subtypes empty");this._rfbVeNCryptSubtypesLength=M,this._rfbVeNCryptState=3}if(this._rfbVeNCryptState==3){if(this._sock.rQwait("vencrypt subtypes",4*this._rfbVeNCryptSubtypesLength))return!1;for(var U=[],z=0;z<this._rfbVeNCryptSubtypesLength;z++)U.push(this._sock.rQshift32());this._rfbAuthScheme=-1;for(var ae=0,Me=U;ae<Me.length;ae++){var Pe=Me[ae];if(Pe!==lt&&this._isSupportedSecurityType(Pe)){this._rfbAuthScheme=Pe;break}}return this._rfbAuthScheme===-1?this._fail("Unsupported security types (types: "+U+")"):(this._sock.sQpush32(this._rfbAuthScheme),this._sock.flush(),this._rfbVeNCryptState=4,!0)}}},{key:"_negotiatePlainAuth",value:function(){if(this._rfbCredentials.username===void 0||this._rfbCredentials.password===void 0)return this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password"]}})),!1;var t=(0,K.encodeUTF8)(this._rfbCredentials.username),d=(0,K.encodeUTF8)(this._rfbCredentials.password);return this._sock.sQpush32(t.length),this._sock.sQpush32(d.length),this._sock.sQpushString(t),this._sock.sQpushString(d),this._sock.flush(),this._rfbInitState="SecurityResult",!0}},{key:"_negotiateStdVNCAuth",value:function(){if(this._sock.rQwait("auth challenge",16))return!1;if(this._rfbCredentials.password===void 0)return this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["password"]}})),!1;var t=Array.prototype.slice.call(this._sock.rQshiftBytes(16)),d=k.genDES(this._rfbCredentials.password,t);return this._sock.sQpushBytes(d),this._sock.flush(),this._rfbInitState="SecurityResult",!0}},{key:"_negotiateARDAuth",value:function(){if(this._rfbCredentials.username===void 0||this._rfbCredentials.password===void 0)return this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password"]}})),!1;if(this._rfbCredentials.ardPublicKey!=null&&this._rfbCredentials.ardCredentials!=null)return this._sock.sQpushBytes(this._rfbCredentials.ardCredentials),this._sock.sQpushBytes(this._rfbCredentials.ardPublicKey),this._sock.flush(),this._rfbCredentials.ardCredentials=null,this._rfbCredentials.ardPublicKey=null,this._rfbInitState="SecurityResult",!0;if(this._sock.rQwait("read ard",4))return!1;var t=this._sock.rQshiftBytes(2),d=this._sock.rQshift16();if(this._sock.rQwait("read ard keylength",d*2,4))return!1;var o=this._sock.rQshiftBytes(d),M=this._sock.rQshiftBytes(d),U=v.default.generateKey({name:"DH",g:t,p:o},!1,["deriveBits"]);return this._negotiateARDAuthAsync(d,M,U),!1}},{key:"_negotiateARDAuthAsync",value:function(){var m=ve(_e().mark(function d(o,M,U){var z,ae,Me,Pe,Xe,Te,Be,Ke,Ie,Ye;return _e().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:for(z=v.default.exportKey("raw",U.publicKey),ae=v.default.deriveBits({name:"DH",public:M},U.privateKey,o*8),Me=(0,K.encodeUTF8)(this._rfbCredentials.username).substring(0,63),Pe=(0,K.encodeUTF8)(this._rfbCredentials.password).substring(0,63),Xe=window.crypto.getRandomValues(new Uint8Array(128)),Te=0;Te<Me.length;Te++)Xe[Te]=Me.charCodeAt(Te);for(Xe[Me.length]=0,Be=0;Be<Pe.length;Be++)Xe[64+Be]=Pe.charCodeAt(Be);return Xe[64+Pe.length]=0,Ne.next=11,v.default.digest("MD5",ae);case 11:return Ke=Ne.sent,Ne.next=14,v.default.importKey("raw",Ke,{name:"AES-ECB"},!1,["encrypt"]);case 14:return Ie=Ne.sent,Ne.next=17,v.default.encrypt({name:"AES-ECB"},Ie,Xe);case 17:Ye=Ne.sent,this._rfbCredentials.ardCredentials=Ye,this._rfbCredentials.ardPublicKey=z,this._resumeAuthentication();case 21:case"end":return Ne.stop()}},d,this)}));function t(d,o,M){return m.apply(this,arguments)}return t}()},{key:"_negotiateTightUnixAuth",value:function(){return this._rfbCredentials.username===void 0||this._rfbCredentials.password===void 0?(this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password"]}})),!1):(this._sock.sQpush32(this._rfbCredentials.username.length),this._sock.sQpush32(this._rfbCredentials.password.length),this._sock.sQpushString(this._rfbCredentials.username),this._sock.sQpushString(this._rfbCredentials.password),this._sock.flush(),this._rfbInitState="SecurityResult",!0)}},{key:"_negotiateTightTunnels",value:function(t){for(var d={0:{vendor:"TGHT",signature:"NOTUNNEL"}},o={},M=0;M<t;M++){var U=this._sock.rQshift32(),z=this._sock.rQshiftStr(4),ae=this._sock.rQshiftStr(8);o[U]={vendor:z,signature:ae}}return A.Debug("Server Tight tunnel types: "+o),o[1]&&o[1].vendor==="SICR"&&o[1].signature==="SCHANNEL"&&(A.Debug("Detected Siemens server. Assuming NOTUNNEL support."),o[0]={vendor:"TGHT",signature:"NOTUNNEL"}),o[0]?o[0].vendor!=d[0].vendor||o[0].signature!=d[0].signature?this._fail("Client's tunnel type had the incorrect vendor or signature"):(A.Debug("Selected tunnel type: "+d[0]),this._sock.sQpush32(0),this._sock.flush(),!1):this._fail("Server wanted tunnels, but doesn't support the notunnel type")}},{key:"_negotiateTightAuth",value:function(){if(!this._rfbTightVNC){if(this._sock.rQwait("num tunnels",4))return!1;var t=this._sock.rQshift32();if(t>0&&this._sock.rQwait("tunnel capabilities",16*t,4))return!1;if(this._rfbTightVNC=!0,t>0)return this._negotiateTightTunnels(t),!1}if(this._sock.rQwait("sub auth count",4))return!1;var d=this._sock.rQshift32();if(d===0)return this._rfbInitState="SecurityResult",!0;if(this._sock.rQwait("sub auth capabilities",16*d,4))return!1;for(var o={STDVNOAUTH__:1,STDVVNCAUTH_:2,TGHTULGNAUTH:129},M=[],U=0;U<d;U++){this._sock.rQshift32();var z=this._sock.rQshiftStr(12);M.push(z)}A.Debug("Server Tight authentication types: "+M);for(var ae in o)if(M.indexOf(ae)!=-1)switch(this._sock.sQpush32(o[ae]),this._sock.flush(),A.Debug("Selected authentication type: "+ae),ae){case"STDVNOAUTH__":return this._rfbInitState="SecurityResult",!0;case"STDVVNCAUTH_":return this._rfbAuthScheme=Ve,!0;case"TGHTULGNAUTH":return this._rfbAuthScheme=oe,!0;default:return this._fail("Unsupported tiny auth scheme (scheme: "+ae+")")}return this._fail("No supported sub-auth types!")}},{key:"_handleRSAAESCredentialsRequired",value:function(t){this.dispatchEvent(t)}},{key:"_handleRSAAESServerVerification",value:function(t){this.dispatchEvent(t)}},{key:"_negotiateRA2neAuth",value:function(){var t=this;return this._rfbRSAAESAuthenticationState===null&&(this._rfbRSAAESAuthenticationState=new x.default(this._sock,function(){return t._rfbCredentials}),this._rfbRSAAESAuthenticationState.addEventListener("serververification",this._eventHandlers.handleRSAAESServerVerification),this._rfbRSAAESAuthenticationState.addEventListener("credentialsrequired",this._eventHandlers.handleRSAAESCredentialsRequired)),this._rfbRSAAESAuthenticationState.checkInternalEvents(),this._rfbRSAAESAuthenticationState.hasStarted||this._rfbRSAAESAuthenticationState.negotiateRA2neAuthAsync().catch(function(d){d.message!=="disconnect normally"&&t._fail(d.message)}).then(function(){return t._rfbInitState="SecurityResult",!0}).finally(function(){t._rfbRSAAESAuthenticationState.removeEventListener("serververification",t._eventHandlers.handleRSAAESServerVerification),t._rfbRSAAESAuthenticationState.removeEventListener("credentialsrequired",t._eventHandlers.handleRSAAESCredentialsRequired),t._rfbRSAAESAuthenticationState=null}),!1}},{key:"_negotiateMSLogonIIAuth",value:function(){if(this._sock.rQwait("mslogonii dh param",24))return!1;if(this._rfbCredentials.username===void 0||this._rfbCredentials.password===void 0)return this.dispatchEvent(new CustomEvent("credentialsrequired",{detail:{types:["username","password"]}})),!1;var t=this._sock.rQshiftBytes(8),d=this._sock.rQshiftBytes(8),o=this._sock.rQshiftBytes(8),M=v.default.generateKey({name:"DH",g:t,p:d},!0,["deriveBits"]),U=v.default.exportKey("raw",M.publicKey),z=v.default.deriveBits({name:"DH",public:o},M.privateKey,64),ae=v.default.importKey("raw",z,{name:"DES-CBC"},!1,["encrypt"]),Me=(0,K.encodeUTF8)(this._rfbCredentials.username).substring(0,255),Pe=(0,K.encodeUTF8)(this._rfbCredentials.password).substring(0,63),Xe=new Uint8Array(256),Te=new Uint8Array(64);window.crypto.getRandomValues(Xe),window.crypto.getRandomValues(Te);for(var Be=0;Be<Me.length;Be++)Xe[Be]=Me.charCodeAt(Be);Xe[Me.length]=0;for(var Ke=0;Ke<Pe.length;Ke++)Te[Ke]=Pe.charCodeAt(Ke);return Te[Pe.length]=0,Xe=v.default.encrypt({name:"DES-CBC",iv:z},ae,Xe),Te=v.default.encrypt({name:"DES-CBC",iv:z},ae,Te),this._sock.sQpushBytes(U),this._sock.sQpushBytes(Xe),this._sock.sQpushBytes(Te),this._sock.flush(),this._rfbInitState="SecurityResult",!0}},{key:"_negotiateAuthentication",value:function(){switch(this._rfbAuthScheme){case xe:return this._rfbVersion>=3.8?this._rfbInitState="SecurityResult":this._rfbInitState="ClientInitialisation",!0;case tt:return this._negotiateXvpAuth();case ot:return this._negotiateARDAuth();case Ve:return this._negotiateStdVNCAuth();case at:return this._negotiateTightAuth();case lt:return this._negotiateVeNCryptAuth();case fe:return this._negotiatePlainAuth();case oe:return this._negotiateTightUnixAuth();case Ze:return this._negotiateRA2neAuth();case E:return this._negotiateMSLogonIIAuth();default:return this._fail("Unsupported auth scheme (scheme: "+this._rfbAuthScheme+")")}}},{key:"_handleSecurityResult",value:function(){if(this._sock.rQwait("VNC auth response ",4))return!1;var t=this._sock.rQshift32();return t===0?(this._rfbInitState="ClientInitialisation",A.Debug("Authentication OK"),!0):this._rfbVersion>=3.8?(this._rfbInitState="SecurityReason",this._securityContext="security result",this._securityStatus=t,!0):(this.dispatchEvent(new CustomEvent("securityfailure",{detail:{status:t}})),this._fail("Security handshake failed"))}},{key:"_negotiateServerInit",value:function(){if(this._sock.rQwait("server initialization",24))return!1;var t=this._sock.rQshift16(),d=this._sock.rQshift16(),o=this._sock.rQshift8(),M=this._sock.rQshift8(),U=this._sock.rQshift8(),z=this._sock.rQshift8(),ae=this._sock.rQshift16(),Me=this._sock.rQshift16(),Pe=this._sock.rQshift16(),Xe=this._sock.rQshift8(),Te=this._sock.rQshift8(),Be=this._sock.rQshift8();this._sock.rQskipBytes(3);var Ke=this._sock.rQshift32();if(this._sock.rQwait("server init name",Ke,24))return!1;var Ie=this._sock.rQshiftStr(Ke);if(Ie=(0,K.decodeUTF8)(Ie,!0),this._rfbTightVNC){if(this._sock.rQwait("TightVNC extended server init header",8,24+Ke))return!1;var Ye=this._sock.rQshift16(),qe=this._sock.rQshift16(),Ne=this._sock.rQshift16();this._sock.rQskipBytes(2);var Ge=(Ye+qe+Ne)*16;if(this._sock.rQwait("TightVNC extended server init header",Ge,32+Ke))return!1;this._sock.rQskipBytes(16*Ye),this._sock.rQskipBytes(16*qe),this._sock.rQskipBytes(16*Ne)}return A.Info("Screen: "+t+"x"+d+", bpp: "+o+", depth: "+M+", bigEndian: "+U+", trueColor: "+z+", redMax: "+ae+", greenMax: "+Me+", blueMax: "+Pe+", redShift: "+Xe+", greenShift: "+Te+", blueShift: "+Be),this._setDesktopName(Ie),this._resize(t,d),this._viewOnly||this._keyboard.grab(),this._fbDepth=24,this._fbName==="Intel(r) AMT KVM"&&(A.Warn("Intel AMT KVM only supports 8/16 bit depths. Using low color mode."),this._fbDepth=8),k.messages.pixelFormat(this._sock,this._fbDepth,!0),this._sendEncodings(),k.messages.fbUpdateRequest(this._sock,!1,0,0,this._fbWidth,this._fbHeight),this._updateConnectionState("connected"),!0}},{key:"_sendEncodings",value:function(){var t=[];t.push(c.encodings.encodingCopyRect),this._fbDepth==24&&(t.push(c.encodings.encodingTight),t.push(c.encodings.encodingTightPNG),t.push(c.encodings.encodingZRLE),t.push(c.encodings.encodingJPEG),t.push(c.encodings.encodingHextile),t.push(c.encodings.encodingRRE)),t.push(c.encodings.encodingRaw),t.push(c.encodings.pseudoEncodingQualityLevel0+this._qualityLevel),t.push(c.encodings.pseudoEncodingCompressLevel0+this._compressionLevel),t.push(c.encodings.pseudoEncodingDesktopSize),t.push(c.encodings.pseudoEncodingLastRect),t.push(c.encodings.pseudoEncodingQEMUExtendedKeyEvent),t.push(c.encodings.pseudoEncodingQEMULedEvent),t.push(c.encodings.pseudoEncodingExtendedDesktopSize),t.push(c.encodings.pseudoEncodingXvp),t.push(c.encodings.pseudoEncodingFence),t.push(c.encodings.pseudoEncodingContinuousUpdates),t.push(c.encodings.pseudoEncodingDesktopName),t.push(c.encodings.pseudoEncodingExtendedClipboard),this._fbDepth==24&&(t.push(c.encodings.pseudoEncodingVMwareCursor),t.push(c.encodings.pseudoEncodingCursor)),k.messages.clientEncodings(this._sock,t)}},{key:"_initMsg",value:function(){switch(this._rfbInitState){case"ProtocolVersion":return this._negotiateProtocolVersion();case"Security":return this._negotiateSecurity();case"Authentication":return this._negotiateAuthentication();case"SecurityResult":return this._handleSecurityResult();case"SecurityReason":return this._handleSecurityReason();case"ClientInitialisation":return this._sock.sQpush8(this._shared?1:0),this._sock.flush(),this._rfbInitState="ServerInitialisation",!0;case"ServerInitialisation":return this._negotiateServerInit();default:return this._fail("Unknown init state (state: "+this._rfbInitState+")")}}},{key:"_resumeAuthentication",value:function(){setTimeout(this._initMsg.bind(this),0)}},{key:"_handleSetColourMapMsg",value:function(){return A.Debug("SetColorMapEntries"),this._fail("Unexpected SetColorMapEntries message")}},{key:"_handleServerCutText",value:function(){if(A.Debug("ServerCutText"),this._sock.rQwait("ServerCutText header",7,1))return!1;this._sock.rQskipBytes(3);var t=this._sock.rQshift32();if(t=(0,Y.toSigned32bit)(t),this._sock.rQwait("ServerCutText content",Math.abs(t),8))return!1;if(t>=0){var d=this._sock.rQshiftStr(t);if(this._viewOnly)return!0;this.dispatchEvent(new CustomEvent("clipboard",{detail:{text:d}}))}else{t=Math.abs(t);var o=this._sock.rQshift32(),M=o&65535,U=o&4278190080,z=!!(U&Ce);if(z){this._clipboardServerCapabilitiesFormats={},this._clipboardServerCapabilitiesActions={};for(var ae=0;ae<=15;ae++){var Me=1<<ae;M&Me&&(this._clipboardServerCapabilitiesFormats[Me]=!0,this._sock.rQshift32())}for(var Pe=24;Pe<=31;Pe++){var Xe=1<<Pe;this._clipboardServerCapabilitiesActions[Xe]=!!(U&Xe)}var Te=[Ce,R,Z,w,de];k.messages.extendedClipboardCaps(this._sock,Te,{extendedClipboardFormatText:0})}else if(U===R){if(this._viewOnly)return!0;this._clipboardText!=null&&this._clipboardServerCapabilitiesActions[de]&&M&ye&&k.messages.extendedClipboardProvide(this._sock,[ye],[this._clipboardText])}else if(U===Z){if(this._viewOnly)return!0;this._clipboardServerCapabilitiesActions[w]&&(this._clipboardText!=null?k.messages.extendedClipboardNotify(this._sock,[ye]):k.messages.extendedClipboardNotify(this._sock,[]))}else if(U===w){if(this._viewOnly)return!0;this._clipboardServerCapabilitiesActions[R]&&M&ye&&k.messages.extendedClipboardRequest(this._sock,[ye])}else if(U===de){if(this._viewOnly||!(M&ye))return!0;this._clipboardText=null;var Be=this._sock.rQshiftBytes(t-4),Ke=new s.default,Ie=null;Ke.setInput(Be);for(var Ye=0;Ye<=15;Ye++){var qe=1<<Ye;if(M&qe){var Ne=0,Ge=Ke.inflate(4);Ne|=Ge[0]<<24,Ne|=Ge[1]<<16,Ne|=Ge[2]<<8,Ne|=Ge[3];var et=Ke.inflate(Ne);qe===ye&&(Ie=et)}}if(Ke.setInput(null),Ie!==null){for(var rt="",st=0;st<Ie.length;st++)rt+=String.fromCharCode(Ie[st]);Ie=rt,Ie=(0,K.decodeUTF8)(Ie),Ie.length>0&&Ie.charAt(Ie.length-1)==="\0"&&(Ie=Ie.slice(0,-1)),Ie=Ie.replaceAll(`\r
`,`
`),this.dispatchEvent(new CustomEvent("clipboard",{detail:{text:Ie}}))}}else return this._fail("Unexpected action in extended clipboard message: "+U)}return!0}},{key:"_handleServerFenceMsg",value:function(){if(this._sock.rQwait("ServerFence header",8,1))return!1;this._sock.rQskipBytes(3);var t=this._sock.rQshift32(),d=this._sock.rQshift8();if(this._sock.rQwait("ServerFence payload",d,9))return!1;d>64&&(A.Warn("Bad payload length ("+d+") in fence response"),d=64);var o=this._sock.rQshiftStr(d);return this._supportsFence=!0,t&1<<31?(t&=3,k.messages.clientFence(this._sock,t,o),!0):this._fail("Unexpected fence response")}},{key:"_handleXvpMsg",value:function(){if(this._sock.rQwait("XVP version and message",3,1))return!1;this._sock.rQskipBytes(1);var t=this._sock.rQshift8(),d=this._sock.rQshift8();switch(d){case 0:A.Error("XVP Operation Failed");break;case 1:this._rfbXvpVer=t,A.Info("XVP extensions enabled (version "+this._rfbXvpVer+")"),this._setCapability("power",!0);break;default:this._fail("Illegal server XVP message (msg: "+d+")");break}return!0}},{key:"_normalMsg",value:function(){var t;this._FBU.rects>0?t=0:t=this._sock.rQshift8();var d,o;switch(t){case 0:return o=this._framebufferUpdate(),o&&!this._enabledContinuousUpdates&&k.messages.fbUpdateRequest(this._sock,!0,0,0,this._fbWidth,this._fbHeight),o;case 1:return this._handleSetColourMapMsg();case 2:return A.Debug("Bell"),this.dispatchEvent(new CustomEvent("bell",{detail:{}})),!0;case 3:return this._handleServerCutText();case 150:return d=!this._supportsContinuousUpdates,this._supportsContinuousUpdates=!0,this._enabledContinuousUpdates=!1,d&&(this._enabledContinuousUpdates=!0,this._updateContinuousUpdates(),A.Info("Enabling continuous updates.")),!0;case 248:return this._handleServerFenceMsg();case 250:return this._handleXvpMsg();default:return this._fail("Unexpected server message (type "+t+")"),A.Debug("sock.rQpeekBytes(30): "+this._sock.rQpeekBytes(30)),!0}}},{key:"_framebufferUpdate",value:function(){var t=this;if(this._FBU.rects===0){if(this._sock.rQwait("FBU header",3,1))return!1;if(this._sock.rQskipBytes(1),this._FBU.rects=this._sock.rQshift16(),this._display.pending())return this._flushing=!0,this._display.flush().then(function(){t._flushing=!1,t._sock.rQwait("message",1)||t._handleMessage()}),!1}for(;this._FBU.rects>0;){if(this._FBU.encoding===null){if(this._sock.rQwait("rect header",12))return!1;this._FBU.x=this._sock.rQshift16(),this._FBU.y=this._sock.rQshift16(),this._FBU.width=this._sock.rQshift16(),this._FBU.height=this._sock.rQshift16(),this._FBU.encoding=this._sock.rQshift32(),this._FBU.encoding>>=0}if(!this._handleRect())return!1;this._FBU.rects--,this._FBU.encoding=null}return this._display.flip(),!0}},{key:"_handleRect",value:function(){switch(this._FBU.encoding){case c.encodings.pseudoEncodingLastRect:return this._FBU.rects=1,!0;case c.encodings.pseudoEncodingVMwareCursor:return this._handleVMwareCursor();case c.encodings.pseudoEncodingCursor:return this._handleCursor();case c.encodings.pseudoEncodingQEMUExtendedKeyEvent:return this._qemuExtKeyEventSupported=!0,!0;case c.encodings.pseudoEncodingDesktopName:return this._handleDesktopName();case c.encodings.pseudoEncodingDesktopSize:return this._resize(this._FBU.width,this._FBU.height),!0;case c.encodings.pseudoEncodingExtendedDesktopSize:return this._handleExtendedDesktopSize();case c.encodings.pseudoEncodingQEMULedEvent:return this._handleLedEvent();default:return this._handleDataRect()}}},{key:"_handleVMwareCursor",value:function(){var t=this._FBU.x,d=this._FBU.y,o=this._FBU.width,M=this._FBU.height;if(this._sock.rQwait("VMware cursor encoding",1))return!1;var U=this._sock.rQshift8();this._sock.rQshift8();var z,ae=4;if(U==0){var Me=-256;if(z=new Array(o*M*ae),this._sock.rQwait("VMware cursor classic encoding",o*M*ae*2,2))return!1;for(var Pe=new Array(o*M),Xe=0;Xe<o*M;Xe++)Pe[Xe]=this._sock.rQshift32();for(var Te=new Array(o*M),Be=0;Be<o*M;Be++)Te[Be]=this._sock.rQshift32();for(var Ke=0;Ke<o*M;Ke++)if(Pe[Ke]==0){var Ie=Te[Ke],Ye=Ie>>8&255,qe=Ie>>16&255,Ne=Ie>>24&255;z[Ke*ae]=Ye,z[Ke*ae+1]=qe,z[Ke*ae+2]=Ne,z[Ke*ae+3]=255}else(Pe[Ke]&Me)==Me?Te[Ke]==0?(z[Ke*ae]=0,z[Ke*ae+1]=0,z[Ke*ae+2]=0,z[Ke*ae+3]=0):((Te[Ke]&Me)==Me,z[Ke*ae]=0,z[Ke*ae+1]=0,z[Ke*ae+2]=0,z[Ke*ae+3]=255):(z[Ke*ae]=0,z[Ke*ae+1]=0,z[Ke*ae+2]=0,z[Ke*ae+3]=255)}else if(U==1){if(this._sock.rQwait("VMware cursor alpha encoding",o*M*4,2))return!1;z=new Array(o*M*ae);for(var Ge=0;Ge<o*M;Ge++){var et=this._sock.rQshift32();z[Ge*4]=et>>24&255,z[Ge*4+1]=et>>16&255,z[Ge*4+2]=et>>8&255,z[Ge*4+3]=et&255}}else return A.Warn("The given cursor type is not supported: "+U+" given."),!1;return this._updateCursor(z,t,d,o,M),!0}},{key:"_handleCursor",value:function(){var t=this._FBU.x,d=this._FBU.y,o=this._FBU.width,M=this._FBU.height,U=o*M*4,z=Math.ceil(o/8)*M,ae=U+z;if(this._sock.rQwait("cursor encoding",ae))return!1;for(var Me=this._sock.rQshiftBytes(U),Pe=this._sock.rQshiftBytes(z),Xe=new Uint8Array(o*M*4),Te=0,Be=0;Be<M;Be++)for(var Ke=0;Ke<o;Ke++){var Ie=Be*Math.ceil(o/8)+Math.floor(Ke/8),Ye=Pe[Ie]<<Ke%8&128?255:0;Xe[Te]=Me[Te+2],Xe[Te+1]=Me[Te+1],Xe[Te+2]=Me[Te],Xe[Te+3]=Ye,Te+=4}return this._updateCursor(Xe,t,d,o,M),!0}},{key:"_handleDesktopName",value:function(){if(this._sock.rQwait("DesktopName",4))return!1;var t=this._sock.rQshift32();if(this._sock.rQwait("DesktopName",t,4))return!1;var d=this._sock.rQshiftStr(t);return d=(0,K.decodeUTF8)(d,!0),this._setDesktopName(d),!0}},{key:"_handleLedEvent",value:function(){if(this._sock.rQwait("LED Status",1))return!1;var t=this._sock.rQshift8(),d=!!(t&2),o=!!(t&4);return this._remoteCapsLock=o,this._remoteNumLock=d,!0}},{key:"_handleExtendedDesktopSize",value:function(){if(this._sock.rQwait("ExtendedDesktopSize",4))return!1;var t=this._sock.rQpeek8(),d=4+t*16;if(this._sock.rQwait("ExtendedDesktopSize",d))return!1;var o=!this._supportsSetDesktopSize;this._supportsSetDesktopSize=!0,this._sock.rQskipBytes(1),this._sock.rQskipBytes(3);for(var M=0;M<t;M+=1)M===0?(this._screenID=this._sock.rQshift32(),this._sock.rQskipBytes(2),this._sock.rQskipBytes(2),this._sock.rQskipBytes(2),this._sock.rQskipBytes(2),this._screenFlags=this._sock.rQshift32()):this._sock.rQskipBytes(16);if(this._FBU.x===1&&this._FBU.y!==0){var U="";switch(this._FBU.y){case 1:U="Resize is administratively prohibited";break;case 2:U="Out of resources";break;case 3:U="Invalid screen layout";break;default:U="Unknown reason";break}A.Warn("Server did not accept the resize request: "+U)}else this._resize(this._FBU.width,this._FBU.height);return o&&this._requestRemoteResize(),!0}},{key:"_handleDataRect",value:function(){var t=this._decoders[this._FBU.encoding];if(!t)return this._fail("Unsupported encoding (encoding: "+this._FBU.encoding+")"),!1;try{return t.decodeRect(this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height,this._sock,this._display,this._fbDepth)}catch(d){return this._fail("Error decoding rect: "+d),!1}}},{key:"_updateContinuousUpdates",value:function(){this._enabledContinuousUpdates&&k.messages.enableContinuousUpdates(this._sock,!0,0,0,this._fbWidth,this._fbHeight)}},{key:"_resize",value:function(t,d){this._fbWidth=t,this._fbHeight=d,this._display.resize(this._fbWidth,this._fbHeight),this._updateClip(),this._updateScale(),this._updateContinuousUpdates(),this._saveExpectedClientSize()}},{key:"_xvpOp",value:function(t,d){this._rfbXvpVer<t||(A.Info("Sending XVP operation "+d+" (version "+t+")"),k.messages.xvpOp(this._sock,t,d))}},{key:"_updateCursor",value:function(t,d,o,M,U){this._cursorImage={rgbaPixels:t,hotx:d,hoty:o,w:M,h:U},this._refreshCursor()}},{key:"_shouldShowDotCursor",value:function(){if(!this._showDotCursor)return!1;for(var t=3;t<this._cursorImage.rgbaPixels.length;t+=4)if(this._cursorImage.rgbaPixels[t])return!1;return!0}},{key:"_refreshCursor",value:function(){if(!(this._rfbConnectionState!=="connecting"&&this._rfbConnectionState!=="connected")){var t=this._shouldShowDotCursor()?k.cursors.dot:this._cursorImage;this._cursor.change(t.rgbaPixels,t.hotx,t.hoty,t.w,t.h)}}}],[{key:"genDES",value:function(t,d){var o=t.split("").map(function(U){return U.charCodeAt(0)}),M=v.default.importKey("raw",o,{name:"DES-ECB"},!1,["encrypt"]);return v.default.encrypt({name:"DES-ECB"},M,d)}}])}(u.default);Ee.messages={keyEvent:function(k,m,t){k.sQpush8(4),k.sQpush8(t),k.sQpush16(0),k.sQpush32(m),k.flush()},QEMUExtendedKeyEvent:function(k,m,t,d){function o(U){var z=d>>8,ae=d&255;return z===224&&ae<127?ae|128:U}k.sQpush8(255),k.sQpush8(0),k.sQpush16(t),k.sQpush32(m);var M=o(d);k.sQpush32(M),k.flush()},pointerEvent:function(k,m,t,d){k.sQpush8(5),k.sQpush8(d),k.sQpush16(m),k.sQpush16(t),k.flush()},_buildExtendedClipboardFlags:function(k,m){for(var t=new Uint8Array(4),d=0,o=0,M=0;M<k.length;M++)o|=k[M];for(var U=0;U<m.length;U++)d|=m[U];return t[0]=o>>24,t[1]=0,t[2]=0,t[3]=d,t},extendedClipboardProvide:function(k,m,t){for(var d=new p.default,o=[],M=0;M<m.length;M++){if(m[M]!=ye)throw new Error("Unsupported extended clipboard format for Provide message.");t[M]=t[M].replace(/\r\n|\r|\n/gm,`\r
`);var U=(0,K.encodeUTF8)(t[M]+"\0");o.push(U.length>>24&255,U.length>>16&255,U.length>>8&255,U.length&255);for(var z=0;z<U.length;z++)o.push(U.charCodeAt(z))}var ae=d.deflate(new Uint8Array(o)),Me=new Uint8Array(4+ae.length);Me.set(Ee.messages._buildExtendedClipboardFlags([de],m)),Me.set(ae,4),Ee.messages.clientCutText(k,Me,!0)},extendedClipboardNotify:function(k,m){var t=Ee.messages._buildExtendedClipboardFlags([w],m);Ee.messages.clientCutText(k,t,!0)},extendedClipboardRequest:function(k,m){var t=Ee.messages._buildExtendedClipboardFlags([R],m);Ee.messages.clientCutText(k,t,!0)},extendedClipboardCaps:function(k,m,t){var d=Object.keys(t),o=new Uint8Array(4+4*d.length);d.map(function(z){return parseInt(z)}),d.sort(function(z,ae){return z-ae}),o.set(Ee.messages._buildExtendedClipboardFlags(m,[]));for(var M=4,U=0;U<d.length;U++)o[M]=t[d[U]]>>24,o[M+1]=t[d[U]]>>16,o[M+2]=t[d[U]]>>8,o[M+3]=t[d[U]]>>0,M+=4,o[3]|=1<<d[U];Ee.messages.clientCutText(k,o,!0)},clientCutText:function(k,m){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;k.sQpush8(6),k.sQpush8(0),k.sQpush8(0),k.sQpush8(0);var d;t?d=(0,Y.toUnsigned32bit)(-m.length):d=m.length,k.sQpush32(d),k.sQpushBytes(m),k.flush()},setDesktopSize:function(k,m,t,d,o){k.sQpush8(251),k.sQpush8(0),k.sQpush16(m),k.sQpush16(t),k.sQpush8(1),k.sQpush8(0),k.sQpush32(d),k.sQpush16(0),k.sQpush16(0),k.sQpush16(m),k.sQpush16(t),k.sQpush32(o),k.flush()},clientFence:function(k,m,t){k.sQpush8(248),k.sQpush8(0),k.sQpush8(0),k.sQpush8(0),k.sQpush32(m),k.sQpush8(t.length),k.sQpushString(t),k.flush()},enableContinuousUpdates:function(k,m,t,d,o,M){k.sQpush8(150),k.sQpush8(m),k.sQpush16(t),k.sQpush16(d),k.sQpush16(o),k.sQpush16(M),k.flush()},pixelFormat:function(k,m,t){var d;m>16?d=32:m>8?d=16:d=8;var o=Math.floor(m/3);k.sQpush8(0),k.sQpush8(0),k.sQpush8(0),k.sQpush8(0),k.sQpush8(d),k.sQpush8(m),k.sQpush8(0),k.sQpush8(t?1:0),k.sQpush16((1<<o)-1),k.sQpush16((1<<o)-1),k.sQpush16((1<<o)-1),k.sQpush8(o*0),k.sQpush8(o*1),k.sQpush8(o*2),k.sQpush8(0),k.sQpush8(0),k.sQpush8(0),k.flush()},clientEncodings:function(k,m){k.sQpush8(2),k.sQpush8(0),k.sQpush16(m.length);for(var t=0;t<m.length;t++)k.sQpush32(m[t]);k.flush()},fbUpdateRequest:function(k,m,t,d,o,M){typeof t>"u"&&(t=0),typeof d>"u"&&(d=0),k.sQpush8(3),k.sQpush8(m?1:0),k.sQpush16(t),k.sQpush16(d),k.sQpush16(o),k.sQpush16(M),k.flush()},xvpOp:function(k,m,t){k.sQpush8(250),k.sQpush8(0),k.sQpush8(m),k.sQpush8(t),k.flush()}},Ee.cursors={none:{rgbaPixels:new Uint8Array,w:0,h:0,hotx:0,hoty:0},dot:{rgbaPixels:new Uint8Array([255,255,255,255,0,0,0,255,255,255,255,255,0,0,0,255,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,255,255,255,255,255]),w:3,h:3,hotx:1,hoty:1}}}(Lt)),Lt}var si=oi();const ui=En(si),li=(P,h)=>{const Y=ft.useRef(null),A=ft.useRef(P.autoConnect??!0),K=ft.useRef([]),Q=ft.useRef({}),L=ft.useRef(null),[C,u]=ft.useState(!0),{url:_,websocket:s,style:p,className:f,viewOnly:r,rfbOptions:n,focusOnClick:l,clipViewport:a,dragViewport:i,scaleViewport:c,resizeSession:x,showDotCursor:v,background:b,qualityLevel:y,compressionLevel:g,autoConnect:S=!0,retryDuration:X=3e3,debug:F=!1,onConnect:T,onDisconnect:B,onCredentialsRequired:D,onSecurityFailure:N,onClipboard:te,onBell:_e,onDesktopName:ge,onCapabilities:ve,onClippingViewport:Fe}=P,Ae={log:(...H)=>{F&&console.log(...H)},info:(...H)=>{F&&console.info(...H)},error:(...H)=>{F&&console.error(...H)}},le=()=>Y.current,ke=H=>{Y.current=H},Re=()=>A.current,De=H=>{A.current=H},J=H=>{if(T){T(H),u(!1);return}Ae.info("Connected to remote VNC."),u(!1)},$=H=>{if(B){B(H),u(!0);return}Re()&&!s?(Ae.info(`Unexpectedly disconnected from remote VNC, retrying in ${X/1e3} seconds.`),K.current.push(setTimeout(I,X))):Ae.info("Disconnected from remote VNC."),u(!0)},re=H=>{var Ve,Ze,at;const we=le();if(D){D(H);return}const je=((Ve=n==null?void 0:n.credentials)==null?void 0:Ve.username)??"",ze=((Ze=n==null?void 0:n.credentials)==null?void 0:Ze.password)??"",xe=((at=n==null?void 0:n.credentials)==null?void 0:at.target)??"";we==null||we.sendCredentials({password:ze,username:je,target:xe})},G=H=>{if(ge){ge(H);return}Ae.info(`Desktop name is ${H.detail.name}`)},O=()=>{const H=le();try{if(!H)return;K.current.forEach(clearTimeout),Object.keys(Q.current).forEach(we=>{Q.current[we]&&(H.removeEventListener(we,Q.current[we]),Q.current[we]=void 0)}),H.disconnect(),ke(null),De(!1),$(new CustomEvent("disconnect",{detail:{clean:!0}}))}catch(we){Ae.error(we),ke(null),De(!1)}},I=()=>{try{if(A&&Y&&O(),!L.current)return;if(!_&&!s){Ae.error("Either url or websocket must be provided");return}L.current.innerHTML="";const H=new ui(L.current,s||_,n);H.viewOnly=r??!1,H.focusOnClick=l??!1,H.clipViewport=a??!1,H.dragViewport=i??!1,H.resizeSession=x??!1,H.scaleViewport=c??!1,H.showDotCursor=v??!1,H.background=b??"",H.qualityLevel=y??6,H.compressionLevel=g??2,ke(H),Q.current.connect=J,Q.current.disconnect=$,Q.current.credentialsrequired=re,Q.current.securityfailure=N,Q.current.clipboard=te,Q.current.bell=_e,Q.current.desktopname=G,Q.current.capabilities=ve,Q.current.clippingviewport=Fe,Object.keys(Q.current).forEach(we=>{Q.current[we]&&H.addEventListener(we,Q.current[we])}),De(!0)}catch(H){Ae.error(H)}},se=H=>{const we=le(),je={username:(H==null?void 0:H.username)??"",password:(H==null?void 0:H.password)??"",target:(H==null?void 0:H.target)??""};we==null||we.sendCredentials(je)},ue=(H,we,je)=>{const ze=le();ze==null||ze.sendKey(H,we,je)},j=()=>{const H=le();H==null||H.sendCtrlAltDel()},W=()=>{const H=le();H==null||H.focus()},ee=()=>{const H=le();H==null||H.blur()},ne=()=>{const H=le();H==null||H.machineShutdown()},be=()=>{const H=le();H==null||H.machineReboot()},V=()=>{const H=le();H==null||H.machineReset()},q=H=>{const we=le();we==null||we.clipboardPasteFrom(H)};ft.useImperativeHandle(h,()=>({connect:I,disconnect:O,connected:A.current,sendCredentials:se,sendKey:ue,sendCtrlAltDel:j,focus:W,blur:ee,machineShutdown:ne,machineReboot:be,machineReset:V,clipboardPaste:q,rfb:Y.current,loading:C,eventListeners:Q.current})),ft.useEffect(()=>(S&&I(),O),[]);const ie=()=>{const H=le();H&&H.focus()},ce=()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),ie()},he=()=>{const H=le();H&&H.blur()};return kt.jsx("div",{style:p,className:f,ref:L,onMouseEnter:ce,onMouseLeave:he})},fi=ft.forwardRef(li);ct.VncScreen=fi,Object.defineProperty(ct,Symbol.toStringTag,{value:"Module"})});
